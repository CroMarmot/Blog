---
title: js 知识补充 2
date: 2019-04-20 11:20:14
tags:
category: [code,js]
---

# 感谢

https://zh.javascript.info

有精力的朋友还是建议读上面链接,如果它们的文档有帮助，也建议购买它们的 epub/pdf 作为支持

本文是基于我C++的熟练，和一定时间js使用后的阅读知识补充整理,章节分化基本和上面链接的内容对应

该篇是对应上述链接的第二部分

# Document

运行时 鸟瞰图

![鸟瞰图](https://zh.javascript.info/article/browser-environment/windowObjects.png)

<!-- more -->

文档对象模型 DOM : document https://dom.spec.whatwg.org/

开发人员必须为每个浏览器编写不同的代码。那是昏暗、混乱的时代。

现在尽管有两个组在做document，但它们99%是相似的

当我们修改文档的样式规则时，CSSOM 与 DOM 一起使用。但实际上，很少需要 CSSOM，因为通常 CSS 规则是静态的。 https://www.w3.org/TR/cssom-1/

BOM(HTML规范的一部分):例如包括 https://html.spec.whatwg.org

navigator,提供有关浏览器和操作系统的背景信息。

location允许读取和重定向URL

Mozilla 手册 https://developer.mozilla.org/en-US/search

DOM:

`#text`永远是 DOM中的叶子节点

https://zh.javascript.info/dom-nodes

看这个举例，你会发现，比你预期的的#text会多更多,不过好在是这些都是#text，都是叶子节点，在过滤时只要规则正确，不会被过滤到

下面举例说如果你把各个`<html>`，`<body>`等之间的空格回车都去掉，那它们生成的dom树就不再会有多余的#text

开发者工具中的 DOM 结构已经过简化。文本节点仅以文本形式显。根本没有“空白”（只有空格）的文本节点

历史原因:

1. 由于历史原因，`<head>` 之前的空格和换行符被忽略，
2. 如果我们在 `</body>` 之后放置了一些东西，那么它会自动移动到 `body` 内部，因为 `HTML` 规范要求所有内容必须位于 `<body>` 内。所以 `</body>` 后面可能没有空格。

自动修正【看看，更多的还是应该保证 正确的编写

表格是一个有趣的“特例”。按照 `DOM` 规范，它们必须具有 `<tbody>`，但 `HTML` 文本可能（官方的）忽略它。然后浏览器自动在 `DOM` 中创建 `<tbody>`。

有12个节点类型，常用的就是你F12能看到的`document`，元素节点，文本节点,和注释

http://software.hixie.ch/utilities/js/live-dom-viewer/

> 以前也没系统的看过chrome的控制台方法 官方文档 TODO: https://developers.google.com/web/tools/chrome-devtools/

现在最后选中的元素可以用 $0 来进行操作，以前选择的是 $1，如此等等。

我们可以在它们之上运行命令。例如，$0.style.background = 'red' 使选定的列表项变成红色，

inspect(node)来从命令行，反过去找document中的元素

DOM 结构

![DOM](https://zh.javascript.info/article/dom-navigation/dom-links.png)

`document.body`,`document.head`

在DOM中用`===null`判断节点不存在

`childNodes`一个类似数组的个迭代集合只读,引用(实时的), `===.firstChild`, `===.lastChild`,`.hasChildNodes()`

`.previousSibling`,`.nextSibling`

如果希望忽略文本和注释节点，只访问元素节点

![DOM](https://zh.javascript.info/article/dom-navigation/dom-links-elements.png)

table支持更多的东西[感觉这部分主要是了解，因为 实际编写中，现在主流框架，基本很少需要进行原生元素的操作了[github说没用任何框架除外

`.getElementsBy*`:`Id`,`TagName`,`Name`,`ClassName`

`.querySelectorAll()` ,`querySelector`,`.matches`,`.closest`(最近祖先匹配) 都是css相关的调用 方法 

**注意**！ `getElementsBy*`返回的是 一个实时会变动的集合，而`querySelectorAll`返回的是一个`static`的

场景:

1. 获取元素

2. 改变元素

3. 操作元素 [如果用的`querySelectorAll`得到的，那么可能和当前真是的元素不一致]

原文上给了几个操作的一个总结表[感觉因为现在基本都是框架就不整理进来了]

![DOM节点类](https://zh.javascript.info/article/basic-dom-node-properties/dom-class-hierarchy.png)

[Node](https://dom.spec.whatwg.org/#interface-node)

`Node` 是实现了DOM树上的节点方法，父，子，前后节点等

`Element` 是DOM元素的基类,在Node之上，提供了`.*Element.*`,`query*`

`.nodeType == ` 检查，是不是,元素节点，文本节点，document对象

`.nodeName`(Node定义) 和`.tagName`(Element的节点) 总是全大写

`.innerHTML`字符串html,`.outerHTML` , 相对于`.innerHTML`会多一层外层的包裹,注意到这些都是指针式的操作，所以outerHTML改完以后，不应该继续使用

`.data`可以获取`.nodeValue/data`文本节点内容

`.textContent`纯文本 [安全的！也就是不担心元素注入]

`.hidden`是否可见 等同于`display:none;`

除此以外，特例

`input`,`select`,`textarea`都有`.value`

`a`有`href`

`id`



# 事件简介

# 事件细节

# 表单，控件



