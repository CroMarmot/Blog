<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/Blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/Blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/Blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/Blog/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="googlea0cb77247135ae4c.html">

<link rel="stylesheet" href="/Blog/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha256-xejo6yLi6vGtAjcMIsY8BHdKsLg7QynVlFMzdQgUuy8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cromarmot.github.io","root":"/Blog/","images":"/Blog/images","scheme":"Muse","darkmode":false,"version":"8.12.3","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœå°‹...","empty":"æˆ‘å€‘ç„¡æ³•æ‰¾åˆ°ä»»ä½•æœ‰é—œ ${query} çš„æœç´¢çµæœ","hits_time":"${hits} æ‰¾åˆ° ${time} å€‹çµæœ","hits":"æ‰¾åˆ° ${hits} å€‹çµæœ"},"path":"/Blog/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/Blog/js/config.js"></script>

    <meta name="description" content="ä¾èµ–è‹±æ–‡åŸæ–‡ rxjså…¥é—¨ æ‘˜è¦å¦‚ä»Š,è¶Šæ¥è¶Šå¤šå¼€å‘è€…å¼€å§‹å­¦ RxJs, å¹¶è·Ÿéšæœ€ä½³å®è·µæ­£ç¡®ä½¿ç”¨å®ƒã€‚ä½†æ˜¯å®Œå…¨ä¸å¿…è¦,é‚£äº›æ‰€è°“çš„æœ€ä½³å®è·µï¼Œéœ€è¦å­¦ä¸€äº›æ–°çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨ä½ çš„é¡¹ç›®ä¸­å¢åŠ é¢å¤–çš„ä»£ç ã€‚ æ›´å¤šçš„æ˜¯ï¼Œä½¿ç”¨æœ€ä½³å®è·µï¼Œæ˜¯å†’ç€åˆ›å»ºå¥½çš„ä»£ç åº“å’Œè®©ä½ çš„é˜Ÿå‹é«˜å…´çš„é£é™©! ğŸŒˆ Stop being a gray mass! æ‰“ç ´å¸¸è§„ï¼Œåœæ­¢ä½¿ç”¨æœ€ä½³å®è·µ ä¸‹é¢æˆ‘å°†æƒ³ä½ ä»‹ç»ï¼Œæ€ä¹ˆæ”¹é€ é‚£äº›æ‰€è°“çš„æœ€ä½³å®è·µä»£ç .  ä¸è¦u">
<meta property="og:type" content="article">
<meta property="og:title" content="åˆ«éµå¾ªRxJSçš„æœ€ä½³å®è·µ">
<meta property="og:url" content="https://cromarmot.github.io/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/index.html">
<meta property="og:site_name" content="Cro-Marmot&#39;s Blog">
<meta property="og:description" content="ä¾èµ–è‹±æ–‡åŸæ–‡ rxjså…¥é—¨ æ‘˜è¦å¦‚ä»Š,è¶Šæ¥è¶Šå¤šå¼€å‘è€…å¼€å§‹å­¦ RxJs, å¹¶è·Ÿéšæœ€ä½³å®è·µæ­£ç¡®ä½¿ç”¨å®ƒã€‚ä½†æ˜¯å®Œå…¨ä¸å¿…è¦,é‚£äº›æ‰€è°“çš„æœ€ä½³å®è·µï¼Œéœ€è¦å­¦ä¸€äº›æ–°çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨ä½ çš„é¡¹ç›®ä¸­å¢åŠ é¢å¤–çš„ä»£ç ã€‚ æ›´å¤šçš„æ˜¯ï¼Œä½¿ç”¨æœ€ä½³å®è·µï¼Œæ˜¯å†’ç€åˆ›å»ºå¥½çš„ä»£ç åº“å’Œè®©ä½ çš„é˜Ÿå‹é«˜å…´çš„é£é™©! ğŸŒˆ Stop being a gray mass! æ‰“ç ´å¸¸è§„ï¼Œåœæ­¢ä½¿ç”¨æœ€ä½³å®è·µ ä¸‹é¢æˆ‘å°†æƒ³ä½ ä»‹ç»ï¼Œæ€ä¹ˆæ”¹é€ é‚£äº›æ‰€è°“çš„æœ€ä½³å®è·µä»£ç .  ä¸è¦u">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://res.cloudinary.com/practicaldev/image/fetch/s--cuqyIqfO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.ibb.co/7zwMdyn/image.png">
<meta property="article:published_time" content="2019-09-26T17:01:01.000Z">
<meta property="article:modified_time" content="2022-09-07T19:35:21.011Z">
<meta property="article:author" content="Cro-Marmot">
<meta property="article:tag" content="Angular2+">
<meta property="article:tag" content="rxjs">
<meta property="article:tag" content="observable">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://res.cloudinary.com/practicaldev/image/fetch/s--cuqyIqfO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.ibb.co/7zwMdyn/image.png">


<link rel="canonical" href="https://cromarmot.github.io/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-TW","comments":true,"permalink":"https://cromarmot.github.io/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/","path":"19-09-27-Dont_follow_RxJS_Best_Practices/","title":"åˆ«éµå¾ªRxJSçš„æœ€ä½³å®è·µ"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>åˆ«éµå¾ªRxJSçš„æœ€ä½³å®è·µ | Cro-Marmot's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/Blog/css/noscript.css">
  </noscript>
<link rel="alternate" href="/Blog/atom.xml" title="Cro-Marmot's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ›å°èˆªæ¬„" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/Blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cro-Marmot's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/Blog/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é </a></li><li class="menu-item menu-item-archives"><a href="/Blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>æ­¸æª”<span class="badge">116</span></a></li><li class="menu-item menu-item-rss"><a href="/Blog/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>rss</a></li><li class="menu-item menu-item-categories"><a href="/Blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†é¡<span class="badge">37</span></a></li><li class="menu-item menu-item-tags"><a href="/Blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ¨™ç±¤<span class="badge">127</span></a></li><li class="menu-item menu-item-about"><a href="/Blog/20-07-13-rsa/#contact" rel="section"><i class="fa fa-user fa-fw"></i>é—œæ–¼</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœå°‹
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœå°‹..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®éŒ„
        </li>
        <li class="sidebar-nav-overview">
          æœ¬ç«™æ¦‚è¦
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BE%9D%E8%B5%96"><span class="nav-number">1.</span> <span class="nav-text">ä¾èµ–</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%91%98%E8%A6%81"><span class="nav-number">2.</span> <span class="nav-text">æ‘˜è¦</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%8D%E8%A6%81unsubscribe"><span class="nav-number">3.</span> <span class="nav-text">ä¸è¦unsubscribe</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97%E4%BD%BF%E7%94%A8Subscribe"><span class="nav-number">4.</span> <span class="nav-text">åµŒå¥—ä½¿ç”¨Subscribe</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8-%E7%BA%AF%E5%87%BD%E6%95%B0"><span class="nav-number">5.</span> <span class="nav-text">ä¸è¦ä½¿ç”¨ çº¯å‡½æ•°</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8subscribe%EF%BC%8C%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8-async-pipe"><span class="nav-number">6.</span> <span class="nav-text">æ‰‹åŠ¨subscribeï¼Œä¸è¦ä½¿ç”¨ async pipe</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%91%E4%BD%A0%E7%9A%84%E6%9C%8D%E5%8A%A1%E6%9A%B4%E9%9C%B2subjects"><span class="nav-number">7.</span> <span class="nav-text">å‘ä½ çš„æœåŠ¡æš´éœ²subjects</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A7%8B%E7%BB%88%E5%AF%B9%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E6%B5%81"><span class="nav-number">8.</span> <span class="nav-text">å§‹ç»ˆå¯¹å­ç»„ä»¶ä¼ é€’æµ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%9D%E7%9F%B3%E5%9B%BE-%E5%B9%B6%E4%B8%8D%E9%80%82%E5%90%88%E4%BD%A0"><span class="nav-number">9.</span> <span class="nav-text">å®çŸ³å›¾? å¹¶ä¸é€‚åˆä½ </span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">10.</span> <span class="nav-text">æ€»ç»“</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%BB%E5%90%8E%E8%A1%A5%E5%85%85"><span class="nav-number">11.</span> <span class="nav-text">è¯»åè¡¥å……</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E4%B8%8E%E9%A1%B5%E9%9D%A2%E5%86%85%E5%BC%82%E6%AD%A5%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">11.1.</span> <span class="nav-text">é¡µé¢ä¸é¡µé¢å†…å¼‚æ­¥çš„ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9E%E8%B0%83%E5%9C%B0%E7%8B%B1"><span class="nav-number">11.2.</span> <span class="nav-text">å›è°ƒåœ°ç‹±</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BA%AF%E5%87%BD%E6%95%B0"><span class="nav-number">11.3.</span> <span class="nav-text">çº¯å‡½æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Async-Pipe"><span class="nav-number">11.4.</span> <span class="nav-text">Async Pipe</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%81%E8%A3%85%E4%B8%8E%E6%9A%B4%E9%9C%B2"><span class="nav-number">11.5.</span> <span class="nav-text">å°è£…ä¸æš´éœ²</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%88%B6%E5%90%91%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E4%B8%8D%E5%BA%94%E4%BD%BF%E7%94%A8-ob"><span class="nav-number">11.6.</span> <span class="nav-text">çˆ¶å‘å­ç»„ä»¶ä¼ é€’ä¸åº”ä½¿ç”¨ ob</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95-observables%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="nav-number">11.7.</span> <span class="nav-text">æµ‹è¯• observableså¤„ç†å‡½æ•°</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Cro-Marmot"
      src="https://avatars.githubusercontent.com/u/24691835?v=4">
  <p class="site-author-name" itemprop="name">Cro-Marmot</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/Blog/archives/">
          <span class="site-state-item-count">116</span>
          <span class="site-state-item-name">æ–‡ç« </span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/Blog/categories/">
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">åˆ†é¡</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/Blog/tags/">
        <span class="site-state-item-count">127</span>
        <span class="site-state-item-name">æ¨™ç±¤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/cromarmot" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;cromarmot" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yexiaorain@gmail.com" title="E-Mail â†’ mailto:yexiaorain@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://atcoder.jp/users/cromarmot" title="https:&#x2F;&#x2F;atcoder.jp&#x2F;users&#x2F;cromarmot" rel="noopener" target="_blank">AtCoder</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://codeforces.com/profile/Cro-Marmot" title="https:&#x2F;&#x2F;codeforces.com&#x2F;profile&#x2F;Cro-Marmot" rel="noopener" target="_blank">Codeforces</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="å›åˆ°é ‚ç«¯">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="åˆ«éµå¾ªRxJSçš„æœ€ä½³å®è·µ | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          åˆ«éµå¾ªRxJSçš„æœ€ä½³å®è·µ
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2019-09-27 01:01:01" itemprop="dateCreated datePublished" datetime="2019-09-27T01:01:01+08:00">2019-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2022-09-08 03:35:21" itemprop="dateModified" datetime="2022-09-08T03:35:21+08:00">2022-09-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/frontend/" itemprop="url" rel="index"><span itemprop="name">frontend</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/frontend/Angular/" itemprop="url" rel="index"><span itemprop="name">Angular</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="19-09-27-Dont_follow_RxJS_Best_Practices/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>8.3k</span>
    </span>
    <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">æ‰€éœ€é–±è®€æ™‚é–“ &asymp;</span>
      <span>8 åˆ†é˜</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h1><p><a target="_blank" rel="noopener" href="https://dev.to/nikpoltoratsky/don-t-follow-rxjs-best-practices-4893#pass-streams-to-children">è‹±æ–‡åŸæ–‡</a></p>
<p><a href="/Blog/19-06-27-rxjs/">rxjså…¥é—¨</a></p>
<h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><p>å¦‚ä»Š,è¶Šæ¥è¶Šå¤šå¼€å‘è€…å¼€å§‹å­¦ RxJs, å¹¶è·Ÿéšæœ€ä½³å®è·µæ­£ç¡®ä½¿ç”¨å®ƒã€‚ä½†æ˜¯å®Œå…¨ä¸å¿…è¦,é‚£äº›æ‰€è°“çš„æœ€ä½³å®è·µï¼Œéœ€è¦å­¦ä¸€äº›æ–°çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨ä½ çš„é¡¹ç›®ä¸­å¢åŠ é¢å¤–çš„ä»£ç ã€‚</p>
<p>æ›´å¤šçš„æ˜¯ï¼Œä½¿ç”¨æœ€ä½³å®è·µï¼Œæ˜¯å†’ç€åˆ›å»ºå¥½çš„ä»£ç åº“å’Œè®©ä½ çš„é˜Ÿå‹é«˜å…´çš„é£é™©! ğŸŒˆ</p>
<p>Stop being a gray mass! æ‰“ç ´å¸¸è§„ï¼Œåœæ­¢ä½¿ç”¨æœ€ä½³å®è·µ</p>
<p>ä¸‹é¢æˆ‘å°†æƒ³ä½ ä»‹ç»ï¼Œæ€ä¹ˆæ”¹é€ é‚£äº›æ‰€è°“çš„æœ€ä½³å®è·µä»£ç .</p>
<ul>
<li>ä¸è¦unsubscribe</li>
<li>åµŒå¥—ä½¿ç”¨Subscribe</li>
<li>ä¸è¦ä½¿ç”¨ çº¯å‡½æ•°</li>
<li>æ‰‹åŠ¨subscribeï¼Œä¸è¦ä½¿ç”¨ async pipe</li>
<li>å‘ä½ çš„æœåŠ¡æš´éœ²subjects</li>
<li>å§‹ç»ˆå¯¹å­ç»„ä»¶ä¼ é€’æµ</li>
<li>å®çŸ³å›¾? å¹¶ä¸é€‚åˆä½ </li>
</ul>
<span id="more"></span>

<h1 id="ä¸è¦unsubscribe"><a href="#ä¸è¦unsubscribe" class="headerlink" title="ä¸è¦unsubscribe"></a>ä¸è¦unsubscribe</h1><p>æ‰€æœ‰äººéƒ½è¯´ï¼Œæˆ‘ä»¬å§‹ç»ˆéœ€è¦å–æ¶ˆè®¢é˜…observablesæ¥é˜²æ­¢å†…å­˜æ³„æ¼</p>
<p>ä½†ï¼Œæˆ‘è§‰å¾—ä¸è¡Œã€‚è®¤çœŸçš„å—ï¼Œè°å†³å®šä½ éœ€è¦ å–æ¶ˆè®¢é˜… observables? æ²¡å¿…è¦ï¼Œæˆ‘ä»¬æ¥ç©ä¸ªæ¸¸æˆï¼Œä¸‹é¢å“ªä¸ªå–æ¶ˆè®¢é˜…çš„å®ç°æœ€å¥½ã€‚</p>
<p>æœ‰<code>takeUntil</code>æ“ä½œç¬¦çš„å—?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span>(&#123; ... &#125;)</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MyComponent</span> implements <span class="title class_">OnInit</span>, <span class="title class_">OnDestroy</span> &#123;</span><br><span class="line"></span><br><span class="line">    private destroyed$ = <span class="keyword">new</span> <span class="title class_">Subject</span>();</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnInit</span>(<span class="params"></span>) &#123;</span><br><span class="line">      myInfiniteStream$</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">takeUntil</span>(<span class="variable language_">this</span>.<span class="property">destroyed$</span>))</span><br><span class="line">        .<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> ...);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">destroyed$</span>.<span class="title function_">next</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">destroyed$</span>.<span class="title function_">complete</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜æ˜¯ä½¿ç”¨<code>takeWhile</code>æ“ä½œç¬¦çš„?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span>(&#123; ... &#125;)</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MyComponent</span> implements <span class="title class_">OnInit</span>, <span class="title class_">OnDestroy</span> &#123;</span><br><span class="line">    private alive = <span class="literal">true</span>;</span><br><span class="line">    <span class="title function_">ngOnInit</span>(<span class="params"></span>) &#123;</span><br><span class="line">      myInfiniteStream$</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">takeWhile</span>(<span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="property">alive</span>))</span><br><span class="line">        .<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> ...);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">ngOnDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">alive</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>æ˜¾ç„¶ï¼éƒ½ä¸æ˜¯ï¼Œ<code>takeWhile</code>å’Œ<code>takeUntil</code>æ“ä½œç¬¦æœ‰éšå«æ„ä¹‰ï¼Œå¹¶ä¸”å¯èƒ½æ¯”è¾ƒéš¾ä»¥é˜…è¯» ğŸ¤“ (sarcasm). æœ€å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæ˜¯ç”¨æ˜¾ç¤ºçš„æ–¹å¼ç”¨ä¸åŒçš„å˜é‡åˆ†åˆ«ä¿å­˜æ¯ä¸ªsubscriptionï¼Œåœ¨destroyä¸­unsubscribe.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span>(&#123; ... &#125;)</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MyComponent</span> implements <span class="title class_">OnInit</span>, <span class="title class_">OnDestroy</span> &#123;</span><br><span class="line"></span><br><span class="line">    private subscription;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnInit</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription</span> = myInfiniteStream$</span><br><span class="line">        .<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> ...);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription</span>.<span class="title function_">unsubscribe</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ–¹æ¡ˆåœ¨æœ‰å¾ˆå¤š subscriptionsçš„æ—¶å€™å·¥ä½œå¾—ååˆ†ä¼˜ç§€</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123; ... &#125;)</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MyComponent</span> implements <span class="title class_">OnInit</span>, <span class="title class_">OnDestroy</span> &#123;</span><br><span class="line"></span><br><span class="line">    private subscription1;</span><br><span class="line">    private subscription2;</span><br><span class="line">    private subscription3;</span><br><span class="line">    private subscription4;</span><br><span class="line">    private subscription5;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnInit</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription1</span> = myInfiniteStream1$</span><br><span class="line">        .<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> ...);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription2</span> = myInfiniteStream2$</span><br><span class="line">        .<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> ...);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription3</span> = myInfiniteStream3$</span><br><span class="line">        .<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> ...);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription4</span> = myInfiniteStream4$</span><br><span class="line">        .<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> ...);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription5</span> = myInfiniteStream5$</span><br><span class="line">        .<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> ...);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription1</span>.<span class="title function_">unsubscribe</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription2</span>.<span class="title function_">unsubscribe</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription3</span>.<span class="title function_">unsubscribe</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription4</span>.<span class="title function_">unsubscribe</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subscription5</span>.<span class="title function_">unsubscribe</span>(); </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ–¹æ¡ˆè¿˜ä¸å®Œç¾ã€‚æ€ä¹ˆæ ·èƒ½åšå¾—æ›´å¥½å‘¢? ä½ æ„Ÿè§‰å‘¢? æ€ä¹ˆèƒ½è®©ä»£ç æ›´åŠ å¹²å‡€æ˜“è¯»?</p>
<p>æ²¡é”™ï¼Œæˆ‘ä»¬ç»™ä½ çš„ç­”æ¡ˆæ˜¯ï¼ŒæŠŠé‚£äº›ä¸‘é™‹çš„å–æ¶ˆè®¢é˜…åˆ äº†å‘—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span>(&#123; ... &#125;)</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MyComponent</span> implements <span class="title class_">OnInit</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnInit</span>(<span class="params"></span>) &#123;</span><br><span class="line">      myInfiniteStream$</span><br><span class="line">        .<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> ...);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>éå¸¸æ£’! æˆ‘ä»¬åˆ é™¤äº†å†—ä½™çš„ä»£ç ï¼Œç°åœ¨çœ‹èµ·æ¥æ¸…çˆ½ï¼Œå¹¶ä¸”èŠ‚çº¦äº†ä¸€äº›ç¡¬ç›˜ç©ºé—´ã€‚ But what will happen with myInfiniteStream$ subscription?</p>
<p>åˆ«ç®¡ä»–! ğŸ˜… è®©æˆ‘ä»¬è®©åƒåœ¾å›æ”¶å™¨å»åšé‚£äº›å·¥ä½œï¼Œä¸ç„¶å®ƒä»¬æœ‰å•¥å­˜åœ¨æ„ä¹‰ï¼Œå¯¹å§!</p>
<h1 id="åµŒå¥—ä½¿ç”¨Subscribe"><a href="#åµŒå¥—ä½¿ç”¨Subscribe" class="headerlink" title="åµŒå¥—ä½¿ç”¨Subscribe"></a>åµŒå¥—ä½¿ç”¨Subscribe</h1><p>å…¶å®ƒäººè¯´æˆ‘ä»¬åº”è¯¥ç”¨ <code>*Map</code> æ“ä½œç¬¦æ¥é“¾æ¥observables è€Œä¸æ˜¯å±‚çº§è®¢é˜…å®ƒæ¥é˜²æ­¢å›è°ƒåœ°ç‹±ã€‚</p>
<p>ä½†ï¼Œæˆ‘åˆè§‰å¾—ä¸è¡Œ. è®¤çœŸå—ï¼Œä¸ºå•¥? ä¸ºå•¥æˆ‘ä»¬éƒ½è¦ç”¨<code>switchMap/mergeMap</code>æ“ä½œç¬¦å·? ä½ è§‰å¾—ä¸‹é¢ä»£ç æ˜“è¯»å—ï¼Ÿä½ çœŸçš„å–œæ¬¢ä½ çš„é˜Ÿå‹å—ï¼Ÿ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getUser</span>().<span class="title function_">pipe</span>(</span><br><span class="line">  <span class="title function_">switchMap</span>(<span class="function"><span class="params">user</span> =&gt;</span> <span class="title function_">getDetails</span>(user)),</span><br><span class="line">  <span class="title function_">switchMap</span>(<span class="function"><span class="params">details</span> =&gt;</span> <span class="title function_">getPosts</span>(details)),</span><br><span class="line">  <span class="title function_">switchMap</span>(<span class="function"><span class="params">posts</span> =&gt;</span> <span class="title function_">getComments</span>(posts)),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ä½ è§‰ä¸è§‰å¾—å®ƒè¿‡äºæ•´æ´å¯çˆ±ï¼Œä½ æœ‰åˆ«çš„é€‰æ‹©ï¼Œçœ‹ä¸€çœ‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getUser</span>().<span class="title function_">subscribe</span>(<span class="function"><span class="params">user</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">getDetails</span>(user).<span class="title function_">subscribe</span>(<span class="function"><span class="params">details</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">getPosts</span>(details).<span class="title function_">subscribe</span>(<span class="function"><span class="params">posts</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">getComments</span>(posts).<span class="title function_">subscribe</span>(<span class="function"><span class="params">comments</span> =&gt;</span> &#123;  </span><br><span class="line">        <span class="comment">// handle all the data here</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æ›´å¥½å§ï¼Œå¦‚æœä½ æ¨ä½ çš„é˜Ÿå‹ï¼Œè€Œä¸”ä¸æƒ³å­¦æ–°çš„RxJS operatorsæ“ä½œç¬¦å·ï¼Œå°±è¿™ä¹ˆå†™ä»£ç å§.</p>
<p>åšä¸ªèªæ˜äºº! è®©ä½ çš„é˜Ÿå‹æ„Ÿå—åˆ°ä¸€äº›å›è°ƒåœ°åŸŸçš„æ€€å¿µä¹‹æƒ…ã€‚</p>
<h1 id="ä¸è¦ä½¿ç”¨-çº¯å‡½æ•°"><a href="#ä¸è¦ä½¿ç”¨-çº¯å‡½æ•°" class="headerlink" title="ä¸è¦ä½¿ç”¨ çº¯å‡½æ•°"></a>ä¸è¦ä½¿ç”¨ çº¯å‡½æ•°</h1><p>å…¶å®ƒäººè¯´ï¼Œçº¯å‡½æ•°è®©ä»£ç å¯é¢„æµ‹ï¼Œä¸”æ˜“æµ‹è¯•</p>
<p>æˆ‘åŒè§‰å¾—ä¸è¡Œã€‚ä¸ºå•¥è¦ç”¨çº¯å‡½æ•°ï¼Ÿ æµ‹è¯•å‹å¥½çš„ï¼Ÿ ç»„åˆå‹å¥½çš„ï¼Ÿ éº»çƒ¦äº†ï¼Œå½±å“globalè®©ç¼–ç æ›´åŠ ç®€å•,çœ‹ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">calculateTax</span>(<span class="params">tax: number, productPrice: number</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (productPrice * (tax / <span class="number">100</span>)) + productPrice; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºå®ä¾‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè®¡ç®—taxçš„å‡½æ•°ï¼Œä¸€ä¸ªçº¯å‡½æ•°ï¼Œå¦‚æœå…¥å‚ç›¸åŒï¼Œè¿”å›å§‹ç»ˆç›¸åŒï¼Œå¾ˆå®¹æ˜“æµ‹è¯•å’Œç»„åˆã€‚ä½†æˆ‘ä»¬çœŸçš„éœ€è¦è¿™äº›è¡Œä¸ºå—ï¼Ÿæˆ‘è§‰å¾—å¤§å¯ä¸å¿…ï¼Œä¸å¸¦å‚æ•°çš„å‡½æ•°æ›´åŠ æ˜“äºä½¿ç”¨:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">tax</span> = <span class="number">20</span>;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">productPrice</span> = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">calculateTax</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (productPrice * (tax / <span class="number">100</span>)) + productPrice; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬åˆèƒ½å¼„é”™ä»€ä¹ˆå‘¢ï¼Ÿ ğŸ˜‰</p>
<h1 id="æ‰‹åŠ¨subscribeï¼Œä¸è¦ä½¿ç”¨-async-pipe"><a href="#æ‰‹åŠ¨subscribeï¼Œä¸è¦ä½¿ç”¨-async-pipe" class="headerlink" title="æ‰‹åŠ¨subscribeï¼Œä¸è¦ä½¿ç”¨ async pipe"></a>æ‰‹åŠ¨subscribeï¼Œä¸è¦ä½¿ç”¨ async pipe</h1><p>å…¶å®ƒäººè¯´æˆ‘ä»¬éœ€è¦åœ¨angular æ¨¡æ¿ä¸­ä½¿ç”¨ async pipe æ¥å¸®åŠ©åœ¨componentsä¸­ç®¡ç†subscriptions</p>
<p>ä½†æˆ‘è§‰å¾—ä¸è¡Œï¼Œæˆ‘ä»¬ä¸Šé¢å·²ç»è®¨è®ºäº†<code>takeUntil</code>å’Œ<code>takeWhile</code>,å¹¶ä¸€è‡´è®¤å¯è¿™äº›æ“ä½œç¬¦æ¥è‡ªé‚ªæ¶ã€‚å› æ­¤ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç”¨å¦ä¸€ç§æ–¹å¼æ¥å¤„ç†async pipe.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span>(&#123;  </span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;span&gt;&#123;&#123; data$ | async &#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MyComponent</span> implements <span class="title class_">OnInit</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">data$</span>: <span class="title class_">Observable</span>&lt;<span class="title class_">Data</span>&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">ngOnInit</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data$</span> = myInfiniteStream$;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ çœ‹åˆ°äº†å—ï¼Œå¹²å‡€ï¼Œå¯è¯»ï¼Œå®¹æ˜“ç»´æŠ¤çš„ä»£ç ã€‚ä½†å®ƒä¸è¢«å…è®¸ï¼Œå¯¹äºæˆ‘æ¥è¯´ï¼Œæ”¾åˆ°æœ¬åœ°å˜é‡å†åœ¨templateé‡Œç”¨ä¸æ˜¯æ›´å¥½å—ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span>(&#123;  </span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;span&gt;&#123;&#123; data &#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">MyComponent</span> implements <span class="title class_">OnInit</span> &#123;</span><br><span class="line">  data;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">ngOnInit</span>(<span class="params"></span>) &#123;</span><br><span class="line">    myInfiniteStream$</span><br><span class="line">      .<span class="title function_">subscribe</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">this</span>.<span class="property">data</span> = data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å‘ä½ çš„æœåŠ¡æš´éœ²subjects"><a href="#å‘ä½ çš„æœåŠ¡æš´éœ²subjects" class="headerlink" title="å‘ä½ çš„æœåŠ¡æš´éœ²subjects"></a>å‘ä½ çš„æœåŠ¡æš´éœ²subjects</h1><p>åœ¨ Angularä¸­ä½¿ç”¨ Observable Data Services æ˜¯éå¸¸å¸¸è§çš„äº‹ä»¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Injectable</span>(&#123; <span class="attr">providedIn</span>: <span class="string">&#x27;root&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DataService</span> &#123;</span><br><span class="line"></span><br><span class="line">  private <span class="attr">data</span>: <span class="title class_">BehaviorSubject</span> = <span class="keyword">new</span> <span class="title class_">BehaviorSubject</span>(<span class="string">&#x27;bar&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  readonly <span class="attr">data$</span>: <span class="title class_">Observable</span> = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">asObservable</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data$</span>.<span class="title function_">next</span>(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data$</span>.<span class="title function_">next</span>(<span class="string">&#x27;bar&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæˆ‘ä»¬ä»¥observableçš„å½¢å¼æš´éœ²äº†ä¸€ä¸ªæ•°æ®æµ, èƒ½ä¿è¯åªèƒ½é€šè¿‡ æ•°æ®æœåŠ¡æ¥å£æ¥ä¿®æ”¹å®ƒã€‚ä½†å®ƒä»¤äººå›°æƒ‘ã€‚</p>
<p>ä½ æƒ³æ”¹å˜æ•°æ®çš„æ—¶å€™ï¼Œä½ å¿…é¡»çœŸçš„æ”¹å˜æ•°æ®ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸å¢åŠ ä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿå°±åœ°æ”¹å˜æ•°æ®å‘¢ï¼Ÿè®©æˆ‘ä»¬é‡å†™è¿™ä¸ªæœåŠ¡è®©å®ƒæ›´åŠ æ˜“ç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Injectable</span>(&#123; <span class="attr">providedIn</span>: <span class="string">&#x27;root&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DataService</span> &#123;</span><br><span class="line">  public <span class="attr">data$</span>: <span class="title class_">BehaviorSubject</span> = <span class="keyword">new</span> <span class="title class_">BehaviorSubject</span>(<span class="string">&#x27;bar&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Yeah!ä½ çœ‹åˆ°äº†å—ï¼Œæˆ‘ä»¬çš„æ•°æ®æœåŠ¡å˜å¾—æ›´åŠ å°ä¸”æ˜“è¯»ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä»»æ„çš„æ“ä½œæ•°æ®æµäº†ã€‚å®Œç¾ï¼ä½ ä¹Ÿè§‰å¾—æ˜¯å§?ğŸ”¥</p>
<h1 id="å§‹ç»ˆå¯¹å­ç»„ä»¶ä¼ é€’æµ"><a href="#å§‹ç»ˆå¯¹å­ç»„ä»¶ä¼ é€’æµ" class="headerlink" title="å§‹ç»ˆå¯¹å­ç»„ä»¶ä¼ é€’æµ"></a>å§‹ç»ˆå¯¹å­ç»„ä»¶ä¼ é€’æµ</h1><p>ä½ æœ‰æ²¡æœ‰å¬è¯´è¿‡ Smart&#x2F;Dump components pattern, å®ƒèƒ½å¸®åŠ©, è§£æ„ç»„ä»¶ä¹‹é—´? åŒæ ·çš„ï¼Œè¿™æ ·çš„æ¨¡å¼ï¼Œèƒ½å¤Ÿé˜»æ­¢å­ç»„ä»¶è§¦å‘çˆ¶ç»„ä»¶çš„è¡Œä¸ºã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-parent&#x27;</span>,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;app-child [data]=&quot;data$ | async&quot;&gt;&lt;/app-child&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ParentComponent</span> implements <span class="title class_">OnInit</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">data$</span>: <span class="title class_">Observable</span>&lt;<span class="title class_">Data</span>&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">ngOnInit</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data$</span> = <span class="variable language_">this</span>.<span class="property">http</span>.<span class="title function_">get</span>(...);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-child&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChildComponent</span> &#123;</span><br><span class="line">  @<span class="title class_">Input</span>() <span class="attr">data</span>: <span class="title class_">Data</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å–œæ¬¢è¿™æ ·å†™å—ï¼Ÿä½ çš„é˜Ÿå‹ä¹Ÿå–œæ¬¢å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æƒ³æŠ¥å¤ä»–ä»¬ï¼Œä½ éœ€è¦è¿™æ ·é‡å†™ä½ çš„ä»£ç ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-parent&#x27;</span>,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;app-child [data$]=&quot;data$&quot;&gt;&lt;/app-child&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ParentComponent</span> &#123;</span><br><span class="line"></span><br><span class="line">  data$ = <span class="variable language_">this</span>.<span class="property">http</span>.<span class="title function_">get</span>(...);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-child&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChildComponent</span> implements <span class="title class_">OnInit</span> &#123;</span><br><span class="line"></span><br><span class="line">  @<span class="title class_">Input</span>() <span class="attr">data$</span>: <span class="title class_">Observable</span>&lt;<span class="title class_">Data</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="attr">data</span>: <span class="title class_">Data</span>;</span><br><span class="line">  <span class="title function_">ngOnInit</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// Trigger data fetch only here</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data$</span>.<span class="title function_">subscribe</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">this</span>.<span class="property">data</span> = data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ°äº†å—ï¼Œæˆ‘ä»¬ä¸å†åœ¨çˆ¶ç»„ä»¶ä¸­å¤„ç†subscriptions. æˆ‘ä»¬ç›´æ¥æŠŠå®ƒä¸¢ç»™å­ç»„ä»¶å»å¤„ç†.</p>
<p>å¦‚æœä½ è¿™æ ·å†™ï¼Œä½ çš„é˜Ÿå‹ä¿è¯å¯ä»¥debugåˆ° å“­åˆ°æµè¡€ï¼Œä¿¡æˆ‘ã€‚</p>
<h1 id="å®çŸ³å›¾-å¹¶ä¸é€‚åˆä½ "><a href="#å®çŸ³å›¾-å¹¶ä¸é€‚åˆä½ " class="headerlink" title="å®çŸ³å›¾? å¹¶ä¸é€‚åˆä½ "></a>å®çŸ³å›¾? å¹¶ä¸é€‚åˆä½ </h1><p>ä½ çŸ¥é“å®çŸ³å›¾å—ï¼Ÿä¸ï¼Œå®ƒä¸é€‚åˆä½ ã€‚</p>
<p>è®©æˆ‘ä»¬å‡è®¾å†™äº†ä¸‹é¢çš„å‡½æ•°ï¼Œå¹¶ä¸”è¦æµ‹è¯•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">numTwoTimes</span>(<span class="params">obs: Observable&lt;number&gt;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> obs.<span class="title function_">pipe</span>(<span class="title function_">map</span>(<span class="function">(<span class="params">x: number</span>) =&gt;</span> x * <span class="number">2</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¾ˆå¤šäººï¼Œä¼šä½¿ç”¨å®çŸ³å›¾æ¥æµ‹è¯•è¿™ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">it</span>(<span class="string">&#x27;multiplies each number by 2&#x27;</span>, <span class="function">() =&gt;</span> &#123; </span><br><span class="line">  <span class="title function_">createScheduler</span>().<span class="title function_">run</span>(<span class="function">(<span class="params">&#123; cold, expectObservable &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> values = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span>, <span class="attr">x</span>: <span class="number">2</span>, <span class="attr">y</span>: <span class="number">4</span>, <span class="attr">z</span>: <span class="number">6</span> &#125;</span><br><span class="line">    <span class="keyword">const</span> numbers$ = <span class="title function_">cold</span>(<span class="string">&#x27;a-b-c-|&#x27;</span>, values) <span class="keyword">as</span> <span class="title class_">Observable</span>&lt;number&gt;;</span><br><span class="line">    <span class="keyword">const</span> resultDiagram = <span class="string">&#x27;x-y-z-|&#x27;</span>;</span><br><span class="line">    <span class="title function_">expectObservable</span>(<span class="title function_">numTwoTimes</span>(numbers$)).<span class="title function_">toBe</span>(resultDiagram, values);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œè°åˆä¼šæƒ³å­¦æ–°çš„å®çŸ³å›¾çš„éƒ¨åˆ†å‘¢ã€‚è°æƒ³å†™clean and laconic çš„ä»£ç å‘¢? è®©æˆ‘ä»¬ç”¨æ›´å¸¸è§„çš„æ–¹å¼å†™æµ‹è¯•ä»£ç ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">it</span>(<span class="string">&#x27;multiplies each number by 2&#x27;</span>, <span class="function"><span class="params">done</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> numbers$ = <span class="title function_">interval</span>(<span class="number">1000</span>).<span class="title function_">pipe</span>(</span><br><span class="line">      <span class="title function_">take</span>(<span class="number">3</span>),</span><br><span class="line">      <span class="title function_">map</span>(<span class="function"><span class="params">n</span> =&gt;</span> n + <span class="number">1</span>)</span><br><span class="line">  )</span><br><span class="line">  <span class="comment">// This emits: -1-2-3-|</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> numbersTwoTimes$ = <span class="title function_">numTwoTimes</span>(numbers$)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">results</span>: number[] = []</span><br><span class="line"></span><br><span class="line">  numbersTwoTimes$.<span class="title function_">subscribe</span>(</span><br><span class="line">      <span class="function"><span class="params">n</span> =&gt;</span> &#123;</span><br><span class="line">        results.<span class="title function_">push</span>(n)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">done</span>(err)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">expect</span>(results).<span class="title function_">toEqual</span>([ <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span> ])</span><br><span class="line">        <span class="title function_">done</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Yeah! ç°åœ¨çœ‹èµ·æ¥100å€å¥½äº†ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>Youâ€™re a hero if youâ€™ve read all the advice above. But. Well. If you recognized your train of thoughts, I have a piece of bad news for you. It was a joke.</p>
<p><img data-src="https://res.cloudinary.com/practicaldev/image/fetch/s--cuqyIqfO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.ibb.co/7zwMdyn/image.png" alt="it was a prank"></p>
<p>Please, never do what I said in that article. Never let your teammates cry and hate you. Always strive to be a decent and neat person. Save the world - use patterns and best practices!</p>
<p>I just decided to cheer you up and make your day a little bit better. Hopefully, you like it.</p>
<p>Stay tuned and let me know if you have any particular Angular topics you would like to hear about!</p>
<h1 id="è¯»åè¡¥å……"><a href="#è¯»åè¡¥å……" class="headerlink" title="è¯»åè¡¥å……"></a>è¯»åè¡¥å……</h1><p>çœ‹åˆ°ç¬¬ä¸€ä¸ªå°±æ»¡è„¸ç–‘æƒ‘ï¼Œç„¶åçœ‹åˆ°pipeé‚£é‡Œè§‰å¾—å¾ˆæœ‰é—®é¢˜ï¼Œç„¶åçœ‹åˆ°çº¯å‡½æ•°å°±è§‰å¾—å¾ˆä¸å¯¹,ç„¶åæˆ‘æŠŠæ–‡ç« æ‹‰åˆ°äº†æœ€å,XD æœç„¶æ˜¯prank</p>
<p>è¿™ä¸ªåŸä½œè€…æ˜¯ä¸ªå¤§ä½¬ï¼Œæ¯ä¸ªå†…å®¹åç€çœ‹å°±æ˜¯ä»£ç å¦‚ä½•ä¼˜åŒ–ï¼Œä¸¾ä¾‹çš„éƒ½æ˜¯ååˆ†å¸¸è§çš„åœºæ™¯ã€‚</p>
<p>ä¸‹é¢è¯´è¯´æ¯ä¸ªå¯¹åº”çš„åœºæ™¯ï¼Œå’Œä¸€äº›èƒ½æƒ³åˆ°çš„ä¾‹å­ã€‚</p>
<h2 id="é¡µé¢ä¸é¡µé¢å†…å¼‚æ­¥çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#é¡µé¢ä¸é¡µé¢å†…å¼‚æ­¥çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="é¡µé¢ä¸é¡µé¢å†…å¼‚æ­¥çš„ç”Ÿå‘½å‘¨æœŸ"></a>é¡µé¢ä¸é¡µé¢å†…å¼‚æ­¥çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>å¸¸è§çš„å°±æ˜¯ï¼Œé¡µé¢å†…æœ‰å¼‚æ­¥äº‹ä»¶ï¼Œå¦‚åå°è°ƒç”¨ç­‰ã€‚è¿™ç§æƒ…å†µå¦‚æœå›è°ƒä¼šè§¦å‘ä¸€äº›å…¨å±€çš„äº‹æƒ…ï¼Œä½†æ˜¯å¹¶ä¸ä¼šå› ä¸ºé¡µé¢é”€æ¯è€Œä¸­æ­¢ã€‚é€šè¿‡<code>takeUntil</code>å’Œç”Ÿå‘½å‘¨æœŸæŒ‚é’©ï¼Œå°±èƒ½ç®€å•çš„è§£å†³è¿™ç±»é—®é¢˜ã€‚æƒ³å¯¹äºè‡ªå·±å»åšé€»è¾‘æ˜¾ç„¶æ›´å°‘çš„é€»è¾‘éœ€è¦ç®¡ç†ï¼Œæ›´ä¸å®¹æ˜“å‡ºé”™ã€‚</p>
<p>å…¶äºŒæ˜¯é¡µé¢ä¸Šçš„ä¸€äº›æ— é™observableã€‚è¿™ç±»ä¸»è¦æ˜¯å†…å­˜æ³„æ¼ç›¸å…³çš„é—®é¢˜ã€‚</p>
<h2 id="å›è°ƒåœ°ç‹±"><a href="#å›è°ƒåœ°ç‹±" class="headerlink" title="å›è°ƒåœ°ç‹±"></a>å›è°ƒåœ°ç‹±</h2><p>åœ¨ promiseé‡Œæœ‰  <code>promise.then(å‡½æ•°).then(å‡½æ•°).then(å‡½æ•°)</code> çš„æ–¹å¼æŠŠåœ°ç‹±å˜ä¸ºé“¾å¼ã€‚</p>
<p>ä¸è¿‡å°±æˆ‘çœ‹æ¥ï¼Œæœ‰çš„äººä¾ç„¶ç”¨äº† promise.then, ä¾ç„¶åœ¨promise.then é‡Œé¢å»åœ°ç‹±å‡½æ•°ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚è‡ªé—­</p>
<h2 id="çº¯å‡½æ•°"><a href="#çº¯å‡½æ•°" class="headerlink" title="çº¯å‡½æ•°"></a>çº¯å‡½æ•°</h2><p>å…¶å®å’Œrxjså…³ç³»ä¸å¤§ï¼Œæ¯•ç«Ÿä¸è®ºä»»ä½•ä¸€ä¸ªæä¾›å…¨å±€çš„è¯­è¨€ï¼Œæ€»æœ‰æ»¥ç”¨å…¨å±€å˜é‡çš„ã€‚</p>
<p>æœ‰æ—¶è§‰å¾—vue angularé‡Œé¢ï¼Œå¾ˆå®¹æ˜“å› ä¸ºå†™é¡µé¢å†™ä¹ æƒ¯äº†ï¼Œæ¯•ç«Ÿæœ¬èº«é¡µé¢ä¹‹ç±»çš„å°±æ˜¯ç±»&#x2F;ç»“æ„ä½“ï¼Œå¾ˆå¤šä¼šç”¨thisç‚¹å»å–å€¼ã€‚</p>
<p>ç„¶åå»åšçº¯å‡½æ•°æ—¶å°±ä¼šçœ‹åˆ°â€œå…¨å±€å˜é‡â€ï¼Œä¹Ÿæ˜¯éš¾å—ï¼Œä¸è¿‡æœ‰æ¡†æ¶ï¼ŒåŸºæœ¬ä¸Šåœ¨windowä¸Šå®šä¹‰å˜é‡çš„äººå°‘äº†ã€‚</p>
<h2 id="Async-Pipe"><a href="#Async-Pipe" class="headerlink" title="Async Pipe"></a>Async Pipe</h2><p>è¿™ä¸ªæ˜¯angular æä¾›çš„ï¼Œåœ¨ä¸Šé¢ä¾‹å­åªæœ‰ä¸€ä¸ªå¯èƒ½è¿˜æ²¡å¤šå°‘æ„Ÿè§‰ï¼Œå½“å†…å®¹å¤šäº†ï¼Œæ¯ä¸ªå°¾éƒ¨éƒ½ä¼šå¤šå‡ºsubscribeã€‚è¿™å—ï¼Œåœ¨è¯´ä¸Šç¬¬ä¸€éƒ¨åˆ†è®²çš„å†…å­˜æ³„æ¼ï¼Œä¹Ÿæ˜¯å¯èƒ½å› ä¸ºæ²¡æœ‰å–æ¶ˆè®¢é˜…å‘ç”Ÿï¼Œè€Œæœ‰äº† async pipeï¼Œå³å°‘äº†ä»£ç ï¼Œåˆä¸ä¼šæ³„æ¼ï¼Ÿ</p>
<h2 id="å°è£…ä¸æš´éœ²"><a href="#å°è£…ä¸æš´éœ²" class="headerlink" title="å°è£…ä¸æš´éœ²"></a>å°è£…ä¸æš´éœ²</h2><p>åƒvueä¹‹ç±»çš„ï¼Œå…³äºè¿™ç§æ•°æ®ï¼Œæ›´å¤šçš„æ˜¯â€œåŒæ­¥å†™+å¼€å‘æ—¶æ ¡éªŒæé†’â€ï¼Œä½†è¿™ä¸€åˆ‡ï¼Œè¿˜æ˜¯ä¸å¤Ÿå¼ºåˆ¶ï¼Œæ¯•ç«Ÿä»ç„¶æœ‰ä¸å°‘çš„äººï¼Œç›´æ¥æ“ä½œæ”¹å˜æ•°æ®è€Œä¸éµå®ˆæµç¨‹ã€‚</p>
<p>æˆ‘ä¸€ç›´ç›¸ä¿¡ä¸€å¥è¯ï¼Œåªè¦æ²¡æœ‰ä»å·¥å…·ä¸Šé™åˆ¶æ­»ï¼Œæœ‰å¤šå°‘å†…å®¹ï¼Œäººå§‹ç»ˆä¼šè¶Šç•Œæ“ä½œã€‚</p>
<p>è¿™é‡Œæœ¬è´¨ä¸Šï¼Œå°è£…äº†å…·ä½“çš„Subjectï¼Œå‘å¤–æä¾›readonlyçš„ observableã€‚åˆ©ç”¨äº†typescriptçš„ä¿®é¥°ã€‚</p>
<h2 id="çˆ¶å‘å­ç»„ä»¶ä¼ é€’ä¸åº”ä½¿ç”¨-ob"><a href="#çˆ¶å‘å­ç»„ä»¶ä¼ é€’ä¸åº”ä½¿ç”¨-ob" class="headerlink" title="çˆ¶å‘å­ç»„ä»¶ä¼ é€’ä¸åº”ä½¿ç”¨ ob"></a>çˆ¶å‘å­ç»„ä»¶ä¼ é€’ä¸åº”ä½¿ç”¨ ob</h2><p>å¯¹äºä¸€ä¸ªç»„ä»¶çš„ä¼ é€’è¿‡ç¨‹æ˜¯ åŸå§‹æ•°æ®ç±»å‹çš„æ›´å¥½ï¼Ÿä¸æ˜¯ç‰¹åˆ«ç†è§£æ„Ÿå—è¿™ä¸€å—ã€‚</p>
<h2 id="æµ‹è¯•-observableså¤„ç†å‡½æ•°"><a href="#æµ‹è¯•-observableså¤„ç†å‡½æ•°" class="headerlink" title="æµ‹è¯• observableså¤„ç†å‡½æ•°"></a>æµ‹è¯• observableså¤„ç†å‡½æ•°</h2><p>åˆ©ç”¨å·²æœ‰çš„æµ‹è¯•å°è£…å·¥å…·ï¼ŒæŠŠæµ‹è¯•ä»£ç åšåˆ°æ˜“è¯»ï¼Œæ˜“ç»´æŠ¤</p>

    </div>

    
    
    
      


    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>ä½œè€…ï¼š </strong>Cro-Marmot
  </li>
  <li class="post-copyright-link">
      <strong>æ–‡ç« é€£çµï¼š</strong>
      <a href="https://cromarmot.github.io/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/" title="åˆ«éµå¾ªRxJSçš„æœ€ä½³å®è·µ">https://cromarmot.github.io/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæ¬Šè²æ˜ï¼š </strong>æœ¬ç¶²èªŒæ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥è²æ˜å¤–ï¼Œå‡æ¡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> è¨±å¯å”è­°ã€‚è½‰è¼‰è«‹è¨»æ˜å‡ºè™•ï¼
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/Blog/tags/Angular2/" rel="tag"><i class="fa fa-tag"></i> Angular2+</a>
              <a href="/Blog/tags/rxjs/" rel="tag"><i class="fa fa-tag"></i> rxjs</a>
              <a href="/Blog/tags/observable/" rel="tag"><i class="fa fa-tag"></i> observable</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Blog/19-09-23-redhat_gitlabserver_update/" rel="prev" title="redhat7 + gitlab-ceç‰ˆæœ¬æ›´æ–° 11.6->12.2">
                  <i class="fa fa-chevron-left"></i> redhat7 + gitlab-ceç‰ˆæœ¬æ›´æ–° 11.6->12.2
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Blog/19-09-30-nikki4calc/" rel="next" title="é—ªè€€æš–æš– è€—æè®¡ç®—å™¨ rxjs + angular2+">
                  é—ªè€€æš–æš– è€—æè®¡ç®—å™¨ rxjs + angular2+ <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cro-Marmot</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="ç¸½å­—æ•¸">650k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="æ‰€éœ€ç¸½é–±è®€æ™‚é–“">9:51</span>
  </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> å¼·åŠ›é©…å‹•
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/Blog/js/comments.js"></script><script src="/Blog/js/utils.js"></script><script src="/Blog/js/motion.js"></script><script src="/Blog/js/schemes/muse.js"></script><script src="/Blog/js/next-boot.js"></script><script src="/Blog/js/bookmark.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/Blog/js/third-party/search/local-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/Blog/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.2.0/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":false,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://cromarmot.github.io/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/"}</script>
  <script src="/Blog/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"cromarmot","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/Blog/js/third-party/comments/disqus.js"></script>

</body>
</html>
