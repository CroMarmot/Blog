<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/Blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/Blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/Blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/Blog/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="googlea0cb77247135ae4c.html">

<link rel="stylesheet" href="/Blog/css/main.css">


<link rel="stylesheet" href="/Blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"cromarmot.github.io","root":"/Blog/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Cro-Marmot&#39;s Blog">
<meta property="og:url" content="https://cromarmot.github.io/Blog/page/17/index.html">
<meta property="og:site_name" content="Cro-Marmot&#39;s Blog">
<meta property="og:locale" content="zh-TW">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cro-Marmot&#39;s Blog">

<link rel="canonical" href="https://cromarmot.github.io/Blog/page/17/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-TW'
  };
</script>

  <title>Cro-Marmot's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/Blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Cro-Marmot's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/Blog/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/Blog/20-07-13-rsa/#contact" rel="section"><i class="fa fa-user fa-fw"></i>關於</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/Blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/Blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/Blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


  <a href="https://codeforces.com/profile/Cro-Marmot" class="codeforces-corner" title="Star me on Codeforces" aria-label="Star me on Codeforces" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L250,250 L250,0 Z"></path>
  <path d="M125,10 125,125 240,125" fill="currentColor" style="transform-origin: 125px 125px;" class="octo-arm"></path>
  <path d="M125,10 240,10 240,125 Z" fill="currentColor" class="octo-body"></path></svg></a>



    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-09-26-why-use-crawler/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
      <meta itemprop="name" content="Cro-Marmot">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Blog/17-09-26-why-use-crawler/" class="post-title-link" itemprop="url">why use crawler</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2017-09-26 01:00:59" itemprop="dateCreated datePublished" datetime="2017-09-26T01:00:59+08:00">2017-09-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2022-03-13 19:13:19" itemprop="dateModified" datetime="2022-03-13T19:13:19+08:00">2022-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-09-26-why-use-crawler/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-09-26-why-use-crawler/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>I found that I was no longer willing to write the crawler program, more often use jquery output page link, and then wget to download, this will be faster.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-09-20-Docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
      <meta itemprop="name" content="Cro-Marmot">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Blog/17-09-20-Docker/" class="post-title-link" itemprop="url">docker</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2017-09-20 01:01:01" itemprop="dateCreated datePublished" datetime="2017-09-20T01:01:01+08:00">2017-09-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2022-03-13 19:13:19" itemprop="dateModified" datetime="2022-03-13T19:13:19+08:00">2022-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/code/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-09-20-Docker/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-09-20-Docker/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>关于docker的介绍以及初级使用 在各个网上都能搜到了</p>
<p>记录一下个人的使用了两天后的感受</p>
<ol start="0">
<li><p>首先可以去看看知乎的评价 以及知乎上说的关于docker的使用场景</p>
</li>
<li><p>目前还是没有感觉出和server 虚拟机的差别， 很明显的就是 它能直接通过内部命令去搜和下载以及安装运行，而虚拟机需要去找找找</p>
</li>
<li><p>因为本身我的host也是linux而且还是基于ubuntu的mint，所以我看到很多应用 感觉都直接可以安装，从这一点上说对个人用户没有看出特别的优点</p>
</li>
<li><p>目前所想到的优点，以及搜索到的一些repo：如果本身使用的不是debian系列的linux 甚至是windows，那么有一个docker能快速部署和支持想想也是很棒的，当然现在windows 也推出了ubuntu on windows</p>
</li>
<li><p>个人每次换新电脑的时候 还是要配本地环境，感觉优势不明显，但比如一些常用的需要配置的仓库，别人已经搭好了就能直接pull</p>
</li>
<li><p>还没学会如何精简的使用docker+github 来作为个人性质的使用<code>_(:з」∠)_</code>或者这种姿势本身就是不正确的？</p>
</li>
<li><p>以及 它和虚拟机相比 可以说把 整个系统当做一个仓库来管理，因此 可以更快”建立”虚拟机 用来运行一些需要隔离的程序</p>
</li>
</ol>
<h1 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h1><p><img src="https://docs.docker.com/engine/images/architecture.svg" alt="architecture"></p>
<p><img src="https://docs.docker.com/engine/images/engine-components-flow.png" alt="components"></p>
<p><img src="../images/dockercommand.jpg" alt="docker command"></p>
<p><img src="../images/dockerstate.png" alt="docker state"></p>
<p><a href="https://docs.docker.com/engine/faq/" target="_blank" rel="noopener">https://docs.docker.com/engine/faq/</a></p>
<h1 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h1><p>docker pull</p>
<p>docker build</p>
<p>docker push</p>
<p>docker run</p>
<h2 id="run"><a href="#run" class="headerlink" title="run"></a>run</h2><p><code>--rm</code> 运行后删除自己，可以把数据类映射到宿主机上，运行的container只是当作个程序</p>
<p><code>--env</code> 运行环境参数</p>
<p>但凡会输入<code>--help</code>命令就能看到<code>-d</code>是 <code>-d, --detach                         Run container in background and print container ID</code> 还有一堆人非要说是daemon</p>
<p><code>--link &lt;container name or id&gt;:&lt;alias name&gt;</code> # <a href="https://www.jianshu.com/p/21d66ca6115e" target="_blank" rel="noopener">https://www.jianshu.com/p/21d66ca6115e</a></p>
<h1 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h1><p>方案1 sudo启动</p>
<p>方案2 创建docker用户组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd docker     #添加docker用户组</span><br><span class="line">sudo gpasswd -a $USER docker     #将登陆用户加入到docker用户组中</span><br><span class="line">newgrp docker     #更新用户组</span><br><span class="line">docker ps    #测试docker命令是否可以使用sudo正常使用</span><br></pre></td></tr></table></figure>
<h1 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run --name 容器名 -i -t -p 主机端口:容器端口 -d -v 主机目录:容器目录:ro 镜像TD或镜像名:TAG</span><br><span class="line"></span><br><span class="line"># --name 指定容器名，可自定义，不指定自动命名</span><br><span class="line"># -i 以交互模式运行容器</span><br><span class="line"># -t 分配一个伪终端，即命令行，通常组合来使用</span><br><span class="line"># -p 指定映射端口，将主机端口映射到容器内的端口</span><br><span class="line"># -d 后台运行容器</span><br><span class="line"># -v 指定挂载主机目录到容器目录，默认为rw读写模式，ro表示只读</span><br></pre></td></tr></table></figure>
<p>映射：冒号左侧<code>宿主</code>或<code>docker提供</code>，右侧docker内部</p>
<h1 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h1><h1 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h1><p>docker hub 仓库，拉取到本地images</p>
<p>images 生成可运行的container</p>
<p>container 执行具体任务</p>
<p><code>docker image inspect &lt;image name&gt;</code> 看配置</p>
<h1 id="多个docker-之间配置-一次使用"><a href="#多个docker-之间配置-一次使用" class="headerlink" title="多个docker 之间配置 一次使用"></a>多个docker 之间配置 一次使用</h1><p><code>docker-compose.yml</code>文件 + 相关配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动所有服务</span></span><br><span class="line">docker-compose up</span><br><span class="line"><span class="comment"># 关闭所有服务</span></span><br><span class="line">docker-compose stop</span><br><span class="line"><span class="comment"># 删除所有</span></span><br><span class="line">docker-compose rm</span><br></pre></td></tr></table></figure>
<h1 id="Dockerfile-创建image-Demo"><a href="#Dockerfile-创建image-Demo" class="headerlink" title="Dockerfile 创建image Demo"></a>Dockerfile 创建image Demo</h1><p><code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> os = <span class="built_in">require</span>(<span class="string">"os"</span>);</span><br><span class="line"><span class="keyword">var</span> hostname = os.hostname();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"hello from "</span> + hostname);</span><br></pre></td></tr></table></figure>
<p><code>Dockerfile</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM alpine</span><br><span class="line">RUN apk update &amp;&amp; apk add nodejs</span><br><span class="line">COPY . /app</span><br><span class="line">WORKDIR /app</span><br><span class="line">EXPOSE 3000</span><br><span class="line">CMD [&quot;node&quot;,&quot;index.js&quot;]</span><br></pre></td></tr></table></figure>
<p><code>docker image build -t hello:v0.1 .</code></p>
<p>相关命令</p>
<ul>
<li>基础镜像（父镜像）信息指令 FROM。</li>
<li>维护者信息指令 MAINTAINER。</li>
<li>镜像操作指令 RUN 、EVN 、ADD、 WORKDIR、EXPOSE 等。<br>COPY 从宿主到内部</li>
<li>容器启动指令 CMD 、ENTRYPOINT 和 USER 等。<br>CMD 内部执行的命令 推荐上面数组格式<br>ENTRYPOINT 可以让你的容器表现得像一个可执行程序一样。</li>
</ul>
<h1 id="使用多个container-swarm-mode"><a href="#使用多个container-swarm-mode" class="headerlink" title="使用多个container (swarm mode)"></a>使用多个container (swarm mode)</h1><p><code>Docker Compose and Docker Swarm Mode</code></p>
<p>Compose用于控制单个系统上的多个容器。 就像我们用来构建映像的Dockerfile一样，有一个文本文件描述了应用程序：要使用的映像，多少实例，网络连接等。但是Compose仅在单个系统上运行，因此虽然有用 ，我们将跳过Compose1并直接进入Docker Swarm Mode。</p>
<p>Swarm Mode 告诉Docker您将运行许多Docker引擎，并且您希望协调所有引擎。 Swarm模式结合了以下功能：不仅可以定义应用程序体系结构（例如Compose），而且可以定义和维护高可用性级别，扩展，负载平衡等。 通过所有这些功能，Swarm模式在生产环境中的使用频率要比其简单的表亲Compose更高。</p>
<p><a href="https://training.play-with-docker.com/ops-s1-swarm-intro/" target="_blank" rel="noopener">https://training.play-with-docker.com/ops-s1-swarm-intro/</a></p>
<h1 id="常用-1"><a href="#常用-1" class="headerlink" title="常用"></a>常用</h1><p>这些并不会随着container消失而清理，可能需要手动rm,</p>
<p><code>docker network ls</code> 管理网络配置</p>
<p><code>docker volume ls</code> 储存</p>
<h1 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h1><p>对于宿主机器的权限<code>https://training.play-with-docker.com/security-seccomp</code></p>
<h1 id="常用-cheat-sheet"><a href="#常用-cheat-sheet" class="headerlink" title="常用 cheat sheet"></a>常用 cheat sheet</h1><table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>比较container和images本身的区别</td>
<td><code>docker container diff &lt;container_id&gt;</code></td>
</tr>
<tr>
<td>基于container创建image</td>
<td><code>docker container commit &lt;container_id&gt;</code></td>
</tr>
<tr>
<td>命名image的repo</td>
<td><code>docker image tag &lt;image_id&gt; &lt;image_repository&gt;</code></td>
</tr>
<tr>
<td>基于dockerfile创建image</td>
<td><code>docker image build -t &lt;image_repository&gt; .</code></td>
</tr>
<tr>
<td>导出容器</td>
<td><code>docker export &lt;container_id&gt; &gt; xxx.tar</code></td>
</tr>
<tr>
<td>导入容器</td>
<td><code>cat xxx.tar &lt;管道符号&gt; docker import - &lt;repository&gt;:&lt;tag&gt;</code></td>
</tr>
<tr>
<td>标准输出日志查看</td>
<td><code>docker logs -f &lt;container_id&gt;</code> / <code>docker container logs &lt;container_id&gt;</code></td>
</tr>
<tr>
<td>进入正在运行的容器(不建议经常操作，如果经常改，应该映射出来)</td>
<td><code>docker container exec -it &lt;container_id&gt; /bin/bash</code></td>
</tr>
</tbody>
</table>
<h1 id="发布到远端"><a href="#发布到远端" class="headerlink" title="发布到远端"></a>发布到远端</h1><p>登录</p>
<p><code>docker login</code></p>
<p>产生image</p>
<p><code>docker image build -t [username]/[repository]:[tag] .</code> </p>
<p>推送</p>
<p><code>docker image push [username]/[repository]:[tag]</code></p>
<h1 id="磁盘体积过大"><a href="#磁盘体积过大" class="headerlink" title="磁盘体积过大"></a>磁盘体积过大</h1><p>比如我的一个128ssd+1t普通的电脑，分区大概是<code>/</code>,<code>/home</code>,<code>/data</code>, 然后这个玩意占了8g多<code>/</code>，忍不了</p>
<p>很多办法 <a href="https://github.com/moby/moby/issues/3127" target="_blank" rel="noopener">https://github.com/moby/moby/issues/3127</a> , 官网是建议</p>
<p><code>/etc/docker/daemon.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data-root"</span>: <span class="string">"/data/docker"</span>,</span><br><span class="line">    <span class="attr">"storage-driver"</span>: <span class="string">"overlay2"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>记得先停再操作</p>
<h1 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h1><p><a href="https://training.play-with-docker.com/" target="_blank" rel="noopener">training play with docker</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-07-22-Unikernels_Library_Operating_Systems_for_the_Cloud/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
      <meta itemprop="name" content="Cro-Marmot">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Blog/17-07-22-Unikernels_Library_Operating_Systems_for_the_Cloud/" class="post-title-link" itemprop="url">Unikernels</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2017-07-22 01:01:01" itemprop="dateCreated datePublished" datetime="2017-07-22T01:01:01+08:00">2017-07-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2022-03-13 19:13:19" itemprop="dateModified" datetime="2022-03-13T19:13:19+08:00">2022-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-07-22-Unikernels_Library_Operating_Systems_for_the_Cloud/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-07-22-Unikernels_Library_Operating_Systems_for_the_Cloud/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Unikernels"><a href="#Unikernels" class="headerlink" title="Unikernels"></a>Unikernels</h1><p>相关连接</p>
<p><a href="http://blog.csdn.net/sunshine_dawn/article/details/54728751" target="_blank" rel="noopener">1</a></p>
<p><a href="http://blog.csdn.net/sunshine_dawn/article/details/74940296" target="_blank" rel="noopener">2</a></p>
<p><a href="http://tonybai.com/2016/05/16/understanding-unikernels/" target="_blank" rel="noopener">3</a></p>
<p><a href="https://www.zhihu.com/question/38158590" target="_blank" rel="noopener">4</a></p>
<p>虚拟化是不需要对用户程序更改提供的下层虚拟服务</p>
<p>这个实现在云端把它作为单目标程序的VM image</p>
<p>贡献：</p>
<p>1.提供单应用密封的程序 很适合云服务</p>
<p>2.评估了OCaml一种函数式语言 展示了类型安全 的好处 不会造成灾难性</p>
<p>3.lib和language扩展支持在OCaml上编码</p>
<p>基于hypervisor开发 而非硬件</p>
<p>§3 用Mirage的实现来描述一个unikernel的原型</p>
<p>牺牲向后兼容 显著 提高安全和性能</p>
<p>specialised, sealed, singlepurpose libOS VMs that run directly on the hypervisor</p>
<p>配置部署内置到编译过程中…???…</p>
<p>做了一些云端程序大小的优化</p>
<p>安全firstly by compile-time specialisation, then by pervasive type-safety in the running code + 基于hypervisor和ssl ssh等</p>
<p>在编译时尽可能的估计不需要的feature，从而减少image大小</p>
<p>多语言的支持 向后兼容 vs 效率 ,类型</p>
<p>单语言(类型 安全) 再用非OCaml的通过消息传递 来交流</p>
<p>single-address space 内存需要一次申请完 从而在隔离上基于hypervisor实现密封</p>
<p>运行时随机地址 保护</p>
<p>提供Xen VM 镜像 和linux 二进制可执行mirage</p>
<p>总之 我们用OCaml 我们觉得它吊</p>
<p>PVBoot  提供两个页申请slab &amp; extent slab 用于支持c(用的不多 因为大多数代码是OCaml写的),extent是主要的 申请分配 虚拟地址 垃圾回收等，PVBoot还提供最基本的异步 事件驱动等</p>
<p>3.3 运行时语言 内存分为两个大堆(长期)和小堆(临时) ,通过对heap的分化 让垃圾回收管理所需要检测的部分变小，以及实现0拷贝I/O，基于PVBoot的domainpoll函数实现的并行，只有最外的线程main的loop需要C的外部事件其它都是OCaml的，用evaluator去唤醒轻量的线程，没有内部抢占和异步中断，试用本地key可以对一个thread进行定位从而操作。</p>
<p>3.4 设备驱动 基于hypervisor(Xen)的驱动 信号槽 事件通道 来支持USB PCI等，通过内联少量汇编和C结构 实现基本由纯OCaml实现。 I/O 零拷贝（grant table）自动垃圾回收(但仍然不能完全防止数据泄漏)  </p>
<p>3.5 Type-safe I/O  network(内部vchan+外部不同的lib对应不同的protocol 按照cstrcut分割) 网络DNS啊什么的更快(原理是给上层更多的底层控制?减少中间内耗？)</p>
<p>4 Evaluation</p>
<p>boot time(vs linux-pv 网络响应)Unikernels are compact enough to boot and respond to network traffic in real-time.</p>
<p>threading 因为少用户/内核切换唤醒时间 垃圾回收 感觉主要靠超页？ Garbage collected heap management is more efficient in a single address-space environment. Thread latency can be reduced by eliminating multiple levels of scheduling.</p>
<p>Networking and Storage (direct I/O 更高的throughput <a href="http://blog.csdn.net/guo_guo_guo/article/details/1647615" target="_blank" rel="noopener">relative</a>) 低内存拷贝 高cpu使用 和linux direct I/O比基本差不多 感觉那个表的意思是Mirage to Linux 的throughput更小??</p>
<p>实现了一些功能程序 =。= 然后比性能大小，还说For example, in the last 10 years the Internet Systems Consortium has reported 40 vulnerabilities in the Bind software.7 Of these, 25% were due to memory management errors, 15% to poor handling of exceptional data states, and 10% to faulty packet parsing code, all of which would be mitigated by Mirage’s type-safety.</p>
<p>活跃代码数=。= 感觉整个贡献也就很棒</p>
<p>总结也就和最开始的贡献总结一样</p>
<p>type-safe????</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-08-06-Singularity_Rethinking_the_softeware_stack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
      <meta itemprop="name" content="Cro-Marmot">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Blog/17-08-06-Singularity_Rethinking_the_softeware_stack/" class="post-title-link" itemprop="url">Singularity:Rethinking the Software Stack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2017-07-22 01:01:01" itemprop="dateCreated datePublished" datetime="2017-07-22T01:01:01+08:00">2017-07-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2022-03-13 19:13:19" itemprop="dateModified" datetime="2022-03-13T19:13:19+08:00">2022-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-08-06-Singularity_Rethinking_the_softeware_stack/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-08-06-Singularity_Rethinking_the_softeware_stack/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Singularity-Rethinking-the-Software-Stack"><a href="#Singularity-Rethinking-the-Software-Stack" class="headerlink" title="Singularity: Rethinking the Software Stack"></a>Singularity: Rethinking the Software Stack</h1><ol>
<li>software-isolated processes for protection of programs and system services</li>
<li>contract-based channels for communication</li>
<li>manifest-based programs for verification of system properties</li>
</ol>
<p>现有的系统在一些结构上还是采取老的方法,这个Singularity项目就是要复审现有的软件的常见问题 widespread security vulnerabilities; unexpected interactions among applications; failures caused by errant extensions, plug-ins, and drivers, and a perceived lack of robustness.</p>
<h2 id="1-new-os-new-program-language-Sing-extension-of-C-and-new-software-verification-tools，安全的编程语言能避免许多安全问题，verification-tool也能提前检测出一些，增强的系统架构，作者也说这个Singularity在它们看来是个过程和意见-不是最终的一个完善的系统。"><a href="#1-new-os-new-program-language-Sing-extension-of-C-and-new-software-verification-tools，安全的编程语言能避免许多安全问题，verification-tool也能提前检测出一些，增强的系统架构，作者也说这个Singularity在它们看来是个过程和意见-不是最终的一个完善的系统。" class="headerlink" title="1 new os ,new program language(Sing#(extension of C#)) and new software verification tools，安全的编程语言能避免许多安全问题，verification tool也能提前检测出一些，增强的系统架构，作者也说这个Singularity在它们看来是个过程和意见 不是最终的一个完善的系统。"></a>1 new os ,new program language(Sing#(extension of C#)) and new software verification tools，安全的编程语言能避免许多安全问题，verification tool也能提前检测出一些，增强的系统架构，作者也说这个Singularity在它们看来是个过程和意见 不是最终的一个完善的系统。</h2><h2 id="2-提供简易但能根据简易的实现更丰富的实现"><a href="#2-提供简易但能根据简易的实现更丰富的实现" class="headerlink" title="2 提供简易但能根据简易的实现更丰富的实现"></a>2 提供简易但能根据简易的实现更丰富的实现</h2><h3 id="2-1-Software-Isolated-Processes"><a href="#2-1-Software-Isolated-Processes" class="headerlink" title="2.1 Software-Isolated Processes"></a>2.1 Software-Isolated Processes</h3><p>利用现代编程语言的类型和内存安全来说动态减少用于隔离的代码,两个程序间不能直接的内存操作，要么信号传递要么用特殊的交换heap，这样设计的sip是自动运行的，每一个sip有它自己的数据框架，运行时系统，垃圾回收，不能运行时加代码，新建sip和host的sip是隔离开的，易于去分析，最近也有paper对这种sealed processes的好处和trade-off进行分析.基于语言类型和内存安全用软件静态+运行时分析？？？这么吊？不需要硬件？通过这样多个程序甚至可以使用同一个大的虚拟地址，因为每个都不会超过它自己的SIP的范围，Aiken比较了硬件和软件用来孤立的trade-off，SIP减少page table切换 TLB，这个实验的关键就是建立一个用SIP的系统并论证它更加可靠..</p>
<h3 id="2-2-Contract-Based-Channels"><a href="#2-2-Contract-Based-Channels" class="headerlink" title="2.2 Contract-Based Channels"></a>2.2 Contract-Based Channels</h3><p>通过合约channel (In the Sing# language, the endpoints are distinguished by types C.Imp and C.Exp , respectively,), 这里给的是状态来表示 以及状态转移所要进行的操作的伪代码 总之细节也记不很清，如果以后要做相关的可以来参考，这里这样是表达了所有的操作按照一个Contrat，这样是高效并且在SIP之间的交流是可以分析的，之后结合上线性类型Singularity也支持了SIP之间进行大数据的零拷贝的channel,作者说验证器开发了很久，因为它无法预测输入的数据不足的情况，并且这个bug也存在了很久，(最后的解决办法是在可能触发的几秒钟内再进行判断？？？) 总之通过channel 提供了分离 易于静态分析 减少一定的动态检测  并且动态也能去检测故障</p>
<h3 id="2-3-Manifest-Based-Programs"><a href="#2-3-Manifest-Based-Programs" class="headerlink" title="2.3 Manifest-Based Programs"></a>2.3 Manifest-Based Programs</h3><p>用户需要执行的时候不是给一个exe一样的而是给系统一个manifest，它包含source程序的位置以及要依赖的程序的信息(感觉就和Android中的权限需要 先在manifest的样子很像)，通过manifest的提供 可以静态动态的分析 依赖，以及检测是否可以支持,总之MBP很强 是MSIL的一个扩展=。= 有助于 各种检查</p>
<h2 id="3-SINGULARITY-KERNEL"><a href="#3-SINGULARITY-KERNEL" class="headerlink" title="3. SINGULARITY KERNEL"></a>3. SINGULARITY KERNEL</h2><p>提供最基本的 software-isolated processes, contract-based channels, and manifest-based programs的抽象,To each SIP, the kernel provides a pure execution environment with threads, memory, and access to other MBPs via channels. 主要90% 使用Sing# 类型安全的语言写的 有垃圾回收机制，最主要的unsafe的代码是是实现垃圾回收的=。= 并不懂它这种48%的计量方式是什么 以及这么具体干嘛=。=<code>_(:з」∠)_</code> 这也就不继续说语言组成的细节 具体看paper，总的说它是microkernel 所有的protocol 文件系统都是在核外,</p>
<h2 id="3-1-ABI"><a href="#3-1-ABI" class="headerlink" title="3.1 ABI"></a>3.1 ABI</h2><p>Application Binary Interface (ABI) 确保最小 安全的 孤立的 每一个SIP的计算环境,ABI通过 终端的channel进行信息交流,ABI 将 accessing primitive和process-local operations 区分开，这种区分在进过通道时作为一个参数，静态分析可以利用这个信息进行分析，……比如静态分析可以知道没有使用网络channel的就没有能力发送DDOS攻击……</p>
<p>不是很懂这一段 怎么设计的功能有192个 又很多 又不包括一些类似win和linux的复杂的,ABI保证任何SIP不能通过ABI函数‘直接’改变另一个SIP的状态，保证了每一个SIP自己的控制权，这样让每个SIP依赖与软件层面的孤立而不是硬件的保护,然后它们的消耗比普通的函数调用消耗更大</p>
<p>3.1.1 Privileged Code 由于类型安全和内存安全，SIP提供了权限指令更加宽松的 执行范围，SIP并利用这种safe in-line技术 来优化channel 交流</p>
<p>3.1.2 Handle Table 通过强类型控制表保证SIP的跨ABI的操作例如 mutexes和threads不会被篡改，</p>
<h3 id="3-2-Memory-Management"><a href="#3-2-Memory-Management" class="headerlink" title="3.2 Memory Management"></a>3.2 Memory Management</h3><p>又是说以往的内存的虚拟内存每个SIP一个管理,就算是分享 也是 指向自己的虚拟地址，不会指向其它SIP的虚拟地址，因此易于垃圾回收。</p>
<p>3.2.1 Exchange Heap 每一个SIP之间交换的数据需要放在交换heap中(Figure 3),交换heap中的指针只会指向交换heap中，在运行时同一个heap在一个时间最多被一个SIP拥有，静态分析能确保SIP不会访问一个dangling pointer.为了能静态分析….在执行时一个SIP最多有一个指向block的指针，Singularity保证一个SIP在发送一个block数据后不再拥有修改它的能力</p>
<h3 id="3-3-Threads"><a href="#3-3-Threads" class="headerlink" title="3.3 Threads"></a>3.3 Threads</h3><p>所有tread是内核tread ，也就是内核可调度的,性能差不多 因为不需要内核权限和protected mode</p>
<p>3.3.1 Linked Stacks</p>
<p>3.3.2 Scheduler 用一个 unblocked list 和一个preempted list来,和普通发信息一样它也是发送信息，block等待返回，Singularity允许 一个SIP中的线程切换到另一个SIP上的线程，需要394个周期</p>
<p>3.4 Garbage Collection</p>
<p>大多safe language 中都有垃圾回收，Singularity的每个SIP有它自己的垃圾回收功能，又pointer不会跨SIP等前面的限定让系统能够很好的垃圾回收。现在运行时的垃圾回收有五种 generational semi-space, generational sliding compacting, an adaptive combination of the previous two collectors, mark-sweep, and concurrent mark-sweep.现在系统用的是concurrent mark-sweep collector</p>
<p>3.5 Channel Implementation</p>
<p>0allocated ,用Sing#实现，状态转换的每个周期至少一次发送和一次读取，这样保证了不会有终端无限发送而不等待，看上去这个规则过于严格，但实践没发现有放宽的需要,预申请终端的queues并把指针指向exchange heap 很自然的能够实现0拷贝的多SIP子系统</p>
<h3 id="3-6-Principals-and-Access-Control"><a href="#3-6-Principals-and-Access-Control" class="headerlink" title="3.6 Principals and Access Control"></a>3.6 Principals and Access Control</h3><h1 id="4-DESIGN-SPACE-EXPLORATION"><a href="#4-DESIGN-SPACE-EXPLORATION" class="headerlink" title="4. DESIGN SPACE EXPLORATION"></a>4. DESIGN SPACE EXPLORATION</h1><p> Singularity’s principled architecture, amenability to sound static analysis, and relatively small code base make it an excellent vehicle for exploring new options. In the following subsections, we describe four explorations in Singularity:</p>
<ul>
<li>compile-time reflection for generative programming, </li>
<li>support for hardware protection domains to augment SIPs, </li>
<li>hardware-agnostic heterogeneous multiprocessing, </li>
<li>typed assembly language.</li>
</ul>
<h2 id="4-1-Compile-Time-Reflection"><a href="#4-1-Compile-Time-Reflection" class="headerlink" title="4.1 Compile-Time Reflection"></a>4.1 Compile-Time Reflection</h2><p>The Java 有运行时的反射,We have developed a new compile-time reflection (CTR) facility . Compile-time reflection (CTR) is a partial substitute for the CLR’s (common language runtime) full reflection capability. The core feature of CTR is a high-level construct in Sing#, called a transform, which allows programmers to write inspection and generation code in a pattern matching and template style. The generated code and metadata can be statically verified to ensure it is well-formed, type-safe, and not violate system safety properties. At the same time, a programmer can avoid the complexities of reflection APIs.</p>
<h2 id="4-2-Hardware-Protection-Domains"><a href="#4-2-Hardware-Protection-Domains" class="headerlink" title="4.2 Hardware Protection Domains"></a>4.2 Hardware Protection Domains</h2><p>大多的os用cpu的mmu 硬件来孤立进程通过两种机制 ——1.进程只能访问具体的一些物理地址，2.使用privilege levels保护 执行权限指令的不可信代码.</p>
<p>主要讲的还是 权限的分配</p>
<h2 id="4-3-Heterogeneous-Multiprocessing"><a href="#4-3-Heterogeneous-Multiprocessing" class="headerlink" title="4.3 Heterogeneous Multiprocessing"></a>4.3 Heterogeneous Multiprocessing</h2><h1 id="5-CONCLUSIONS"><a href="#5-CONCLUSIONS" class="headerlink" title="5. CONCLUSIONS"></a>5. CONCLUSIONS</h1><ul>
<li>how to make more dependable software systems</li>
<li>software isolated processes (SIPs), </li>
<li>contract-based channels, and </li>
<li>manifest-based programs (MBPs).</li>
</ul>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>读后感 首先其的设计方法 还是让我有新的获取，</p>
<p>依然是对type-safe 的语言 一脸懵逼 问了问ssj，他说开学给我说<code>_(:з」∠)_</code>向大佬低头</p>
<p>然后就是一点感悟，不知道其它学科 往研究方向是怎么走的，至少目前看到 系统相关的 很多东西都不是”站在巨人的肩上“ 更多的像是”听了巨人说的话“，毕竟它和实际的联系会有更紧密一些，向文中的很多驱动啊什么之类的都是巨大的工作量，当对底层有修改想法的时候，还需要去考虑对上层的支持，因此这样一个就算十分优秀的想法，想要实现，想要验证，甚至想要应用都需要大量的时间和物力去支持。</p>
<p>我不知道未来会怎样，不知道如果我去研究会做出多少贡献，又能有多少支持。如果梦想养不活你，就挣钱养活梦想吧。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-07-08-Computer-Graphics-with-OpenGL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
      <meta itemprop="name" content="Cro-Marmot">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Blog/17-07-08-Computer-Graphics-with-OpenGL/" class="post-title-link" itemprop="url">计算机图形学个人整理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2017-07-08 01:01:01" itemprop="dateCreated datePublished" datetime="2017-07-08T01:01:01+08:00">2017-07-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2022-03-13 19:13:19" itemprop="dateModified" datetime="2022-03-13T19:13:19+08:00">2022-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/notes/book/" itemprop="url" rel="index"><span itemprop="name">book</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-07-08-Computer-Graphics-with-OpenGL/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-07-08-Computer-Graphics-with-OpenGL/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>opengl自己的全以gl开头</p>
<p>识别图元，识别凹多边形，通过计算相邻边的叉积 来找到大于180°的角，再以此将凹多边形分割为多个凸多边形。</p>
<p>将凸多边形分割为多个三角形</p>
<p>内/外的判定，奇偶规则 或 非零环绕规则</p>
<p>多边形表 顶点表(x,y,z描述) 边表(用顶点描述) 面片表(用边描述)</p>
<p>× 平面方程与平面方程的求解 Ax+By+Cz+D=0, <0 在面的后面>0在面的前面</0></p>
<p>绘制六边形<code>GL_POLYGON/GL_TRIANGLES/GL_TRIANGLES_STRIP/GL_TRIANGLES_FAN</code>的不同效果</p>
<p>四边形 <code>GL_QUAD/GL_QUAD_STRIP</code></p>
<p>顶点数组 GLint points [NUM][3] ={ {0,0,0},{0,1,0}…}</p>
<p>glBitmap 位图函数</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/Blog/page/16/"><i class="fa fa-angle-left" aria-label="上一頁"></i></a><a class="page-number" href="/Blog/">1</a><a class="page-number" href="/Blog/page/2/">2</a><a class="page-number" href="/Blog/page/10/">10</a><a class="page-number" href="/Blog/page/14/">14</a><a class="page-number" href="/Blog/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/Blog/page/18/">18</a><a class="page-number" href="/Blog/page/20/">20</a><a class="page-number" href="/Blog/page/23/">23</a><a class="extend next" rel="next" href="/Blog/page/18/"><i class="fa fa-angle-right" aria-label="下一頁"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Cro-Marmot</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/Blog/archives/">
        
          <span class="site-state-item-count">112</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/Blog/categories/">
          
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/Blog/tags/">
          
        <span class="site-state-item-count">126</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/CroMarmot" title="GitHub → https://github.com/CroMarmot" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yexiaorain@gmail.com" title="E-Mail → mailto:yexiaorain@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://codeforces.com/profile/Cro-Marmot" title="Codeforces → https://codeforces.com/profile/Cro-Marmot" rel="noopener" target="_blank"><i class="bug fa-fw"></i>Codeforces</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://atcoder.jp/users/cromarmot" title="AtCoder → https://atcoder.jp/users/cromarmot" rel="noopener" target="_blank"><i class="bug fa-fw"></i>AtCoder</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cro-Marmot</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 強力驅動
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/Blog/lib/anime.min.js"></script>
  <script src="/Blog/lib/velocity/velocity.min.js"></script>
  <script src="/Blog/lib/velocity/velocity.ui.min.js"></script>
<script src="/Blog/js/utils.js"></script><script src="/Blog/js/motion.js"></script>
<script src="/Blog/js/schemes/muse.js"></script>
<script src="/Blog/js/next-boot.js"></script>



  




  <script src="/Blog/js/local-search.js"></script>












  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://cromarmot.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
