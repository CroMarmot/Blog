<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/Blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/Blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/Blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/Blog/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="googlea0cb77247135ae4c.html">

<link rel="stylesheet" href="/Blog/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha256-xejo6yLi6vGtAjcMIsY8BHdKsLg7QynVlFMzdQgUuy8=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cromarmot.github.io","root":"/Blog/","images":"/Blog/images","scheme":"Muse","darkmode":false,"version":"8.12.3","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœå°‹...","empty":"æˆ‘å€‘ç„¡æ³•æ‰¾åˆ°ä»»ä½•æœ‰é—œ ${query} çš„æœç´¢çµæœ","hits_time":"${hits} æ‰¾åˆ° ${time} å€‹çµæœ","hits":"æ‰¾åˆ° ${hits} å€‹çµæœ"},"path":"/Blog/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/Blog/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Cro-Marmot&#39;s Blog">
<meta property="og:url" content="https://cromarmot.github.io/Blog/page/7/index.html">
<meta property="og:site_name" content="Cro-Marmot&#39;s Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Cro-Marmot">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://cromarmot.github.io/Blog/page/7/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-TW","comments":"","permalink":"","path":"page/7/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Cro-Marmot's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/Blog/css/noscript.css">
  </noscript>
<link rel="alternate" href="/Blog/atom.xml" title="Cro-Marmot's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ›å°èˆªæ¬„" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/Blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Cro-Marmot's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/Blog/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é </a></li><li class="menu-item menu-item-archives"><a href="/Blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>æ­¸æª”<span class="badge">123</span></a></li><li class="menu-item menu-item-yearmonth"><a href="/Blog/yearmonth/" rel="section"><i class="fa fa-calendar-days fa-fw"></i>å¹´æœˆ</a></li><li class="menu-item menu-item-categories"><a href="/Blog/categories/" rel="section"><i class="fa fa-shapes fa-fw"></i>åˆ†é¡<span class="badge">32</span></a></li><li class="menu-item menu-item-tags"><a href="/Blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ¨™ç±¤<span class="badge">143</span></a></li><li class="menu-item menu-item-rss"><a href="/Blog/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>rss</a></li><li class="menu-item menu-item-about"><a href="/Blog/20-07-13-rsa/#contact" rel="section"><i class="fa fa-user fa-fw"></i>é—œæ–¼</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœå°‹
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœå°‹..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®éŒ„
        </li>
        <li class="sidebar-nav-overview">
          æœ¬ç«™æ¦‚è¦
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Cro-Marmot"
      src="https://avatars.githubusercontent.com/u/24691835?v=4">
  <p class="site-author-name" itemprop="name">Cro-Marmot</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/Blog/archives/">
          <span class="site-state-item-count">123</span>
          <span class="site-state-item-name">æ–‡ç« </span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/Blog/categories/">
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">åˆ†é¡</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/Blog/tags/">
        <span class="site-state-item-count">143</span>
        <span class="site-state-item-name">æ¨™ç±¤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/cromarmot" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;cromarmot" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yexiaorain@gmail.com" title="E-Mail â†’ mailto:yexiaorain@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://atcoder.jp/users/cromarmot" title="https:&#x2F;&#x2F;atcoder.jp&#x2F;users&#x2F;cromarmot" rel="noopener" target="_blank">AtCoder</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://codeforces.com/profile/Cro-Marmot" title="https:&#x2F;&#x2F;codeforces.com&#x2F;profile&#x2F;Cro-Marmot" rel="noopener" target="_blank">Codeforces</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="å›åˆ°é ‚ç«¯">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/19-10-18-adb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/19-10-18-adb/" class="post-title-link" itemprop="url">adb</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2019-10-18 15:09:01" itemprop="dateCreated datePublished" datetime="2019-10-18T15:09:01+08:00">2019-10-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-02-05 11:23:06" itemprop="dateModified" datetime="2023-02-05T11:23:06+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/frontend/" itemprop="url" rel="index"><span itemprop="name">frontend</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/frontend/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Blog/19-10-18-adb/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="19-10-18-adb/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">æ‰€éœ€é–±è®€æ™‚é–“ &asymp;</span>
      <span>1 åˆ†é˜</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="What"><a href="#What" class="headerlink" title="What"></a>What</h1><p>æƒ³çœ‹ä¸€ä¸‹ æŸä¸ªåŒ…çš„æ–‡ä»¶</p>
<p>æŸ¥çœ‹ usbè¿æ¥&#x2F;æ¨¡æ‹Ÿå™¨ çš„è®¾å¤‡ <code>adb devices</code></p>
<p>è¿æ¥ä¸€ä¸ªå…·ä½“çš„è®¾å¤‡ <code>adb -s &lt;è®¾å¤‡id&gt; shell</code></p>
<p>åˆ—å‡ºæ‰‹æœºé‡Œçš„å®‰è£…åŒ…<code>pm list packages</code> å½“ç„¶ grepå‘½ä»¤ä¹Ÿå¯ä»¥ç”¨</p>
<p>æ¯”å¦‚ä½ è¦æŸ¥çœ‹çš„åŒ…ä¸º<code>com.xxx.yyy</code>é‚£ä¹ˆ <code>run-as com.xxx.yyy</code></p>
<p><code>cd ls grep cat</code>è¿™äº›å‘½ä»¤æ˜¯æœ‰çš„ å¹¶æ²¡æœ‰vi XD,ä¸è¿‡æœ‰cat åŸºæœ¬èƒ½çœ‹æ–‡ä»¶äº†</p>
<p>&#x2F;&#x2F; æœåˆ°äº† å•ä¸ªæ–‡ä»¶ cat å‡ºæ¥çš„ ä½†æ²¡æœåˆ°æ–‡ä»¶å¤¹çš„</p>
<p>&#x2F;&#x2F; ä¹Ÿæœ‰é—´æ¥å…ˆcatåˆ°sdcardå†pull å†åˆ sdcard</p>
<p>&#x2F;&#x2F; è¿˜æœåˆ°äº†ä¸€ä¸ª ç”¨ adb backup æŠŠæ•´ä¸ªappæå‡ºæ¥ï¼Œå† è½¬æ¢æˆtarçš„ [è§ä¸‹é¢é“¾æ¥]</p>
<p>&#x2F;&#x2F; å½“ç„¶ è¿˜æœ‰ä¸€å †è¯´rootçš„ emmm å‘Šè¾</p>
<p>&#x2F;&#x2F; Stetho?</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/53634246/android-get-all-installed-packages-using-adb">https://stackoverflow.com/questions/53634246/android-get-all-installed-packages-using-adb</a></p>
<p><a target="_blank" rel="noopener" href="https://gist.github.com/davidnunez/1404789">https://gist.github.com/davidnunez/1404789</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1043322/why-do-i-get-access-denied-to-data-folder-when-using-adb?rq=1">https://stackoverflow.com/questions/1043322/why-do-i-get-access-denied-to-data-folder-when-using-adb?rq=1</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/7399028/android-adb-permission-denied">https://stackoverflow.com/questions/7399028/android-adb-permission-denied</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/15558353/how-can-one-pull-the-private-data-of-ones-own-android-app">https://stackoverflow.com/questions/15558353/how-can-one-pull-the-private-data-of-ones-own-android-app</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/9017073/is-it-possible-to-see-application-data-from-adb-shell-the-same-way-i-see-it-moun/16461386">https://stackoverflow.com/questions/9017073/is-it-possible-to-see-application-data-from-adb-shell-the-same-way-i-see-it-moun/16461386</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/15558353/how-can-one-pull-the-private-data-of-ones-own-android-app/31504263#31504263">https://stackoverflow.com/questions/15558353/how-can-one-pull-the-private-data-of-ones-own-android-app/31504263#31504263</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/19-09-30-nikki4calc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/19-09-30-nikki4calc/" class="post-title-link" itemprop="url">é—ªè€€æš–æš– è€—æè®¡ç®—å™¨ rxjs + angular2+</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2019-09-30 15:09:01" itemprop="dateCreated datePublished" datetime="2019-09-30T15:09:01+08:00">2019-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-02-05 11:23:06" itemprop="dateModified" datetime="2023-02-05T11:23:06+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/frontend/" itemprop="url" rel="index"><span itemprop="name">frontend</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/frontend/Angular/" itemprop="url" rel="index"><span itemprop="name">Angular</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Blog/19-09-30-nikki4calc/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="19-09-30-nikki4calc/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>2.7k</span>
    </span>
    <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">æ‰€éœ€é–±è®€æ™‚é–“ &asymp;</span>
      <span>2 åˆ†é˜</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="What"><a href="#What" class="headerlink" title="What"></a>What</h1><p>é—ªè€€æš–æš–çš„è®¾è®¡å¸ˆ ææ–™è€—æè®¡ç®—å™¨</p>
<p>åŸºäºä¸€ä¸ªå·²ç»æœ‰çš„åŸç”Ÿjs è¿›è¡Œæ”¹é€ </p>
<p>åŸæ¥ç”Ÿ <a target="_blank" rel="noopener" href="http://www.spongem.com/ajglz/tools/evalLevelUpCost.html">http://www.spongem.com/ajglz/tools/evalLevelUpCost.html</a></p>
<h1 id="é‡æ„å†…å®¹"><a href="#é‡æ„å†…å®¹" class="headerlink" title="é‡æ„å†…å®¹"></a>é‡æ„å†…å®¹</h1><ol start="0">
<li>é¦–å…ˆæŠŠè¿™ä¸ªçš„æºç  æä¸‹æ¥,æ¯”è¾ƒæ— è„‘çš„æ“ä½œ</li>
<li>ç„¶åå¼€ä¸ªmodule é…ä¸€ä¸‹routing</li>
<li>æä¸ªcomponent ç„¶åæŠŠå‡½æ•°æ•°æ®éƒ½æ¬è¿›æ¥</li>
<li>æŠŠç›¸å…³å…¨å±€å˜é‡ æ”¹ä¸º <code>this.</code></li>
<li>ä¿®æ”¹åŸæ¥çš„ä¸€äº›<code>$</code>æ–¹æ³• æ”¹ä¸ºåŸç”Ÿjs,æˆ–è€…æ”¹ä¸º<code>[(ngModel)]</code>åŒå‘ç»‘å®šï¼Œè‡³æ­¤åŸºæœ¬å¯ä»¥è¿è¡Œã€‚</li>
<li>è§£æ„ä¸€ä¸‹ç”¨æˆ·è¾“å…¥å’Œè®¡ç®—è¾“å‡ºåˆ†åˆ«å«åš<code>Class: CardBasic/Card -&gt; html:Card/CardOut</code> &#x2F;&#x2F; å¥½å§ è¿™é‡Œå˜é‡åæœ‰ç‚¹ä¹± ç°åœ¨çœ‹æ¥</li>
<li>å¼•å…¥<code>https://material.angular.io</code>çš„ç»„ä»¶,ç¨å¾®è°ƒæ•´ç”»é£</li>
<li>å°è¯•æä¸€ä¸ªcomputed,ç§»é™¤è®¡ç®—æŒ‰é’®, æ”¹ä¸º <code>get XXX</code>çš„æ–¹æ³•</li>
</ol>
<p>è¿™é‡Œé‡åˆ°é—®é¢˜, æ ¹æ®è°ƒè¯•ï¼Œé¡µé¢ä¸Šçš„è°ƒç”¨ä¼šåå¤è°ƒç”¨getæ–¹æ³•, å¤§é‡é‡å¤ä¸å¿…è¦è®¡ç®—</p>
<ol start="8">
<li>è§£å†³æ–¹æ¡ˆ1: å¼•å…¥Ramdaï¼Œå»ºç«‹ä¸¤ä¸ªcache åˆ†åˆ«æ˜¯è®¡ç®—ç»“æœ å’Œ ç”¨æˆ·è¾“å…¥ï¼Œç”¨ Ramdaçš„æ·±æ¯”è¾ƒå’Œæ·±æ‹·è´å®Œæˆå°‘çš„è®¡ç®—æ¬¡æ•°</li>
</ol>
<p>å†™ç€è¿˜å¥½ï¼Œè¡Œæ•°ä¸å¤šï¼Œå°±èƒ½å®ç°ï¼Œæ€§èƒ½ä¹Ÿå¥½ï¼Œä½†æ˜¯é—®é¢˜æ˜¯ï¼Œç›¸å½“äºä½ ä¾ç„¶è¦å»å…³å¿ƒçš„æ˜¯ï¼Œè¾“å‡ºå€¼è¾“å…¥å€¼ç›´æ¥çš„å…·ä½“å…³ç³»æ‰èƒ½å†™ã€‚</p>
<ol start="9">
<li>è§£å†³æ–¹æ¡ˆ2: å¼•å…¥rxjsï¼Œç”¨Observableæ</li>
</ol>
<p>è¿™é‡Œå®è·µä¸Šæœ‰äº›é—®é¢˜</p>
<ul>
<li>åŒå‘ç»‘å®šå¦‚ä½•å’Œ<code>BehaviorSubject</code>ç»‘å®š,æœ€åç”¨<code>(ngModelChange)</code>æ¥ å•å‘åˆ° å…·ä½“å­—æ®µ</li>
<li>èƒ½å¦ç›‘å¬æ•´ä¸ªClass</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">of</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> a = &#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> a$ = <span class="title function_">of</span>(a);</span><br><span class="line">a$.<span class="title function_">subscribe</span>(<span class="variable language_">console</span>.<span class="property">log</span>);</span><br><span class="line">a.<span class="property">x</span>=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚è¿™æ · å¹¶ä¸ä¼šå› ä¸ºä¿®æ”¹äº†açš„å­å­—æ®µè€Œè‡ªåŠ¨å‘é€next</p>
<p>æäº†åŠå¤©æœ€åè¿˜æ˜¯ æ„Ÿè§‰å¾ˆ æ‰‹å·¥å†™ä¾èµ–çš„è¾“å…¥</p>
<p>è¿™ä¸€å—çš„å®ç°ä¸»è¦å¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›¸å½“äºæ‰€æœ‰ç”¨æˆ·è¾“å…¥çš„éƒ¨åˆ† éƒ½ä¼šå¯¹åº”ä¸€ä¸ªemitter</span></span><br><span class="line">private <span class="attr">textEmitter</span>: <span class="title class_">Map</span>&lt;string, <span class="title class_">BehaviorSubject</span>&lt;string&gt;&gt; = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="comment">// åœ¨åˆå§‹åŒ–æ—¶ åˆå§‹åŒ–å®ƒä»¬å¹¶ç›‘å¬</span></span><br><span class="line">  <span class="comment">// initial textEmitter</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">card</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">textEmitter</span>.<span class="title function_">set</span>(key, <span class="keyword">new</span> <span class="title class_">BehaviorSubject</span>(<span class="variable language_">this</span>.<span class="property">card</span>[key]));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">obAllKeys</span>(<span class="variable language_">this</span>.<span class="property">textEmitter</span>)</span><br><span class="line">    .<span class="title function_">pipe</span>(</span><br><span class="line">      <span class="title function_">map</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ç»†ç²’åº¦è§¦å‘ å…¨ä½“è®¡ç®—</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fire calc&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">cardOut</span>; <span class="comment">// å°±æ˜¯æœ€å¼€å§‹å†™çš„getæ–¹æ³• è§¦å‘è¿‡ç¨‹ä¸­åª å‘Šè¯‰è¯´ &#x27;å“!æˆ‘å˜äº†!&#x27; å³å¯</span></span><br><span class="line">      &#125;)</span><br><span class="line">    ).<span class="title function_">subscribe</span>(<span class="variable language_">this</span>.<span class="property">cardOut$</span>); <span class="comment">// é¡µé¢é€šè¿‡è¿™ä¸ªè¯»å– æ˜¯ä¸ª BehaviorSubject</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åšçš„ä¸ªåŠŸèƒ½ ç›‘å¬ä¸€ä¸ªç±» çš„æ‰€æœ‰å­—æ®µ å¯¹åº”çš„ textEmitterçš„Observable</span></span><br><span class="line"><span class="comment">// åšäº†ä¸€ç‚¹é˜²æŠ–</span></span><br><span class="line"><span class="title function_">obAllKeys</span>(<span class="attr">emitter</span>: <span class="title class_">Map</span>&lt;string, <span class="title class_">BehaviorSubject</span>&lt;string&gt;&gt;): <span class="title class_">Observable</span>&lt;string&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">mergeOb</span>: <span class="title class_">Observable</span>&lt;string&gt; = <span class="keyword">new</span> <span class="title class_">BehaviorSubject</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  emitter.<span class="title function_">forEach</span>(<span class="function">(<span class="params">emitValue, emitKey</span>) =&gt;</span> &#123;</span><br><span class="line">    mergeOb = <span class="title function_">merge</span>(mergeOb, <span class="comment">// å…³äºmergeçš„ä½¿ç”¨è€ƒè™‘ æœ€å¼€å§‹æƒ³è¿‡ä½¿ç”¨combineLatest ä½†æ˜¯ é—®é¢˜æ˜¯ æˆ‘æ˜æ˜å¯ä»¥ç›´æ¥é€šè¿‡ é¡µé¢åŒå‘ç»‘å®šæ‹¿åˆ° ç”¨æˆ·è¾“å…¥,æ‰€ä»¥å…¶å®åªéœ€è¦ä¸€ä¸ªå˜æ›´é€šçŸ¥å³å¯ï¼Œå†å¦ä¸€ä¸ª combineLatestæ„Ÿè§‰è¦é…ä¸Šflat æ‰èƒ½ è‡ªåŠ¨ ç»‘å®šæ‰€æœ‰key,ä¸ç„¶æ˜¯æ‰‹å†™çš„æ‰€æœ‰key,è€Œå¯¹åº”çš„ä¸‹æ ‡å†åå‘ç”Ÿæˆ å¯¹è±¡,è¡¨ç¤º æ˜¯ä¸æ˜¯æœ‰æ›´å¥½çš„æ–¹æ³• æ²¡å­¦åˆ°æ²¡æœåˆ°</span></span><br><span class="line">      emitValue.<span class="title function_">pipe</span>(</span><br><span class="line">        <span class="title function_">debounceTime</span>(<span class="variable language_">this</span>.<span class="property">debounceInterval</span>),</span><br><span class="line">        <span class="title function_">distinctUntilChanged</span>(),</span><br><span class="line">        <span class="title function_">map</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> emitKey + v) <span class="comment">// è¿™ä¸ªæ˜¯é¿å… åœ¨æ®µæ—¶é—´å†… ä¸Šæ¬¡çŠ¶æ€a,  æ”¹b æ”¹a æ”¹å›æœ€åˆçš„a è¿™æ ·å°±ä¸ä¼šè§¦å‘æ”¹å˜</span></span><br><span class="line">      ));</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> mergeOb.<span class="title function_">pipe</span>(<span class="title function_">debounceTime</span>(<span class="variable language_">this</span>.<span class="property">debounceInterval</span>)); <span class="comment">// æŒ‰ç†è¯´ä¸€æ¬¡åªä¼šæ”¹åŠ¨ä¸€ä¸ª  è¿™ä¸ªæ˜¯åˆæ¬¡è¿›å…¥æ—¶ ä¼šæœ‰å¤šä¸ª å½“ç„¶ combineLatest ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸»è¦æ˜¯å’Œé¡µé¢ä¸Šçš„ è¾“å…¥ç»‘å®š å…·ä½“å°±æ˜¯ ngModelChange ,è¿™ä¸€å—çš„é—®é¢˜å°±æ˜¯ å†™äº† [(ngModel)] åˆå†™äº†ä¸€éè¿™ä¸ªç»‘å®š å…‰æ˜¯keyå°±è¦å†™ä¸¤é è¿˜æ˜¯å­—ç¬¦ä¸²æ²¡æ³•ä¿è¯æ­£ç¡® é çš„æ˜¯ä¸‹é¢çš„ è°ƒè¯•å¼ºè¡Œä¿è¯éƒ¨åˆ†</span></span><br><span class="line"><span class="title function_">onChange</span>(<span class="params">cardKey: string, value: string</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`onCardIdChange: <span class="subst">$&#123;cardKey&#125;</span> =&gt; <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">textEmitter</span>.<span class="title function_">has</span>(cardKey)) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">textEmitter</span>.<span class="title function_">get</span>(cardKey).<span class="title function_">next</span>(value);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// è°ƒè¯•ç”¨</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;onChange&#x27;</span>, cardKey, value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="10">
<li>æœ€åå¢åŠ äº†ä¸€ç‚¹ try catch,å› ä¸º ä¸åŒçš„å¡å¯é€‰èŒƒå›´å¹¶ä¸åŒï¼Œæˆ–è€…ç”¨æˆ·è¾“å…¥ä¸åˆæ³•ä¼š çˆ†çº¢&#x3D;.&#x3D;åªåœ¨ ä¸¤ä¸ªLevelValé‡ŒåŠ äº†</li>
</ol>
<h1 id="æœ€åç»“æœ"><a href="#æœ€åç»“æœ" class="headerlink" title="æœ€åç»“æœ"></a>æœ€åç»“æœ</h1><p><a href="https://cromarmot.github.io/Debuq/#/nikki4/lvlup">https://cromarmot.github.io/Debuq/#/nikki4/lvlup</a></p>
<p>å¦‚æœæ‰“å¼€çœ‹åˆ°404ï¼Œä¿æŒé¡µé¢ï¼Œç­‰å¾…ä¸€ä¼šå„¿å†åˆ·æ–°å³å¯ã€‚å› ä¸ºæœ‰worker service</p>
<h1 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h1><p>æ¯”å¦‚ææˆåŠ¨æ€æ‹‰å–</p>
<p>è®¡ç®—å‡½æ•°å†å‘çº¯å‡½æ•°é æ‹¢å•Š</p>
<p>æ€ä¹ˆjson è½¬æ¢ Class ç”šè‡³ Map &#x2F;&#x2F; æœäº†ä¸€ä¼šæ²¡æœåˆ°ç®€æ´çš„æ–¹æ¡ˆ</p>
<p>æ›´å¥½çš„åŒå‘ç»‘å®š+BehaviorSubject ç»‘å®š?</p>
<p>æ˜¯å¦å¯èƒ½ç®€åŒ–æŸéƒ¨åˆ†ä»£ç </p>
<p>è¾“å…¥æ§åˆ¶ æ¯”å¦‚ ç°åœ¨å…¶å®å¯ä»¥è¾“å…¥ å°æ•° å’Œ èŒƒå›´ä»¥å¤–çš„æ•°</p>
<p>æ¯”å¦‚å› ä¸ºè¿˜æ˜¯æœ‰ä¸å°‘json å¯¼è‡´ typescriptçš„ ç±»å‹åˆ¤æ–­å¹¶ä¸å®Œæ•´ è™½ç„¶</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/" class="post-title-link" itemprop="url">åˆ«éµå¾ªRxJSçš„æœ€ä½³å®è·µ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2019-09-27 01:01:01" itemprop="dateCreated datePublished" datetime="2019-09-27T01:01:01+08:00">2019-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-02-05 11:23:06" itemprop="dateModified" datetime="2023-02-05T11:23:06+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/frontend/" itemprop="url" rel="index"><span itemprop="name">frontend</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/frontend/Angular/" itemprop="url" rel="index"><span itemprop="name">Angular</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="19-09-27-Dont_follow_RxJS_Best_Practices/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>8.3k</span>
    </span>
    <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">æ‰€éœ€é–±è®€æ™‚é–“ &asymp;</span>
      <span>8 åˆ†é˜</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h1><p><a target="_blank" rel="noopener" href="https://dev.to/nikpoltoratsky/don-t-follow-rxjs-best-practices-4893#pass-streams-to-children">è‹±æ–‡åŸæ–‡</a></p>
<p><a href="/Blog/19-06-27-rxjs/">rxjså…¥é—¨</a></p>
<h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><p>å¦‚ä»Š,è¶Šæ¥è¶Šå¤šå¼€å‘è€…å¼€å§‹å­¦ RxJs, å¹¶è·Ÿéšæœ€ä½³å®è·µæ­£ç¡®ä½¿ç”¨å®ƒã€‚ä½†æ˜¯å®Œå…¨ä¸å¿…è¦,é‚£äº›æ‰€è°“çš„æœ€ä½³å®è·µï¼Œéœ€è¦å­¦ä¸€äº›æ–°çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨ä½ çš„é¡¹ç›®ä¸­å¢åŠ é¢å¤–çš„ä»£ç ã€‚</p>
<p>æ›´å¤šçš„æ˜¯ï¼Œä½¿ç”¨æœ€ä½³å®è·µï¼Œæ˜¯å†’ç€åˆ›å»ºå¥½çš„ä»£ç åº“å’Œè®©ä½ çš„é˜Ÿå‹é«˜å…´çš„é£é™©! ğŸŒˆ</p>
<p>Stop being a gray mass! æ‰“ç ´å¸¸è§„ï¼Œåœæ­¢ä½¿ç”¨æœ€ä½³å®è·µ</p>
<p>ä¸‹é¢æˆ‘å°†æƒ³ä½ ä»‹ç»ï¼Œæ€ä¹ˆæ”¹é€ é‚£äº›æ‰€è°“çš„æœ€ä½³å®è·µä»£ç .</p>
<ul>
<li>ä¸è¦unsubscribe</li>
<li>åµŒå¥—ä½¿ç”¨Subscribe</li>
<li>ä¸è¦ä½¿ç”¨ çº¯å‡½æ•°</li>
<li>æ‰‹åŠ¨subscribeï¼Œä¸è¦ä½¿ç”¨ async pipe</li>
<li>å‘ä½ çš„æœåŠ¡æš´éœ²subjects</li>
<li>å§‹ç»ˆå¯¹å­ç»„ä»¶ä¼ é€’æµ</li>
<li>å®çŸ³å›¾? å¹¶ä¸é€‚åˆä½ </li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/Blog/19-09-27-Dont_follow_RxJS_Best_Practices/#more" rel="contents">
                é–±è®€å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/19-09-23-redhat_gitlabserver_update/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/19-09-23-redhat_gitlabserver_update/" class="post-title-link" itemprop="url">redhat7 + gitlab-ceç‰ˆæœ¬æ›´æ–° 11.6->12.2</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2019-09-23 15:09:01" itemprop="dateCreated datePublished" datetime="2019-09-23T15:09:01+08:00">2019-09-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-02-05 11:23:06" itemprop="dateModified" datetime="2023-02-05T11:23:06+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/software/" itemprop="url" rel="index"><span itemprop="name">software</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/software/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Blog/19-09-23-redhat_gitlabserver_update/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="19-09-23-redhat_gitlabserver_update/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>2.5k</span>
    </span>
    <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">æ‰€éœ€é–±è®€æ™‚é–“ &asymp;</span>
      <span>2 åˆ†é˜</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Why"><a href="#Why" class="headerlink" title="Why"></a>Why</h1><p>æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒ å°è¯• å‡çº§ gitlab-ce ä» 11.6 åˆ° 12.2, ä»¥åŠå°è¯•æ¨¡æ‹Ÿä¹‹å‰äº§ç”Ÿçš„é”™è¯¯</p>
<p>å®˜æ–¹è¯´ å…ˆè¦åˆ°<code>11.11.X</code>å†åˆ°<code>12.X</code></p>
<p>ç‰©æ–™å‡†å¤‡</p>
<p>vmware on Ubuntu 18.04 LTS</p>
<p>gitlab-ce-11.6.5-ce.0.el6.x86_64.rpm</p>
<p>gitlab-ce-11.11.0-ce.0.el6.x86_64.rpm</p>
<p>gitlab-ce-12.2.5-ce.0.el7.x86_64.rpm</p>
<p>rhel-server-7.7-x86_64-dvd.iso</p>
<h1 id="Install-OS"><a href="#Install-OS" class="headerlink" title="Install OS"></a>Install OS</h1><p><a target="_blank" rel="noopener" href="https://access.redhat.com/downloads/content/69/ver=/rhel---7/7.7/x86_64/product-software">https://access.redhat.com/downloads/content/69/ver=/rhel---7/7.7/x86_64/product-software</a></p>
<p>æ³¨å†Œ ä¸‹è½½ å®‰è£…</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ ä¸‹4GBå·¦å³çš„ è€Œä¸æ˜¯boot.iso</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆæ˜¯7 ä¸æ˜¯8(å½“å‰æœ€æ–°)</p>
</blockquote>
<p>å› ä¸ºæƒ³å’ŒæŸä¸ªç”Ÿäº§ç¯å¢ƒä¿æŒä¸€è‡´ å°è¯• æ¨¡æ‹ŸæŸäº›æ“ä½œ</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/Blog/19-09-23-redhat_gitlabserver_update/#more" rel="contents">
                é–±è®€å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/19-09-20-gitbiguselessfile/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/19-09-20-gitbiguselessfile/" class="post-title-link" itemprop="url">git åœ¨å†å²ç‰ˆæœ¬ä¸­ å®Œå…¨ç§»é™¤æ–‡ä»¶</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2019-09-20 15:09:01" itemprop="dateCreated datePublished" datetime="2019-09-20T15:09:01+08:00">2019-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-02-05 11:23:06" itemprop="dateModified" datetime="2023-02-05T11:23:06+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/software/" itemprop="url" rel="index"><span itemprop="name">software</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/software/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Blog/19-09-20-gitbiguselessfile/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="19-09-20-gitbiguselessfile/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>966</span>
    </span>
    <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">æ‰€éœ€é–±è®€æ™‚é–“ &asymp;</span>
      <span>1 åˆ†é˜</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="How"><a href="#How" class="headerlink" title="How"></a>How</h1><p>å‚è€ƒ</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/amiezhang/p/11337095.html">https://www.cnblogs.com/amiezhang/p/11337095.html</a></p>
<p>ä¸Šé¢é“¾æ¥éƒ½æœ‰è®²</p>
<p>æŒ‰ç…§æ–‡ä»¶å¤§å°æ’åºå‰100:</p>
<p><code>git rev-list --objects --all | grep &quot;$(git verify-pack -v .git/objects/pack/*.idx | sort -k 3 -n | tail -100 | awk &#39;&#123;print$1&#125;&#39;)&quot;</code></p>
<p><code>git filter-branch --force --index-filter &#39;git rm --cached --ignore-unmatch æ–‡ä»¶å&#39; --prune-empty --tag-name-filter cat -- --all</code></p>
<p><code>git filter-branch --index-filter</code> è®©æ¯ä¸ªæäº¤çš„æ–‡ä»¶éƒ½å¤åˆ¶åˆ°ç´¢å¼•(<code>.git/index</code>)ä¸­</p>
<p>ç„¶åè¿è¡Œè¿‡æ»¤å™¨å‘½ä»¤ï¼š<code>git rm --cached --ignore-unmatch</code> æ–‡ä»¶å ï¼Œè®©æ¯ä¸ªæäº¤éƒ½åˆ é™¤æ‰â€œæ–‡ä»¶åâ€æ–‡ä»¶</p>
<p>ç„¶å<code>--prune-empty</code>æŠŠç©ºçš„æäº¤â€œä¿®å‰ªâ€æ‰</p>
<p>ç„¶å<code>--tag-name-filter cat</code>æŠŠæ¯ä¸ªtagä¿æŒåŸåå­—ï¼ŒæŒ‡å‘ä¿®æ”¹åçš„å¯¹åº”æäº¤</p>
<p>æœ€å<code>-- --all</code>å°†æ‰€æœ‰refï¼ˆåŒ…æ‹¬branchã€tagï¼‰éƒ½æ‰§è¡Œä¸Šé¢çš„é‡å†™</p>
<p><code>git for-each-ref --format=&#39;delete %(refname)&#39; refs/original | git update-ref --stdin</code></p>
<p><code>git reflog expire --expire=now --all</code></p>
<p><code>git gc --prune=now</code></p>
<h1 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h1><ol>
<li><p>ä¸Šé¢çš„æ–‡ä»¶åå¯ä»¥å†™é€šé…ç¬¦å·</p>
</li>
<li><p>ä¼—æ‰€å‘¨çŸ¥åªè¦æˆ‘åŠ åˆ°gitä¸­è¿‡çš„ï¼Œå³ä½¿æŠŠåˆ†æ”¯åˆ äº†ï¼Œä¹Ÿå¯ä»¥ä»reflogä¸­æ‰¾åˆ°ï¼Œä½†è¿™é‡Œ æœ‰ æ¸…é™¤reflogæ‰€ä»¥ æƒ³è¦è¿™æ ·åšçš„ï¼Œè¦ä¹ˆ å•ç‹¬å¼€æ–‡ä»¶å¤¹æï¼Œè¦ä¹ˆ ç¡®å®š reflogéƒ½ä¸ä¼šå†ç”¨</p>
</li>
<li><p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨? ä½¿ç”¨é¢‘ç‡ä¸åº”é«˜ï¼Œå› ä¸º è¿™ç§æ“ä½œæ— ç–‘æ˜¯ä¼šå¯¹ åˆ†æ”¯é‡å†™ï¼Œä¹Ÿå°±å®Œå…¨ä¸åŒçš„commit hash,æ‰€ä»¥æœ€åpushéƒ½ä¼šå¸¦ä¸Šâ€“force, ç›®å‰èƒ½æƒ³åˆ°åœºæ™¯,æ¯”å¦‚ ä¸å¿…è¦çš„å¤§æ–‡ä»¶,å¦‚ä¸å°å¿ƒæäº¤çš„ä¸‹ä¸‹æ¥çš„æ‰“åŒ…åæ–‡ä»¶,å¤§zip.ä¹Ÿæœ‰åœºæ™¯ æ¯”å¦‚ å¾ˆå¤šåˆ†æ”¯å‰ ä¸å°å¿ƒæäº¤äº†ä¸€ä¸ªæ¶‰å¯†çš„æ–‡ä»¶ã€‚ å½“ç„¶push forceä»¥å æ‰€æœ‰ç”¨ä»“åº“çš„äººè¦æƒ³ç»§ç»­ç”¨åªæœ‰å»æ–°çš„åˆ†æ”¯é‡Œæäº†ï¼Œå·²ç»è¢«åˆ«äººä¸‹çš„è¿˜ä¼šåœ¨åˆ«äººç¡¬ç›˜é‡Œ</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/19-09-15-A_Brief_History_of_Tomorrow/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/19-09-15-A_Brief_History_of_Tomorrow/" class="post-title-link" itemprop="url">æœªæ¥ç®€å² é˜…è¯»ç¬”è®°</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2019-09-15 15:09:01" itemprop="dateCreated datePublished" datetime="2019-09-15T15:09:01+08:00">2019-09-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-02-05 11:23:06" itemprop="dateModified" datetime="2023-02-05T11:23:06+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/notes/book/" itemprop="url" rel="index"><span itemprop="name">book</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Blog/19-09-15-A_Brief_History_of_Tomorrow/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="19-09-15-A_Brief_History_of_Tomorrow/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>1.8k</span>
    </span>
    <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">æ‰€éœ€é–±è®€æ™‚é–“ &asymp;</span>
      <span>2 åˆ†é˜</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>19-08-22  -&gt; 19-09-15</p>
</blockquote>
<p>ISBN:9787508672069</p>
<h1 id="Main"><a href="#Main" class="headerlink" title="Main"></a>Main</h1><p>å›é¡¾å†å²ï¼Œå‘ç°å¾ˆå¤šç°åœ¨æœ‰çš„ï¼Œéƒ½æ˜¯ç”±å„ç§å…¶å®ƒæ··æ‚åŸå› çš„ç»„åˆ</p>
<p>å†å²è§£å†³äº†ä¸‰å¤§ é¥¥è’ ç˜Ÿç–« æˆ˜äº‰</p>
<p>å°†å¯èƒ½è€ƒè™‘æ–°çš„é—®é¢˜ æ°¸ç”Ÿ å¿«ä¹</p>
<p>å†å²çš„è§£å†³é—®é¢˜çš„è´¡çŒ®ï¼Œå¾ˆå¤šä¹Ÿç”¨äºäººç±»å‡çº§</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/Blog/19-09-15-A_Brief_History_of_Tomorrow/#more" rel="contents">
                é–±è®€å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/19-09-04-vuemsgbox/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/19-09-04-vuemsgbox/" class="post-title-link" itemprop="url">eleme vue msgbox ç®€å•çœ‹çœ‹å®ç°åŸç†</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2019-09-04 11:20:14" itemprop="dateCreated datePublished" datetime="2019-09-04T11:20:14+08:00">2019-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-02-05 11:23:06" itemprop="dateModified" datetime="2023-02-05T11:23:06+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/frontend/" itemprop="url" rel="index"><span itemprop="name">frontend</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/frontend/vue2/" itemprop="url" rel="index"><span itemprop="name">vue2</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Blog/19-09-04-vuemsgbox/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="19-09-04-vuemsgbox/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>2.3k</span>
    </span>
    <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">æ‰€éœ€é–±è®€æ™‚é–“ &asymp;</span>
      <span>2 åˆ†é˜</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ä¾èµ–ç‰ˆæœ¬"><a href="#ä¾èµ–ç‰ˆæœ¬" class="headerlink" title="ä¾èµ–ç‰ˆæœ¬"></a>ä¾èµ–ç‰ˆæœ¬</h1><p>element-ui ç‰ˆæœ¬ 10592d12ea981912165542920160669fd8874bd9</p>
<p>æ–‡æ¡£ <a target="_blank" rel="noopener" href="https://element.eleme.io/#/zh-CN/component/message-box">https://element.eleme.io/#/zh-CN/component/message-box</a></p>
<h1 id="è¦è§£å†³çš„é—®é¢˜"><a href="#è¦è§£å†³çš„é—®é¢˜" class="headerlink" title="è¦è§£å†³çš„é—®é¢˜"></a>è¦è§£å†³çš„é—®é¢˜</h1><p>åƒæ˜¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$msgbox(options)</span><br><span class="line">$alert(message, title, options) æˆ– $alert(message, options)</span><br><span class="line">$confirm(message, title, options) æˆ– $confirm(message, options)</span><br><span class="line">$prompt(message, title, options) æˆ– $prompt(message, options)</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·çš„apiæ˜¯æ€ä¹ˆå®ç°çš„</p>
<h1 id="ä»£ç é˜…è¯»"><a href="#ä»£ç é˜…è¯»" class="headerlink" title="ä»£ç é˜…è¯»"></a>ä»£ç é˜…è¯»</h1><p>å¤§æ¦‚çœ‹ä¸€çœ¼æ€ä¹ˆæçš„</p>
<p><code>src/index.js</code> çœ‹ è¿™äº›æ–¹æ³• ,éƒ½æ˜¯æ¥è‡ª <code>import MessageBox from &#39;../packages/message-box/index.js&#39;;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$msgbox</span> = <span class="title class_">MessageBox</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$alert</span> = <span class="title class_">MessageBox</span>.<span class="property">alert</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$confirm</span> = <span class="title class_">MessageBox</span>.<span class="property">confirm</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$prompt</span> = <span class="title class_">MessageBox</span>.<span class="property">prompt</span>;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆçœ‹ <code>packages/message-box/src</code>æ–‡ä»¶å¤¹</p>
<p>ä¸¤ä¸ªæ–‡ä»¶ <code>main.js</code>å’Œ <code>main.vue</code></p>
<p><code>main.vue</code>ç„ä¸€çœ¼,éƒ½æ˜¯æˆ‘ä»¬å¸¸è§çš„å†™æ³•</p>
<p><code>main.js</code>ï¼Œçœ‹è¿™äº›æ–¹æ³• æœ€å éƒ½æ˜¯ è°ƒç”¨ <code>MessageBox(é…ç½®å‚æ•°)</code>çš„å½¢å¼è°ƒç”¨</p>
<p>å†çœ‹<code>const MessageBox = function(options, callback) &#123;</code>çš„å®ç°</p>
<p>éƒ½æ˜¯ å…ˆ<code>msgQueue.push(é…ç½®å‚æ•°) + showNextMsg()</code></p>
<p><code>msgQueue</code>å’Œ <code>showNextMsg</code>,åˆ†åˆ«æ˜¯ä¸ªæ•°ç»„ï¼Œå’Œä»æ•°ç»„ä¸­<code>shift()</code> å–å‡ºå€¼ è¿›è¡Œå…·ä½“å±•ç¤ºæ‰§è¡Œ</p>
<p>ç„¶å çœ‹ <code>showNextMsg()</code> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (!instance) &#123;</span><br><span class="line">  initInstance();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶å</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const initInstance = () =&gt; &#123;</span><br><span class="line">  instance = new MessageBoxConstructor(&#123;</span><br><span class="line">    el: document.createElement(&#x27;div&#x27;)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  instance.callback = defaultCallback;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å’Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const MessageBoxConstructor = Vue.extend(msgboxVue);</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜äº†åŸºæœ¬è¿™å°±æ˜¯ å·¥å‚æ¨¡å¼+å•ä¾‹æ¨¡å¼+<code>Vue.extend</code>æ¥åˆ›å»ºå¼¹æ¡†å•ä¾‹,æ‰€ä»¥æˆ‘ä»¬é¡µé¢ä¸Šä¸éœ€è¦å†™ä»€ä¹ˆ,å°±èƒ½ç›´æ¥è°ƒç”¨</p>
<p>ç„¶åè¿™äº›<code>confirm</code>è°ƒç”¨è¿‡ç¨‹ ä¹Ÿå°±æ˜¯å¯¹è¿™ä¸ªå•ä¾‹çš„å‚æ•°æ”¹åŠ¨ æ¯”å¦‚æ§åˆ¶æ ·å¼ æ•°æ® æ˜¾ç¤ºä¹‹ç±»çš„</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ol>
<li>ç”¨æˆ·è°ƒç”¨ <code>$msgbox</code></li>
<li>è°ƒç”¨åˆ°<code>packages/message-box/src/main.js</code>çš„ <code>MessageBox(options,callback)</code></li>
<li><code>MessageBox(options,callback)</code>é€šè¿‡ æ•°ç»„ + æ•°ç»„.shift,ä¾æ¬¡æå–æ•°æ®å±•ç¤º</li>
<li>å¯¹äºå±•ç¤ºçš„å®ä¾‹ æ˜¯ é€šè¿‡ <code>Vue.extend(packages/message-box/src/main.vue)</code> + å·¥å‚å•ä¾‹æ¥äº§ç”Ÿçš„ä¸€ä¸ªå®ä¾‹</li>
<li>ä»–ä»¬ æäº†ä¸€ä¸ª<code>element/examples/components/demo-block.vue</code> å¯ä»¥åœ¨<code>markdown</code>å†™ç¤ºä¾‹ä»£ç ,å¹¶ä¸”åœ¨ç½‘é¡µä¸ŠæŸ¥çœ‹ å¯ä»¥è¿è¡Œ 66666</li>
</ol>
<blockquote>
<p>é‚£å¸¸è§çš„é—®é¢˜å¯èƒ½æœ‰è¯´ï¼Œè¿ç»­è°ƒç”¨2æ­¤å¸¦æœ‰å›è°ƒå‡½æ•°çš„<code>$msgbox</code>ä¼šæ€æ ·</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥çœ‹<code>showNextMsg()</code>å®ç°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¾—åˆ° instance</span></span><br><span class="line">  <span class="keyword">if</span> (!instance.<span class="property">visible</span> || instance.<span class="property">closeTimer</span>) &#123;</span><br><span class="line"> <span class="comment">//...</span></span><br><span class="line">      <span class="keyword">let</span> oldCb = instance.<span class="property">callback</span>;</span><br><span class="line">      instance.<span class="property">callback</span> = <span class="function">(<span class="params">action, instance</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">oldCb</span>(action, instance);</span><br><span class="line">        <span class="title function_">showNextMsg</span>();</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="comment">//...</span></span><br><span class="line">      <span class="title class_">Vue</span>.<span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        instance.<span class="property">visible</span> = <span class="literal">true</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">//...</span></span><br></pre></td></tr></table></figure>


<p>æ„æ€å°±æ˜¯å¦‚æœæˆ‘ä»¬åŒæ­¥è°ƒç”¨ä¸¤ä¸ªï¼Œ</p>
<ul>
<li>å› ä¸ºæˆ‘ä»¬visibleè®¾ç½®ä¸ºtrueæ˜¯ å¼‚æ­¥é‡Œå‘ç”Ÿçš„,é‚£ä¹ˆ è¿™ä¸¤ä¸ªè°ƒç”¨æ—¶ visibleé»˜è®¤éƒ½æ˜¯false,æ‰€ä»¥ åªä¼šæœ€åä¸€ä¸ªç”Ÿæ•ˆ</li>
<li>å¦‚æœæˆ‘ä»¬å¼‚æ­¥è°ƒç”¨ä¸¤æ¬¡msgbox,é‚£ä¹ˆ åä¸€ä¸ªè°ƒç”¨ ä¼šåœ¨<code>!visible</code>çš„åœ°æ–¹ä¸ºfalse,ä¸ä¼šç›´æ¥è§¦å‘ï¼Œä½†æ˜¯å› ä¸ºè®¾è®¡äº†msgQueue,å› æ­¤ ä¼šæ”¾åœ¨æ•°ç»„ä¸­ï¼Œç„¶åçœ‹åˆ° ä¸Šé¢çš„callback,ä¼šåœ¨è°ƒç”¨oldCbä»¥å å†è°ƒç”¨showNextMsg,æ‰€ä»¥ä¼šåœ¨å¯¹è¯æ¡†å›è°ƒä»¥å å†å›è°ƒ é‚£ä¸ªæ—¶åˆ»ï¼ŒmsgQueueé‡Œé¦–ä¸ª å¹¶ä»æ•°ç»„ä¸­ç§»é™¤</li>
</ul>
<h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote>
<p>æ€»æµç¨‹å®ç°</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯æ–¹æ³•æ˜¯<code>src/index.js</code>: <code>Vue.prototype.æ–¹æ³•å = æ–¹æ³•å‡½æ•°</code> æ¥è®©å…¨å±€å¯ç”¨</p>
<p>é€šè¿‡ <code>document.createElement(&#39;div&#39;)</code> å’Œ å…¨å±€å˜é‡, åˆ›å»ºç»‘å®šç»´æŠ¤å¯¹åº”çš„å•ä¾‹å®ä¾‹.</p>
<p>è¿™æ ·å°±å®ç°äº† ä»»ä½•é¡µé¢,ä¸éœ€è¦å†™ç»„ä»¶,å°±èƒ½<code>this.æ–¹æ³•å(å‚æ•°)</code> æ¥å¼¹çª—</p>
<p>é€‚ç”¨åœºæ™¯,ä¸éœ€è¦ä¸šåŠ¡å®šUI,å¦åˆ™éœ€è¦é¡µé¢<code>v-slot</code>ä¹‹ç±»æ’å…¥ä¸šåŠ¡å†…å®¹</p>
<blockquote>
<p>å‚æ•°è®¾è®¡(æ ¸å¿ƒå‚æ•°ä¸å¯é€‰å‚æ•°ä¸å›è°ƒ)</p>
</blockquote>
<p>æ ¸å¿ƒå‚æ•°æ˜¯å‡½æ•°çš„ç›´æ¥å‚æ•°</p>
<p>å¯é€‰å‚æ•°ç»„åˆæˆä¸€ä¸ªå¯¹è±¡,æä¾›é»˜è®¤å€¼</p>
<p>å›è°ƒæ—¢æœ‰æˆåŠŸä¹Ÿæœ‰å¤±è´¥,éšæ˜¯promise,æ€»è§‰å¾—ç”¨rejectæ¥åšå–æ¶ˆå’Œå…³é—­å…¶å®ä¸å¤ªå¥½, å¯ä»¥å…¨resolveèµ°è‡ªå®šä¹‰çŠ¶æ€</p>
<p>æä¾›ä¸€å®šçš„é‡è½½å®ç°</p>
<blockquote>
<p>å†…éƒ¨å…·ä½“</p>
</blockquote>
<p>é˜Ÿåˆ—, åŒæ­¥å¼‚æ­¥, callbackæŒæœ‰</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/19-09-02-git_subtree_vs_submodule/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/19-09-02-git_subtree_vs_submodule/" class="post-title-link" itemprop="url">git subtree vs submodule</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2019-09-02 11:20:14" itemprop="dateCreated datePublished" datetime="2019-09-02T11:20:14+08:00">2019-09-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-02-05 11:23:06" itemprop="dateModified" datetime="2023-02-05T11:23:06+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/software/" itemprop="url" rel="index"><span itemprop="name">software</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/software/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Blog/19-09-02-git_subtree_vs_submodule/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="19-09-02-git_subtree_vs_submodule/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>443</span>
    </span>
    <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">æ‰€éœ€é–±è®€æ™‚é–“ &asymp;</span>
      <span>1 åˆ†é˜</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><h2 id="submodule"><a href="#submodule" class="headerlink" title="submodule"></a>submodule</h2><p><code>git submodule add ä»“åº“url</code></p>
<p><code>git diff --cached --submodule</code></p>
<p>cloneå</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git submodule init</span><br><span class="line">git submodule update</span><br></pre></td></tr></table></figure>

<p>cloneæ—¶è‡ªåŠ¨ æ‹‰å–<code>git clone --recurse-submodules</code></p>
<p><code>git log -p --submodule</code></p>
<h2 id="subtree"><a href="#subtree" class="headerlink" title="subtree"></a>subtree</h2><p><code>git subtree add --squash --prefix=æ–‡ä»¶å¤¹å ä»“åº“url åˆ†æ”¯å</code></p>
<p>åˆ†å‰²</p>
<p><code>git subtree split --prefix=æ–‡ä»¶å¤¹å -b åˆ†æ”¯å</code></p>
<p>é…åˆremoteä½¿ç”¨</p>
<h1 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h1><table>
<thead>
<tr>
<th>subtree</th>
<th>submodule</th>
</tr>
</thead>
<tbody><tr>
<td>ç›¸å½“äºæ‹·è´æ–‡ä»¶ç”šè‡³commitåˆ°å½“å‰ä»“åº“</td>
<td>ç›¸å½“äºåªè®°å½•äº†å¦ä¸€ä¸ªä»“åº“çš„æŸä¸ªæäº¤çš„æŒ‡é’ˆ</td>
</tr>
<tr>
<td>å› æ­¤ pullå®¹æ˜“pushéš¾</td>
<td>pushå®¹æ˜“pulléš¾</td>
</tr>
</tbody></table>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">https://git-scm.com/book/en/v2/Git-Tools-Submodules</a></p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v1/Git-Tools-Subtree-Merging">https://git-scm.com/book/en/v1/Git-Tools-Subtree-Merging</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/19-08-30-vuerouter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/19-08-30-vuerouter/" class="post-title-link" itemprop="url">vue router æºç é˜…è¯»</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2019-08-30 11:20:14" itemprop="dateCreated datePublished" datetime="2019-08-30T11:20:14+08:00">2019-08-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-02-05 11:23:06" itemprop="dateModified" datetime="2023-02-05T11:23:06+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/frontend/" itemprop="url" rel="index"><span itemprop="name">frontend</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/frontend/vue2/" itemprop="url" rel="index"><span itemprop="name">vue2</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Blog/19-08-30-vuerouter/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="19-08-30-vuerouter/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>26k</span>
    </span>
    <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">æ‰€éœ€é–±è®€æ™‚é–“ &asymp;</span>
      <span>24 åˆ†é˜</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>æœ¬æ–‡å¯¹åº”ç‰ˆæœ¬ <code>638278b334199f17e052a54a0837c97624940c0c</code></p>
<blockquote>
<p>è·å¾—ä»£ç </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin https://github.com/vuejs/vue-router.git</span><br><span class="line">git fetch origin 638278b334199f17e052a54a0837c97624940c0c</span><br><span class="line">git reset --hard FETCH_HEAD</span><br></pre></td></tr></table></figure>

<h1 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h1><p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/mixins.html">https://cn.vuejs.org/v2/guide/mixins.html</a></p>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/plugins.html">https://cn.vuejs.org/v2/guide/plugins.html</a></p>
<h1 id="æ€»è§ˆ"><a href="#æ€»è§ˆ" class="headerlink" title="æ€»è§ˆ"></a>æ€»è§ˆ</h1><table>
<thead>
<tr>
<th align="right">è¡Œæ•°</th>
<th align="left">æ–‡ä»¶</th>
</tr>
</thead>
<tbody><tr>
<td align="right">262</td>
<td align="left"><a href="#install-js">index.js</a></td>
</tr>
<tr>
<td align="right">200</td>
<td align="left"><a href="#create-matcher-js">create-matcher.js</a></td>
</tr>
<tr>
<td align="right">353</td>
<td align="left"><a href="#base-js">history&#x2F;base.js</a></td>
</tr>
<tr>
<td align="right">22</td>
<td align="left"><a href="#errors-js">history&#x2F;errors.js</a></td>
</tr>
<tr>
<td align="right">69</td>
<td align="left"><a href="#abstract-js">history&#x2F;abstract.js</a></td>
</tr>
<tr>
<td align="right">80</td>
<td align="left"><a href="#html5-js">history&#x2F;html5.js</a></td>
</tr>
<tr>
<td align="right">157</td>
<td align="left"><a href="#hash-js">history&#x2F;hash.js</a></td>
</tr>
<tr>
<td align="right">190</td>
<td align="left"><a href="#link-js">components&#x2F;link.js</a></td>
</tr>
<tr>
<td align="right">124</td>
<td align="left"><a href="#view-js">components&#x2F;view.js</a></td>
</tr>
<tr>
<td align="right">52</td>
<td align="left"><a href="#install-js">install.js</a></td>
</tr>
<tr>
<td align="right">193</td>
<td align="left"><a href="#create-route-map-js">create-route-map.js</a></td>
</tr>
<tr>
<td align="right">6</td>
<td align="left"><a href="#misc-js">util&#x2F;misc.js</a></td>
</tr>
<tr>
<td align="right">95</td>
<td align="left"><a href="#query-js">util&#x2F;query.js</a></td>
</tr>
<tr>
<td align="right">3</td>
<td align="left"><a href="#dom-js">util&#x2F;dom.js</a></td>
</tr>
<tr>
<td align="right">25</td>
<td align="left"><a href="#warn-js">util&#x2F;warn.js</a></td>
</tr>
<tr>
<td align="right">152</td>
<td align="left"><a href="#scroll-js">util&#x2F;scroll.js</a></td>
</tr>
<tr>
<td align="right">35</td>
<td align="left"><a href="#params-js">util&#x2F;params.js</a></td>
</tr>
<tr>
<td align="right">132</td>
<td align="left"><a href="#route-js">util&#x2F;route.js</a></td>
</tr>
<tr>
<td align="right">64</td>
<td align="left"><a href="#location-js">util&#x2F;location.js</a></td>
</tr>
<tr>
<td align="right">22</td>
<td align="left"><a href="#state-key-js">util&#x2F;state-key.js</a></td>
</tr>
<tr>
<td align="right">18</td>
<td align="left"><a href="#async-js">util&#x2F;async.js</a></td>
</tr>
<tr>
<td align="right">42</td>
<td align="left"><a href="#push-state-js">util&#x2F;push-state.js</a></td>
</tr>
<tr>
<td align="right">74</td>
<td align="left"><a href="#path-js">util&#x2F;path.js</a></td>
</tr>
<tr>
<td align="right">108</td>
<td align="left"><a href="#resolve-components-js">util&#x2F;resolve-components.js</a></td>
</tr>
</tbody></table>
<p>æ€»å…±2478è¡Œ </p>
<h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">â”œâ”€â”€ components</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ link.js æ§åˆ¶urlæ˜¾ç¤º</span><br><span class="line">â”‚Â Â  â””â”€â”€ view.js æ§åˆ¶é¡µé¢æ¸²æŸ“</span><br><span class="line">â”œâ”€â”€ create-matcher.js è·¯ç”±åŒ¹é…</span><br><span class="line">â”œâ”€â”€ create-route-map.js</span><br><span class="line">â”œâ”€â”€ history</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ abstract.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ base.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ errors.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ hash.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ html5.js</span><br><span class="line">â”œâ”€â”€ index.js åŒ…å« VueRouter ç±»</span><br><span class="line">â”œâ”€â”€ install.js æ—¥å¸¸mixin</span><br><span class="line">â””â”€â”€ util</span><br><span class="line">    â”œâ”€â”€ async.js</span><br><span class="line">    â”œâ”€â”€ dom.js</span><br><span class="line">    â”œâ”€â”€ location.js</span><br><span class="line">    â”œâ”€â”€ misc.js</span><br><span class="line">    â”œâ”€â”€ params.js</span><br><span class="line">    â”œâ”€â”€ path.js</span><br><span class="line">    â”œâ”€â”€ push-state.js</span><br><span class="line">    â”œâ”€â”€ query.js</span><br><span class="line">    â”œâ”€â”€ resolve-components.js</span><br><span class="line">    â”œâ”€â”€ route.js</span><br><span class="line">    â”œâ”€â”€ scroll.js</span><br><span class="line">    â”œâ”€â”€ state-key.js</span><br><span class="line">    â””â”€â”€ warn.js</span><br></pre></td></tr></table></figure>

<p>å›é¡¾é‚£ä¸ªåªæœ‰1100è¡Œå·¦å³çš„vuexæºç ï¼Œä½ å‘ç° é™¤äº†ä¸¤è€…éƒ½æœ‰<code>index.js</code>,å…¶å®ƒç›®å½•ç»“æ„å¤§ä¸ç›¸åŒäº†</p>
<h1 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h1><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€æ®µä»£ç ï¼Œæœ€å¥½å…ˆäº†è§£å®ƒçš„åŠŸèƒ½ï¼Œæ‰€ä»¥æ²¡æœ‰ç”¨è¿‡vue-routerçš„å»ºè®®å…ˆç…§ç€tutorialçŸ¥é“å®ƒå¤§æ¦‚çš„åŠŸèƒ½</p>
<p>ç„¶åçœ‹çœ‹æºç é‡Œçš„demo:</p>
<p>åœ¨<code>npm install</code>å <code>PORT=8085 npm run dev</code>å³å¯åœ¨<code>localhost:8085</code>ä¸ŠæŸ¥çœ‹ï¼ŒæŠŠä¸Šé¢æ¯ä¸ªexampleéƒ½çœ‹ä¸€çœ‹</p>
<p>ç„¶åå°±å¯ä»¥çœ‹çœ‹flowæ–‡ä»¶å¤¹é‡Œçš„ï¼Œä¹Ÿä¸é•¿,â€™ç±»â€™çš„æ•°é‡ä¹Ÿä¸å¤šï¼Œé€šè¿‡é˜…è¯»flowçš„æ–‡ä»¶ï¼Œä½ å¯ä»¥å¯¹ æ•´ä¸ªrouteræœ‰ä¸ªå°è±¡</p>
<p>ä»ä»£ç ä½¿ç”¨ä¸Šçœ‹</p>
<ul>
<li>å®ä¾‹ç±»router</li>
<li>é…ç½®è·¯å¾„ å’Œ å¯¹åº”component</li>
<li>é¡µé¢<code>&lt;router-view&gt;</code>,<code>&lt;router-link&gt;</code> ä»¥åŠ aæ ‡ç­¾ç­‰è·³è½¬</li>
<li>Vue.use(VueRouter) &#x2F;&#x2F; æ³¨å†Œæ’ä»¶</li>
<li>new Vue({routerä¼ å…¥å®ä¾‹})</li>
</ul>
<p>thisä¸Šä¼šæœ‰<code>$route</code>å’Œ<code>$router</code></p>
<h1 id="src-x2F"><a href="#src-x2F" class="headerlink" title="src&#x2F;"></a>src&#x2F;</h1><h2 id="ä»£ç é˜…è¯»"><a href="#ä»£ç é˜…è¯»" class="headerlink" title="ä»£ç é˜…è¯»"></a>ä»£ç é˜…è¯»</h2><ol>
<li>å…ˆçœ‹<a href="#install-js">install.js</a>,è°ƒç”¨<code>Vue.mixin</code> æ³¨å…¥</li>
<li>ç„¶å<a href="#index-js">index.js</a>, çœ‹å®Œè¿™ä¸€éƒ¨åˆ†åŸºæœ¬ å°±å¤§æ¦‚çœ‹åˆ°äº† ä¸»è¦æ˜¯é XXXHistoryæ¥ å®ç° <code>this.history</code>ç„¶åæ–¹æ³• ä¸å°‘åªæ˜¯å¯¹ <code>this.history</code>çš„æ–¹æ³•è½¬å‘</li>
<li>æ—¢ç„¶çŸ¥é“äº†ä¸»è¦æ˜¯XXXHistoryæ¥å®ç°ï¼Œé‚£ä¹ˆ åè¿‡æ¥ å…ˆæŒ‰ç…§é¡ºåºçœ‹<a href="#util">util</a>æ–‡ä»¶å¤¹,ä¼´éšç€testé‡Œçš„æµ‹è¯•ç”¨ä¾‹çœ‹å®Œutilçš„ä»£ç ,æŠŠå¤§å¤šä»£ç çœ‹æ‡‚å³å¯ï¼Œå°‘éƒ¨åˆ†æ¯”è¾ƒå¤æ‚ä¹Ÿæ²¡æœ‰æµ‹è¯•ç”¨ä¾‹çš„å¤§è‡ªçœ‹çœ‹</li>
<li>ç„¶åçœ‹<code>history</code>çš„ä»£ç ,é¡ºåºå°±<a href="#errors-js">errors.js</a> ,<a href="#base-js">base.js</a>,æœ€å <code>abstract/hash/html5</code>è¿™ä¸‰ä¸ªä»»æ„é¡ºåº</li>
<li>ç„¶åæ˜¯ä¸¤ä¸ª<code>create-*.js</code>ï¼Œå·¥å…·äºº å·¥å…·å‡½æ•°</li>
<li>æœ€åçœ‹ä¸¤ä¸ª<code>components</code></li>
</ol>
<p><strong>ä¸‹é¢ç›®å½•æ˜¯æŒ‰å­—å…¸åºæ’åˆ—çš„,ä¸æ˜¯æŒ‰ç…§é˜…è¯»é¡ºåº</strong></p>
<h2 id="components"><a href="#components" class="headerlink" title="components"></a>components</h2><h3 id="link-js"><a href="#link-js" class="headerlink" title="link.js"></a>link.js</h3><p>emmm, <code>noop = ()=&gt;&#123;&#125;</code></p>
<p>æ‰€ä»¥ ä¹Ÿå°±ä¼šæƒ³åˆ°è¯´ ï¼Œæ˜¯ å‡½æ•°å†… å¢åŠ ä¸€å †ifæ¥å¤„ç† æœ‰å€¼ æ— å€¼ ç©ºå€¼ï¼Œè¿˜æ˜¯è¯´ å¼ºè¡Œè¦æ±‚ä¼ å…¥ç¬¦åˆæ ¼å¼,è¿™ä¸¤ç§æ–¹å¼ å¦‚ä½•é€‰æ‹©</p>
<p>ä¹Ÿå°±æ˜¯ renderå‡½æ•°</p>
<p>å¯ä»¥çœ‹åˆ° æœ‰ä» åˆå§‹åŒ–çš„optionsä¸­ è¯»å– linkActiveClass&#x2F;linkExactActiveClassç”¨ä»€ä¹ˆ æˆ–è€…ç”¨é»˜è®¤çš„<code>router-link-active</code>&#x2F;<code>router-link-exact-active</code></p>
<p>è¿™é‡Œå®ç°äº†ä¸€ä¸ª <code>guardEvent(e)</code> ä¸ä¼šæ‹¦æˆª <code>metaKey,altKey,ctrlKey,shiftKey</code>ç­‰ç­‰</p>
<p>å½“æ‹¦æˆªæ—¶ï¼Œæ‰§è¡Œreplaceæˆ–è€…push</p>
<p>å®šä¹‰å˜é‡oné…ç½®äº†clickå’Œ ä¼ å…¥çš„eventæˆ–eventæ•°ç»„é‡Œæ‰€æœ‰äº‹ä»¶ è°ƒç”¨ handlerä¹Ÿå°±æ˜¯ guardEvent</p>
<p>è¿™é‡Œé€šè¿‡ <code>this.$scopedSlots.default(&#123;</code> æ‹¿å»é»˜è®¤slot</p>
<p>ç„¶åå¯¹å®ƒæ¸²æŸ“ï¼Œ è¿™é‡Œåˆå¯ä»¥çœ‹åˆ° å¦‚æœæœ‰å¤šä¸ªdefault slot,åœ¨productionæ—¶ä¼šæŠ¥warn</p>
<p>ç„¶å propsçš„tagé»˜è®¤æ˜¯â€™aâ€™æ ‡ç­¾ï¼Œ</p>
<p>å¦‚æœæ˜¯ <code>tag==&#39;a&#39;</code>é‚£ä¹ˆ ç»‘ä¸Š<code>on</code>å’Œ<code>attrs</code></p>
<p>å¦‚æœä¸æ˜¯<code>tag==&#39;a&#39;</code> åˆ™<code>// find the first &lt;a&gt; child and apply listener and href</code></p>
<p><code>const a = findAnchor(this.$slots.default)</code> é€’å½’ æ‰¾ç¬¬ä¸€ä¸ª achild</p>
<p>å¦‚æœæ²¡æ‰¾åˆ°<code>data.on = on;</code></p>
<p>æœ€å è°ƒç”¨ <code>h(this.tag, dataåŒ…å«äº†on class ç­‰ç­‰, this.$slots.default)</code> </p>
<p>å…¶ä¸­æä¾› çš„ä¸¤ä¸ªè¾…åŠ©å‡½æ•° <code>guardEvent</code>å’Œ<code>findAnchor</code>åˆ†åˆ«æ—¶ ç”¨æ¥ æ‹¦æˆªé»˜è®¤ aæ ‡ç­¾äº‹ä»¶å’Œ æ·±æœæ‰¾åˆ°é¦–ä¸ªaæ ‡ç­¾çš„</p>
<h3 id="view-js"><a href="#view-js" class="headerlink" title="view.js"></a>view.js</h3><p>ä¹Ÿå°±æ˜¯ æ¸²æŸ“htmlä¸Šçš„ <code>RouterView</code> æˆ–è€…è¯´<code>&lt;router-view&gt;</code></p>
<p>functional:true</p>
<p>æ„å‘³ç€ æ²¡æœ‰å“åº”å¼æ•°æ®ï¼Œæ²¡æœ‰thisä¸Šä¸‹æ–‡</p>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/render-function.html#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6">https://cn.vuejs.org/v2/guide/render-function.html#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6</a></p>
<p>æ¥å—ä¸€ä¸ªprops, </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name</span>: &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">  <span class="attr">default</span>: <span class="string">&#x27;default&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æ¥å—çš„render ä¹Ÿå’Œ linkçš„ä¸ä¸€æ ·,linkçš„æ˜¯ <code>render(h)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">render (_, &#123; props, children, parent, data &#125;) &#123;</span><br></pre></td></tr></table></figure>

<p>ç»™devtoolsç”¨çš„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// used by devtools to display a router-view badge</span></span><br><span class="line">data.<span class="property">routerView</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>å› ä¸ºæ²¡æœ‰this,æ²¡æœ‰æ¥å— h ï¼Œè¿™é‡Œæ˜¯é€šè¿‡ <code>h = parent.$createElement</code></p>
<p>æ­¤å¤– <code>$route</code>,<code>_routerViewCache</code>ä¹Ÿæ˜¯ä» parentæ‹¿çš„ </p>
<p>é€šè¿‡ æ¯”è¾ƒ <code>parent == parent._routerRoot</code> æ¥çœ‹parentæ˜¯å¦ä¸ºæ ¹èŠ‚ç‚¹,å¹¶é€’å½’å‘ä¸Šæ‰¾æ ¹èŠ‚ç‚¹</p>
<p>å¦‚æœ æŸä¸ªç¥–å…ˆä¸Šæœ‰<code>parent.$vnode.data.routerView</code> é‚£ä¹ˆ <code>æ·±åº¦è®¡æ•°++</code></p>
<p>å¦‚æœ æŸä¸ªç¥–å…ˆä¸Šæœ‰<code>parent.$vnode.data.keepAlive</code>ä¸”<code>parent._inactive</code> é‚£ä¹ˆ inactiveæ ‡è¯†ä¸º true</p>
<p><code>data.routerViewDepth = æ·±åº¦è®¡æ•°</code></p>
<p>å¦‚æœéæ´»è·ƒ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (inactive) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">h</span>(cache[name], data, children)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ <code>$route.matched[æ·±åº¦]</code> å½“å‰çš„è·¯ç”±çš„matchedæ•°ç»„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> matched = route.<span class="property">matched</span>[depth]</span><br><span class="line"><span class="comment">// render empty node if no matched route</span></span><br><span class="line"><span class="keyword">if</span> (!matched) &#123;</span><br><span class="line">  cache[name] = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">h</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´æ–°cacheæŒ‡é’ˆ</p>
<p><code>const component = cache[name] = matched.components[name]</code></p>
<p>ä¹Ÿå°±æ˜¯ æˆ‘ä»¬åœ¨<code>src/install.js</code>ä¸­çœ‹åˆ°çš„ <code>registerRouteInstance</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// attach instance registration hook</span></span><br><span class="line"><span class="comment">// this will be called in the instance&#x27;s injected lifecycle hooks</span></span><br><span class="line">data.<span class="property">registerRouteInstance</span> = <span class="function">(<span class="params">vm, val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// val could be undefined for unregistration</span></span><br><span class="line">  <span class="keyword">const</span> current = matched.<span class="property">instances</span>[name]</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    (val &amp;&amp; current !== vm) ||</span><br><span class="line">    (!val &amp;&amp; current === vm)</span><br><span class="line">  ) &#123;</span><br><span class="line">    matched.<span class="property">instances</span>[name] = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨å†Œ prepatch å’Œ initçš„é’©å­,è¿™ä¸ªä¸€ä¸ªåº”è¯¥æ˜¯ vueç›¸å…³çš„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// also register instance in prepatch hook</span></span><br><span class="line"><span class="comment">// in case the same component instance is reused across different routes</span></span><br><span class="line">;(data.<span class="property">hook</span> || (data.<span class="property">hook</span> = &#123;&#125;)).<span class="property">prepatch</span> = <span class="function">(<span class="params">_, vnode</span>) =&gt;</span> &#123;</span><br><span class="line">  matched.<span class="property">instances</span>[name] = vnode.<span class="property">componentInstance</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// register instance in init hook</span></span><br><span class="line"><span class="comment">// in case kept-alive component be actived when routes changed</span></span><br><span class="line">data.<span class="property">hook</span>.<span class="property">init</span> = <span class="function">(<span class="params">vnode</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (vnode.<span class="property">data</span>.<span class="property">keepAlive</span> &amp;&amp;</span><br><span class="line">    vnode.<span class="property">componentInstance</span> &amp;&amp;</span><br><span class="line">    vnode.<span class="property">componentInstance</span> !== matched.<span class="property">instances</span>[name]</span><br><span class="line">  ) &#123;</span><br><span class="line">    matched.<span class="property">instances</span>[name] = vnode.<span class="property">componentInstance</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åªæœåˆ°äº† <code>https://github.com/vuejs/vue/issues/8657</code></p>
<p>æœ€åæ˜¯ ä¼ é€’<code>matched.props[name]</code>çš„å†…å®¹</p>
<p>å…·ä½“ä»£ç å°±æ˜¯ æŠŠåœ¨data.propsä¸­,ä¸åœ¨ components.propsä¸­çš„ keyä»¥åŠå¯¹åº”çš„å€¼æ¬è¿åˆ° data.attrsé‡Œ</p>
<p>æœ€å <code>return h(component, data, children)</code></p>
<blockquote>
<p>å±‚çº§<code>router-view</code>å®ç°åŸç†</p>
</blockquote>
<p><code>index.js -&gt; createMatcher-&gt; createRoute -&gt; .matched = record ? formatMatch(record) : []</code></p>
<p>å…¶ä¸­recordæ˜¯ RouteRecordç±»å‹,formatMatché€šè¿‡ é€’å½’ parent æ¥æŠŠ å®ƒå˜ æ•°ç»„</p>
<p>å…¶ä¸­parentçš„æ¥æº æ˜¯<code>create-route-map</code>ä¸­ <code>addRouteRecord</code>é€’å½’è®¡ç®—çš„</p>
<p>ç„¶å åœ¨ è§£æ å…ƒç´ æ—¶ å¯ä»¥é€šè¿‡å½“å‰ <code>$route.matched[depth]</code>ç›´æ¥è·å¾—å®ä¾‹</p>
<h2 id="create-matcher-js"><a href="#create-matcher-js" class="headerlink" title="create-matcher.js"></a>create-matcher.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createMatcher</span> (</span><br><span class="line">  <span class="attr">routes</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteConfig</span>&gt;,</span><br><span class="line">  <span class="attr">router</span>: <span class="title class_">VueRouter</span></span><br><span class="line">): <span class="title class_">Matcher</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; pathList, pathMap, nameMap &#125; = <span class="title function_">createRouteMap</span>(routes)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">match</span> (</span><br><span class="line">  <span class="attr">raw</span>: <span class="title class_">RawLocation</span>,</span><br><span class="line">  currentRoute?: <span class="title class_">Route</span>,</span><br><span class="line">  redirectedFrom?: <span class="title class_">Location</span></span><br><span class="line">): <span class="title class_">Route</span> &#123;</span><br></pre></td></tr></table></figure>

<p><code>åŒ¹é…name(nameMapæ‰¾) -&gt; åŒ¹é… location.path(pathList + pathMap) -&gt; create ä¸€ä¸ªæ–°çš„Route</code></p>
<p>è¿™é‡Œç”¨list ä¹Ÿå¯ä»¥çœ‹å‡º è¿™é‡ŒæœŸæœ›çš„ä¸ªæ•°åº”è¯¥è¦å°(?)ï¼Œå¦åˆ™æ•ˆç‡O(n)å¤§äº†æ€§èƒ½ä¼šè¾ƒå·®?(ä¸è¿‡O(n*æ“ä½œ)ä¼¼ä¹1000ä¸ªä¹Ÿä¸ä¼šå¾ˆä¹…? åæ­£è¿™ä¹Ÿä¸æ˜¯é¢‘ç¹æ“ä½œ?æ‰€ä»¥ä¸ç”¨åœ¨æ„?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">redirect</span> (</span><br><span class="line">  <span class="attr">record</span>: <span class="title class_">RouteRecord</span>,</span><br><span class="line">  <span class="attr">location</span>: <span class="title class_">Location</span></span><br><span class="line">): <span class="title class_">Route</span> &#123;</span><br></pre></td></tr></table></figure>

<p>åŒæ ·æ˜¯<code>redirectï¼ˆrecord.redirectï¼‰</code>ä¸­çš„ nameåŒ¹é… pathåŒ¹é…</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">alias</span> (</span><br><span class="line">  <span class="attr">record</span>: <span class="title class_">RouteRecord</span>,</span><br><span class="line">  <span class="attr">location</span>: <span class="title class_">Location</span>,</span><br><span class="line">  <span class="attr">matchAs</span>: string</span><br><span class="line">): <span class="title class_">Route</span> &#123;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡åŒ¹é… <code>fillParams(matchAs, location.params,...)</code> åˆ°path åŒæ ·è¿”å›Route</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">_createRoute</span> (</span><br><span class="line">  <span class="attr">record</span>: ?<span class="title class_">RouteRecord</span>,</span><br><span class="line">  <span class="attr">location</span>: <span class="title class_">Location</span>,</span><br><span class="line">  redirectedFrom?: <span class="title class_">Location</span></span><br><span class="line">): <span class="title class_">Route</span> &#123;</span><br></pre></td></tr></table></figure>

<p>å†è°ƒç”¨ <code>çœŸçš„createRoute</code> æˆ–è€… è°ƒä¸Šé¢çš„ <code>redirect/alias</code> åªè¦ <code>record.redirect/matchAs</code>å­˜åœ¨ï¼Œ ä¹Ÿå°±æ˜¯ å¯èƒ½äº§ç”Ÿæ— é™å¾ªç¯?çš„äº† </p>
<h2 id="create-route-map-js"><a href="#create-route-map-js" class="headerlink" title="create-route-map.js"></a>create-route-map.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createRouteMap</span> (</span><br><span class="line">  <span class="attr">routes</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteConfig</span>&gt;,</span><br><span class="line">  oldPathList?: <span class="title class_">Array</span>&lt;string&gt;,</span><br><span class="line">  oldPathMap?: <span class="title class_">Dictionary</span>&lt;<span class="title class_">RouteRecord</span>&gt;,</span><br><span class="line">  oldNameMap?: <span class="title class_">Dictionary</span>&lt;<span class="title class_">RouteRecord</span>&gt;</span><br><span class="line">): &#123;</span><br><span class="line">  <span class="attr">pathList</span>: <span class="title class_">Array</span>&lt;string&gt;,</span><br><span class="line">  <span class="attr">pathMap</span>: <span class="title class_">Dictionary</span>&lt;<span class="title class_">RouteRecord</span>&gt;,</span><br><span class="line">  <span class="attr">nameMap</span>: <span class="title class_">Dictionary</span>&lt;<span class="title class_">RouteRecord</span>&gt;</span><br><span class="line">&#125; &#123;</span><br></pre></td></tr></table></figure>

<p>è¿˜ä¼šè‡ªåŠ¨æŠŠ <code>&#39;*&#39;</code> wildcard routes æ”¾åˆ°æœ€å</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addRouteRecord</span> (</span><br><span class="line">  <span class="attr">pathList</span>: <span class="title class_">Array</span>&lt;string&gt;,</span><br><span class="line">  <span class="attr">pathMap</span>: <span class="title class_">Dictionary</span>&lt;<span class="title class_">RouteRecord</span>&gt;,</span><br><span class="line">  <span class="attr">nameMap</span>: <span class="title class_">Dictionary</span>&lt;<span class="title class_">RouteRecord</span>&gt;,</span><br><span class="line">  <span class="attr">route</span>: <span class="title class_">RouteConfig</span>,</span><br><span class="line">  parent?: <span class="title class_">RouteRecord</span>,</span><br><span class="line">  matchAs?: string</span><br><span class="line">) &#123;</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆ å…¶ä»–åœ°æ–¹ éƒ½æ˜¯ç›´æ¥ ç”¨true&#x2F;false,è¿™è¾¹ <code>route.caseSensitive</code>è¦åˆ¤æ–­<code>typeof === &#39;boolean&#39;</code></p>
<p>é€’å½’å¯¹<code>.children</code>èŠ‚ç‚¹è°ƒç”¨ addRouteRecord</p>
<p>è¿™ä¸¤ä¸ªå‡½æ•° ä¸»è¦æ˜¯å°è£… å¯¹ ä¼ å…¥çš„ pathList,pathMap,nameMap è¿™äº› è¿›è¡Œ æ·»åŠ </p>
<p>å› ä¸ºå¤„ç†äº†æ²¡æœ‰ä¼ å€¼çš„æƒ…å†µï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨äºåˆå§‹åŒ–</p>
<h2 id="history"><a href="#history" class="headerlink" title="history"></a>history</h2><h3 id="abstract-js"><a href="#abstract-js" class="headerlink" title="abstract.js"></a>abstract.js</h3><p>æ­£å¦‚å…¶å,æ‰€æœ‰æµè§ˆå™¨ä¸Šåœ°å€æ ,urlï¼Œscrolléƒ½æ²¡æœ‰äº†,å–ä»£çš„ æ˜¯ å®ç°äº† <code>stack:Array&lt;Route&gt;</code>å’Œ<code>index:number</code></p>
<h3 id="base-js"><a href="#base-js" class="headerlink" title="base.js"></a>base.js</h3><p>æ˜¯æ•´ä¸ªæºç ä¸­æœ€å¤§çš„å•ä¸ªæ–‡ä»¶äº†, <code>hash/html5/abstract</code> è¿™ä¸‰ä¸ª éƒ½æ˜¯åŸºäºbaseå®ç°çš„,åè¿‡æ¥æƒ³åœ¨ index.jsä¸­æˆ‘ä»¬æœ‰çœ‹åˆ°æ ¹æ®æ¨¡å¼ä¸åŒ æŠŠ<code>this.history</code> èµ‹äºˆäº†ä¸åŒçš„å€¼ ä¹Ÿå°±ä¼šæƒ³è¦è¿™ä¸‰ä¸ªæœ‰å…±åŒçš„åŸºç±»</p>
<p>å¯¹å¤–åªæä¾›ä¸€ä¸ªHistoryç±»</p>
<p>è¿™äº› åŠ å· æ˜¯å¹²å˜›çš„,æˆ‘çœ‹flowçš„æ–‡æ¡£åªçœ‹åˆ° è¯´ readonly,æ˜¯æˆ‘æ²¡æœ‰æ‰¾åˆ°æ­£ç¡®çš„ä½ç½®å—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// implemented by sub-classes</span></span><br><span class="line">+<span class="attr">go</span>: <span class="function">(<span class="params">n: number</span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">+<span class="attr">push</span>: <span class="function">(<span class="params">loc: RawLocation</span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">+<span class="attr">replace</span>: <span class="function">(<span class="params">loc: RawLocation</span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">+<span class="attr">ensureURL</span>: <span class="function">(<span class="params">push?: boolean</span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">+<span class="attr">getCurrentLocation</span>: <span class="function">() =&gt;</span> string</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ–</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">constructor</span> (<span class="attr">router</span>: <span class="title class_">Router</span>, <span class="attr">base</span>: ?string) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">router</span> = router</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">base</span> = <span class="title function_">normalizeBase</span>(base)</span><br><span class="line">  <span class="comment">// start with a route object that stands for &quot;nowhere&quot;</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">current</span> = <span class="variable constant_">START</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pending</span> = <span class="literal">null</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">ready</span> = <span class="literal">false</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">readyCbs</span> = []</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">readyErrorCbs</span> = []</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">errorCbs</span> = []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>listen(cb)</code> ç®€å•ç²—æš´ ç›´æ¥ <code>this.cb=cb</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onReady (<span class="attr">cb</span>: <span class="title class_">Function</span>, <span class="attr">errorCb</span>: ?<span class="title class_">Function</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå½“å‰readyåŒæ­¥æ‰§è¡Œcb,å¦åˆ™<code>readyCbs</code>æ•°ç»„pushè¿›cb,é”™è¯¯å›è°ƒpushè¿›<code>readyErrorCbs</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onError (<span class="attr">errorCb</span>: <span class="title class_">Function</span>) &#123;<span class="string">`</span></span><br></pre></td></tr></table></figure>

<p>pushè¿›<code>errorCbs</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">transitionTo (</span><br><span class="line">  <span class="attr">location</span>: <span class="title class_">RawLocation</span>,</span><br><span class="line">  onComplete?: <span class="title class_">Function</span>,</span><br><span class="line">  onAbort?: <span class="title class_">Function</span></span><br><span class="line">) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨ <code>confirmTransition</code></p>
<p>æˆåŠŸæ‰§è¡Œ<code>this.updateRoute(route)</code> &amp; <code>onComplete(route)</code> &amp; <code>this.ensureURL()</code>è°ƒç”¨æ‰€æœ‰ <code>readyCbs</code> Once</p>
<p>å¤±è´¥<code>onAbort(err)</code> æ‰€æœ‰<code>readyErrorCbs</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">confirmTransition (<span class="attr">route</span>: <span class="title class_">Route</span>, <span class="attr">onComplete</span>: <span class="title class_">Function</span>, onAbort?: <span class="title class_">Function</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç›®æ ‡å’Œå½“å‰Routeä¸€æ ·, è§¦å‘ <code>NavigationDuplicated(route)</code>,è°ƒç”¨<code>errorCbs</code>å† è°ƒç”¨<code>onAbort(err)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; updated, deactivated, activated &#125; = <span class="title function_">resolveQueue</span>(</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">current</span>.<span class="property">matched</span>,</span><br><span class="line">  route.<span class="property">matched</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">queue</span>: <span class="title class_">Array</span>&lt;?<span class="title class_">NavigationGuard</span>&gt; = [].<span class="title function_">concat</span>(</span><br><span class="line">  <span class="comment">// in-component leave guards</span></span><br><span class="line">  <span class="title function_">extractLeaveGuards</span>(deactivated),</span><br><span class="line">  <span class="comment">// global before hooks</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">router</span>.<span class="property">beforeHooks</span>,</span><br><span class="line">  <span class="comment">// in-component update hooks</span></span><br><span class="line">  <span class="title function_">extractUpdateHooks</span>(updated),</span><br><span class="line">  <span class="comment">// in-config enter guards</span></span><br><span class="line">  activated.<span class="title function_">map</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">beforeEnter</span>),</span><br><span class="line">  <span class="comment">// async components</span></span><br><span class="line">  <span class="title function_">resolveAsyncComponents</span>(activated)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>è®¾è®¡äº†ä¸€ä¸ª<code>iterator</code>å‡½æ•°,ç”¨<code>runQueue</code>å¯¹ä¸Šé¢<code>queue</code>è¿›è¡Œæ‰§è¡Œ</p>
<p>çœŸæ˜¯è‰¹äº† å°±éè¦é‡å¤ä½¿ç”¨å˜é‡åå—ï¼Ÿï¼Ÿ è¿™é‡Œqueue</p>
<p>ä¸Šé¢çš„æ¯ä¸ªå¦‚æœéƒ½æˆåŠŸäº†ï¼Œé‚£ä¹ˆæ‰§è¡Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">extractEnterGuards</span>(activated, postEnterCbs, <span class="function">()=&gt;</span> <span class="variable language_">this</span>.<span class="property">current</span> === route)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">router</span>.<span class="property">resolveHooks</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œ å„ç§è°ƒç”¨ï¼Œä¹Ÿå°±æ„å‘³ç€å¯èƒ½ ä¸åŒæ­¥ å—? åæ­£è¿™è¾¹æ˜¯ç”¨ pendingåœ¨ åš è·³è½¬å‰å’Œè·³è½¬åçš„routeä¸€æ ·ä¿è¯</p>
<p>å¦‚æœä¸Šé¢å†æˆåŠŸåˆ™ å›è°ƒ<code>onComplete</code> å’Œ å¼‚æ­¥å›è°ƒæ‰€æœ‰ <code>postEnterCbs</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">updateRoute (<span class="attr">route</span>: <span class="title class_">Route</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´æ–°<code>this.current</code> å›è°ƒ<code>this.cb</code>,è°ƒç”¨æ‰€æœ‰<code>afterHooks</code></p>
<blockquote>
<p>å…¶å®ƒè‡ªäº§è‡ªç”¨å‡½æ•°</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">normalizeBase</span> (<span class="attr">base</span>: ?string): string &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>&#x2F;&#x2F; è¿™é‡Œæ˜¯ä¸æ˜¯æ¼å¤„ç†äº†<code>file://</code>å¼€å¤´çš„ å¯¹åº”ä¹‹å‰æœ‰ä¸ªbugfixç±»å‹</p>
<p>ä¼ äº†baseå€¼å°±å‰é¢åŠ ä¸ª&#x2F;ï¼Œå¦åˆ™æœ‰<code>&lt;base&gt;</code> tagå°±å– å…¶ä¸­baseçš„éƒ¨åˆ†ï¼Œå¦åˆ™å°±ç©º</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">resolveQueue</span> (</span><br><span class="line">  <span class="attr">current</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecord</span>&gt;,</span><br><span class="line">  <span class="attr">next</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecord</span>&gt;</span><br><span class="line">): &#123;</span><br><span class="line">  <span class="attr">updated</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecord</span>&gt;,</span><br><span class="line">  <span class="attr">activated</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecord</span>&gt;,</span><br><span class="line">  <span class="attr">deactivated</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecord</span>&gt;</span><br><span class="line">&#125; &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰¾ç¬¬ä¸€ä¸ªcurrentå’Œnextä¸­ä¸ä¸€æ ·çš„ï¼Œä¸‹æ ‡idx,è¿”å› </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">updated</span>: next.<span class="title function_">slice</span>(<span class="number">0</span>, idx),</span><br><span class="line">  <span class="attr">activated</span>: next.<span class="title function_">slice</span>(idx),</span><br><span class="line">  <span class="attr">deactivated</span>: current.<span class="title function_">slice</span>(idx)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">extractGuards</span> (</span><br><span class="line">  <span class="attr">records</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecord</span>&gt;,</span><br><span class="line">  <span class="attr">name</span>: string,</span><br><span class="line">  <span class="attr">bind</span>: <span class="title class_">Function</span>,</span><br><span class="line">  reverse?: boolean <span class="comment">// æ§åˆ¶æ˜¯è¿”å›çš„æ•°ç»„çš„é¡ºåº</span></span><br><span class="line">): <span class="title class_">Array</span>&lt;?<span class="title class_">Function</span>&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">extractGuard</span> (</span><br><span class="line">  <span class="attr">def</span>: <span class="title class_">Object</span> | <span class="title class_">Function</span>,</span><br><span class="line">  <span class="attr">key</span>: string</span><br><span class="line">): <span class="title class_">NavigationGuard</span> | <span class="title class_">Array</span>&lt;<span class="title class_">NavigationGuard</span>&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>æŠŠrecordsä¸­æ‰€æœ‰ <code>_Vue.extend(å…·ä½“å…ƒç´ ).options[name]</code>å¤„ç†ï¼Œå¦‚æœæ˜¯æ•°ç»„ å¯¹æ¯ä¸€ä¸ª bindï¼Œå¦‚æœéæ•°ç»„å•ä¸ªbind,æœ€å<code>flatten</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">extractLeaveGuards</span> (<span class="attr">deactivated</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecord</span>&gt;): <span class="title class_">Array</span>&lt;?<span class="title class_">Function</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">extractGuards</span>(deactivated, <span class="string">&#x27;beforeRouteLeave&#x27;</span>, bindGuard, <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">extractUpdateHooks</span> (<span class="attr">updated</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecord</span>&gt;): <span class="title class_">Array</span>&lt;?<span class="title class_">Function</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">extractGuards</span>(updated, <span class="string">&#x27;beforeRouteUpdate&#x27;</span>, bindGuard)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bindGuard</span> (<span class="attr">guard</span>: <span class="title class_">NavigationGuard</span>, <span class="attr">instance</span>: ?_Vue): ?<span class="title class_">NavigationGuard</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (instance) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">boundRouteGuard</span> () &#123;</span><br><span class="line">      <span class="keyword">return</span> guard.<span class="title function_">apply</span>(instance, <span class="variable language_">arguments</span>) <span class="comment">// è¿™é‡ŒæŠŠå‚æ•°`å¸¦`è¿‡å»</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">extractEnterGuards</span> (</span><br><span class="line"><span class="comment">//  å’Œä¸Šé¢åŒç†ç»‘å®šçš„æ˜¯ &#x27;beforeRouteEnter&#x27; å’Œ &#x27;bindEnterGuard&#x27;</span></span><br><span class="line">) </span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">bindEnterGuard</span> (</span><br><span class="line">  <span class="attr">guard</span>: <span class="title class_">NavigationGuard</span>,</span><br><span class="line">  <span class="attr">match</span>: <span class="title class_">RouteRecord</span>,</span><br><span class="line">  <span class="attr">key</span>: string,</span><br><span class="line">  <span class="attr">cbs</span>: <span class="title class_">Array</span>&lt;<span class="title class_">Function</span>&gt;,</span><br><span class="line">  <span class="attr">isValid</span>: <span class="function">() =&gt;</span> boolean</span><br><span class="line">): <span class="title class_">NavigationGuard</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>å¢åŠ å›è°ƒè°ƒç”¨poll</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">poll</span> (</span><br><span class="line">  <span class="attr">cb</span>: any, <span class="comment">// somehow flow cannot infer this is a function</span></span><br><span class="line">  <span class="attr">instances</span>: <span class="title class_">Object</span>,</span><br><span class="line">  <span class="attr">key</span>: string,</span><br><span class="line">  <span class="attr">isValid</span>: <span class="function">() =&gt;</span> boolean</span><br><span class="line">) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p><code>instances[key]._isBeingDestroyed</code>ä¸ºfalseæ—¶ è°ƒç”¨<code>cb(instances[key])</code> </p>
<p>è¿™é‡Œ ç”¨<code>isValid()</code>ä¹Ÿå°±æ˜¯ä¸Šé¢ä¼ å…¥çš„<code>this.current === route</code>+ <code>setTimeout(16ms)</code>æ¥åˆ¤æ–­è¦ä¸è¦è°ƒç”¨ poll</p>
<p>è¿™æ˜¯ä¸ºäº†é¡µé¢è·³è½¬äº† ä½†æ˜¯ instancesæ²¡æœ‰å®ä¾‹åŒ–å®Œæˆ æ‰€ä»¥ä¸åœå¼‚æ­¥å°è¯•?</p>
<h3 id="errors-js"><a href="#errors-js" class="headerlink" title="errors.js"></a>errors.js</h3><p>ä¸€ä¸ªé”™è¯¯ç±» NavigationDuplicated</p>
<p><code>//support IE9</code> emmm</p>
<h3 id="hash-js"><a href="#hash-js" class="headerlink" title="hash.js"></a>hash.js</h3><p>å’Œ html5,index ä¸€æ · éƒ½æ˜¯ç»§æ‰¿äºä¸Šé¢çš„ History</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// check history fallback deeplinking</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getHash</span> (): string &#123;</span><br><span class="line">  <span class="comment">// We can&#x27;t use window.location.hash here because it&#x27;s not</span></span><br><span class="line">  <span class="comment">// consistent across browsers - Firefox will pre-decode it!</span></span><br><span class="line">  <span class="keyword">let</span> href = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span></span><br><span class="line">  <span class="keyword">const</span> index = href.<span class="title function_">indexOf</span>(<span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">  <span class="comment">// empty path</span></span><br><span class="line">  <span class="keyword">if</span> (index &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">  href = href.<span class="title function_">slice</span>(index + <span class="number">1</span>)</span><br><span class="line">  <span class="comment">// decode the hash but not the search or hash</span></span><br><span class="line">  <span class="comment">// as search(query) is already decoded</span></span><br><span class="line">  <span class="comment">// https://github.com/vuejs/vue-router/issues/2708</span></span><br><span class="line">  <span class="keyword">const</span> searchIndex = href.<span class="title function_">indexOf</span>(<span class="string">&#x27;?&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (searchIndex &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> hashIndex = href.<span class="title function_">indexOf</span>(<span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (hashIndex &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">      href = <span class="built_in">decodeURI</span>(href.<span class="title function_">slice</span>(<span class="number">0</span>, hashIndex)) + href.<span class="title function_">slice</span>(hashIndex)</span><br><span class="line">    &#125; <span class="keyword">else</span> href = <span class="built_in">decodeURI</span>(href)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (searchIndex &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">      href = <span class="built_in">decodeURI</span>(href.<span class="title function_">slice</span>(<span class="number">0</span>, searchIndex)) + href.<span class="title function_">slice</span>(searchIndex)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> href</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>setupListeners()</code>è°ƒç”¨ <code>setupScroll()</code></p>
<p>ç›‘å¬<code>popstate</code>æˆ–è€…<code>hashchange</code> è§¦å‘ <code>transitionTo()</code></p>
<p>pushå’Œreplaceä¹Ÿéƒ½æ˜¯ è°ƒç”¨ <code>transitionTo()</code> å›è°ƒçš„æ—¶å€™ <code>push/replace Hash()</code>ç„¶ç„¶åhandleScroll, å’ŒonComplete(route)</p>
<h3 id="html5-js"><a href="#html5-js" class="headerlink" title="html5.js"></a>html5.js</h3><p>å’Œ hashä¸åŒçš„æ˜¯ï¼Œ åœ¨<code>constructor</code>é‡Œç›´æ¥ åˆå§‹åŒ–äº† ï¼Œæ¯”å¦‚<code>setupScroll()</code>å’Œ å¢åŠ <code>popstate</code>äº‹ä»¶è§¦å‘,è€Œä¸æ˜¯è®©index.jsè°ƒç”¨</p>
<p>åœ¨ è¿™é‡Œé»˜è®¤ pushStateå’ŒreplaceStateéƒ½æ˜¯å¯ä»¥ç”¨çš„</p>
<p>è¿™é‡Œæˆ‘åœ¨æƒ³ å› ä¸ºå…¼å®¹è€Œå†™çš„ä»£ç  å€¼å¾—å—ï¼Œç•™å¤šä¹…ï¼Œå¤šä¹…æŠ›å¼ƒå‘¢ï¼Ÿ</p>
<h2 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h2><p>importå¼•å…¥,ä¸ç”¨ç»†çœ‹ï¼Œæ€»ä¹‹æ˜¯å¼•å…¥ä¾èµ–çš„</p>
<blockquote>
<p>VueRouterç±»å®ç°</p>
</blockquote>
<p>æƒ³è¯´ è¿™ç§</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="attr">install</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="attr">version</span>: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="attr">app</span>: <span class="built_in">any</span>;</span><br><span class="line"><span class="attr">apps</span>: <span class="title class_">Array</span>&lt;<span class="built_in">any</span>&gt;;</span><br><span class="line"><span class="attr">ready</span>: <span class="built_in">boolean</span>;</span><br><span class="line"><span class="attr">readyCbs</span>: <span class="title class_">Array</span>&lt;<span class="title class_">Function</span>&gt;;</span><br><span class="line"><span class="attr">options</span>: <span class="title class_">RouterOptions</span>;</span><br><span class="line"><span class="attr">mode</span>: <span class="built_in">string</span>;</span><br><span class="line"><span class="attr">history</span>: <span class="title class_">HashHistory</span> | <span class="title class_">HTML5History</span> | <span class="title class_">AbstractHistory</span>;</span><br><span class="line"><span class="attr">matcher</span>: <span class="title class_">Matcher</span>;</span><br><span class="line"><span class="attr">fallback</span>: <span class="built_in">boolean</span>;</span><br><span class="line"><span class="attr">beforeHooks</span>: <span class="title class_">Array</span>&lt;?<span class="title class_">NavigationGuard</span>&gt;;</span><br><span class="line"><span class="attr">resolveHooks</span>: <span class="title class_">Array</span>&lt;?<span class="title class_">NavigationGuard</span>&gt;;</span><br><span class="line"><span class="attr">afterHooks</span>: <span class="title class_">Array</span>&lt;?<span class="title class_">AfterNavigationHook</span>&gt;;</span><br></pre></td></tr></table></figure>

<p>å†™æ³•å¯¹é˜…è¯»æ¥è¯´çœŸé¦™ï¼Œè¿™æ˜¯flowè¿˜æ˜¯ts æ¥ç€</p>
<ul>
<li>this.matcher &#x3D; createMatcher(options.routes || [], this) &#x2F;&#x2F; ç”¨æˆ·ä¼ å…¥çš„routes</li>
</ul>
<p>ä¸‰ç§ mode</p>
<p>â€˜hashâ€™(é»˜è®¤ åªè¯†åˆ«äº•å·åé¢çš„è·¯å¾„å‰é¢çš„å¿½ç•¥? window.location.hash),â€™historyâ€™,â€™abstractâ€™(æœåŠ¡ç«¯node)</p>
<p>åˆ†åˆ«è°ƒç”¨</p>
<ul>
<li>this.history &#x3D; new HTML5History(this, options.base)</li>
<li>this.history &#x3D; new HashHistory(this, options.base, this.fallback)</li>
<li>this.history &#x3D; new AbstractHistory(this, options.base)</li>
</ul>
<p>å®ä¾‹å¯¹å¤–æä¾›çš„æ–¹æ³• æ•´ç†å¦‚ä¸‹ </p>
<ul>
<li><p>match ( raw: RawLocation, current?: Route, redirectedFrom?: Location): Route<br> è½¬å‘äº†ä¸€ä¸‹&#96;this.matcher.match(â€¦)</p>
</li>
<li><p>get currentRoute (): ?Route å–çš„<code>this.history.current</code>çš„å†…å®¹</p>
</li>
<li><p>init (app: any &#x2F;* Vue component instance *&#x2F;) TODO æš‚æ—¶ä¸çŸ¥é“è¿™ä¸ªæ€ä¹ˆç”¨</p>
</li>
<li><p>beforeEach (fn: Function): Function</p>
</li>
<li><p>beforeResolve (fn: Function): Function</p>
</li>
<li><p>afterEach (fn: Function): Function<br>è¿™ä¸‰ä¸ª éƒ½æ˜¯iæŠŠå‡½æ•°æ³¨å†Œé€šè¿‡registerHookæ³¨å†Œåˆ°å¯¹åº”çš„XXXHooksæ•°ç»„ä¸­,è¿”å›çš„æ˜¯ä»æ•°ç»„ä¸­ç§»é™¤ä»–ä»¬çš„å‡½æ•° </p>
</li>
<li><p>onReady (cb: Function, errorCb?: Function)</p>
</li>
<li><p>onError (errorCb: Function)<br> è½¬å‘äº†<code>this.history</code>ä¸Šå¯¹åº”çš„æ–¹æ³•</p>
</li>
<li><p>push (location: RawLocation, onComplete?: Function, onAbort?: Function)</p>
</li>
<li><p>replace (location: RawLocation, onComplete?: Function, onAbort?: Function)<br> !onComplete ä¸” !onAbort ä¸” Promiseå¯ç”¨æ—¶ï¼Œè¿”å›promise,å¦åˆ™åŒæ­¥æ‰§è¡Œï¼Œéƒ½æ˜¯è°ƒç”¨<code>this.history.push/replace(...)</code></p>
</li>
<li><p>go (n: number)</p>
</li>
<li><p>back ()</p>
</li>
<li><p>forward ()<br> å¯¹<code>this.history.go(æ•°å€¼)</code>çš„è½¬å‘</p>
</li>
<li><p>getMatchedComponents (to?: RawLocation | Route): Array<any><br> é€šè¿‡å¯¹toè§£ææˆä¸€ä¸ªRoute,è·å–å…¶matchedä¸­çš„æ‰€æœ‰components</p>
</li>
<li><p>resolve (to: RawLocation,current?: Route,append?: boolean): { location: Location, route: Route, href: string, normalizedTo: Location, resolved: Route }<br> è¿™é‡Œ å®é™…åªæœ‰ä¸‰ä¸ªè¿”å›ï¼Œ å…¶ä¸­ locationå’ŒnormalizedToä¸€æ ·,resolved å’Œrouteä¸€æ ·ï¼Œ å¤šæœ€åä¸¤ä¸ª åªæ˜¯ä¸ºäº† å‘åå…¼å®¹</p>
</li>
<li><p>addRoutes (routes: Array<RouteConfig>)</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">matcher</span>.<span class="title function_">addRoutes</span>(routes)</span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">history</span>.<span class="property">current</span> !== <span class="variable constant_">START</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">history</span>.<span class="title function_">transitionTo</span>(<span class="variable language_">this</span>.<span class="property">history</span>.<span class="title function_">getCurrentLocation</span>())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ˜¯ä¸¤ä¸ªå·¥å…·å‡½æ•°</p>
<p>registerHook(list,fn),  æ³¨å†Œä¸€ä¸ªå‡½æ•°fnåˆ°list, è¿”å›å®ƒçš„ç§»é™¤å‡½æ•°,æ¦‚å¿µå°±æ˜¯ä»¥c++è§’åº¦çœ‹ä½œå‡½æ•°æŒ‡é’ˆå¯ä»¥æœï¼ŒåŒæ—¶é—®é¢˜å°±æ˜¯ï¼Œ æ²¡æœ‰é˜²æ­¢é‡å¤ï¼Œä¹Ÿå°±æ˜¯åŒä¸€ä¸ªå‡½æ•°å¯ä»¥ åŠ åˆ°listä¸¤æ¬¡ï¼Œè€Œç§»é™¤ æ¯æ¬¡åªä¼šç§»é™¤ä¸€ä¸ªï¼Œæ‰€ä»¥æ•´ä½“è¿˜æ˜¯åŸºäºå‡½æ•°æŒ‡é’ˆï¼Œå¹¶æ²¡æœ‰å®Œå…¨çš„å®ç° è¿”å›ç§»é™¤è‡ªå·±çš„å‡½æ•°ã€‚ä¸è¿‡åªè¦æ­£ç¡®è°ƒç”¨å°±ä¸ä¼šå‡ºé—®é¢˜</p>
<p>å’Œ</p>
<p>createHref å®Œæ•´è·¯å¾„æ‹¼æ¥</p>
<p>æœ€åæ˜¯ å‘Vueé‡Œæ³¨å…¥çš„ window.Vue.use(VueRouter)</p>
<h2 id="install-js"><a href="#install-js" class="headerlink" title="install.js"></a>install.js</h2><p>é˜²é‡install</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeCreate</span>(<span class="params"></span>)&#123;</span><br><span class="line">  æ³¨å…¥å’Œè°ƒç”¨ <span class="title function_">registerInstance</span>(<span class="variable language_">this</span>,<span class="variable language_">this</span>)</span><br><span class="line">  å»¶ä¼¸åˆ°vm.<span class="property">$options</span>.<span class="property">_parentVnode</span>.<span class="property">data</span>.<span class="title function_">registerRouteInstance</span>(<span class="variable language_">this</span>,<span class="variable language_">this</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>mixin æ¸²æŸ“é¡ºåº  vueçš„ç»„ä»¶ å‰åºæ·±æœ, å­ç»„ä»¶ä»çˆ¶ç»„ä»¶æ‹¿</p>
<p>å±æ€§å®šä¹‰ <code>$router</code>(å®ä¾‹),<code>$route</code>(å½“å‰çŠ¶æ€),å¹¶ä¸”é€šè¿‡<code>Vue.util.defineReactive(this, &#39;_route&#39;, this._router.history.current)</code> æ¥ä¿è¯æ”¹å˜æ—¶ç›¸åº”å¼è§¦å‘</p>
<p>componentå®šä¹‰ <code>RouterView</code>å’Œ<code>RouterLink</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> strats = <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">optionMergeStrategies</span></span><br><span class="line"><span class="comment">// use the same hook merging strategy for route hooks</span></span><br><span class="line">strats.<span class="property">beforeRouteEnter</span> = strats.<span class="property">beforeRouteLeave</span> = strats.<span class="property">beforeRouteUpdate</span> = strats.<span class="property">created</span></span><br></pre></td></tr></table></figure>

<h2 id="util"><a href="#util" class="headerlink" title="util"></a>util</h2><p>è¿™ä¸€å—çš„ä½¿ç”¨å¯ä»¥çœ‹<code>test/unit/specs</code>é‡Œçš„ç”¨ä¾‹</p>
<h3 id="async-js"><a href="#async-js" class="headerlink" title="async.js"></a>async.js</h3><p><code>export function runQueue (queue: Array&lt;?NavigationGuard&gt;, fn: Function, cb: Function) &#123;</code></p>
<p>å¯¹æ•°ç»„ä¸­é€ä¸ªè°ƒç”¨ å‡½æ•°<code>fn(queue[index],å›è°ƒ)</code>,åœ¨ä¸Šä¸€ä¸ªå›è°ƒåè°ƒç”¨ä¸‹ä¸€ä¸ªå‡½æ•°,æœ€åè§¦å‘<code>cb()</code> </p>
<p>ç”¨çš„ è‡ªå®šä¹‰<code>step</code>ç®­å¤´å‡½æ•° ä¾æ¬¡<code>step(index)</code></p>
<h3 id="dom-js"><a href="#dom-js" class="headerlink" title="dom.js"></a>dom.js</h3><p><code>export const inBrowser = typeof window !== &#39;undefined&#39;</code></p>
<h3 id="location-js"><a href="#location-js" class="headerlink" title="location.js"></a>location.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">normalizeLocation</span> (</span><br><span class="line">  <span class="attr">raw</span>: <span class="title class_">RawLocation</span>,</span><br><span class="line">  <span class="attr">current</span>: ?<span class="title class_">Route</span>,</span><br><span class="line">  <span class="attr">append</span>: ?boolean,</span><br><span class="line">  <span class="attr">router</span>: ?<span class="title class_">VueRouter</span></span><br><span class="line">): <span class="title class_">Location</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p><code>_normalized</code>æ¥æ ‡è®°å¤„ç†è¿‡</p>
<p>å…¶å®ƒå­—æ®µ <code>path</code>,<code>query:resolveQuery(...)</code>,<code>hash</code>,<code>name</code>,<code>params</code></p>
<h3 id="misc-js"><a href="#misc-js" class="headerlink" title="misc.js"></a>misc.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">extend</span> (a, b) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> b) &#123;</span><br><span class="line">    a[key] = b[key]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="params-js"><a href="#params-js" class="headerlink" title="params.js"></a>params.js</h3><p>ç”¨<code>regexpCompileCache</code> ç¼“å­˜ ç¼–è¯‘åçš„æ­£åˆ™</p>
<p>ä½¿ç”¨<code>path-to-regexp</code>æ¥å®Œæˆ è·¯å¾„æ­£åˆ™åŒ¹é…</p>
<p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/path-to-regexp">https://www.npmjs.com/package/path-to-regexp</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">fillParams</span> (</span><br><span class="line">  <span class="attr">path</span>: string,</span><br><span class="line">  <span class="attr">params</span>: ?<span class="title class_">Object</span>,</span><br><span class="line">  <span class="attr">routeMsg</span>: string</span><br><span class="line">): string &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="path-js"><a href="#path-js" class="headerlink" title="path.js"></a>path.js</h3><p>æ¯”å¦‚è¿™ä¸ªæ–‡ä»¶æ„Ÿè§‰ çœ‹æµ‹è¯• æ¯”çœ‹ä»£ç æ›´èƒ½ç†è§£å‡½æ•°åŠŸèƒ½</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">resolvePath</span> (</span><br><span class="line">  <span class="attr">relative</span>: string,</span><br><span class="line">  <span class="attr">base</span>: string,</span><br><span class="line">  append?: boolean</span><br><span class="line">): string &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>è·¯å¾„è§£æå’¯ ç”šè‡³è¿˜â€è§£æâ€äº† <code>.</code>å’Œ<code>..</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">parsePath</span> (<span class="attr">path</span>: string): &#123;</span><br><span class="line">  <span class="attr">path</span>: string; <span class="comment">// å»æ‰ queryå’Œ hashçš„éƒ¨åˆ†</span></span><br><span class="line">  <span class="attr">query</span>: string; <span class="comment">// é—®å·ä»¥å  </span></span><br><span class="line">  <span class="attr">hash</span>: string; <span class="comment">// äº•å·åŠä»¥å</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>cleanPath(path: string):string ,æŠŠè·¯å¾„é‡Œçš„è¿ç»­ä¸¤ä¸ªæ–œæ å˜ä¸ºä¸€ä¸ªæ–œæ </p>
<h3 id="push-state-js"><a href="#push-state-js" class="headerlink" title="push-state.js"></a>push-state.js</h3><ul>
<li>å¸¸é‡å¸ƒå°” supportsPushState, å¯ä»¥ä»è¿™ä¸ªæºä»£ç  çœ‹åˆ°ç‰¹æ®Šåˆ¤æ–­ä¸æ”¯æŒçš„ua,å‰©ä½™çš„ é€šè¿‡window.historyæ˜¯å¦æœ‰ pushStateæ–¹æ³•è¿›è¡Œåˆ¤æ–­</li>
<li>function pushState (url?: string, replace?: boolean) { ä¾èµ–äº <code>window.history  .pushState/replaceState</code>è¿™ä¿©ä¸ªé‚£ä¸ªæ–¹æ³•ï¼Œé€šè¿‡replaceå‚æ•°å†³å®šè°ƒç”¨å“ªä¸ª,å¦‚æœæŒ‚æ‰(..) åˆ™æ”¹ä¸ºè°ƒç”¨<code>window.location.replace/assign(url)</code>çš„æ–¹æ³•</li>
<li>function replaceState (url?: string) { è°ƒç”¨å°è£…çš„pushState</li>
</ul>
<p>è¿™é‡Œå¯èƒ½æŒ‚æ‰çš„æ³¨é‡Šæ˜¯</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// try...catch the pushState call to get around Safari</span></span><br><span class="line"><span class="comment">// DOM Exception 18 where it limits to 100 pushState calls</span></span><br></pre></td></tr></table></figure>

<h3 id="query-js"><a href="#query-js" class="headerlink" title="query.js"></a>query.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">resolveQuery</span> (</span><br><span class="line">  <span class="attr">query</span>: ?string,</span><br><span class="line">  <span class="attr">extraQuery</span>: <span class="title class_">Dictionary</span>&lt;string&gt; = &#123;&#125;,</span><br><span class="line">  <span class="attr">_parseQuery</span>: ?<span class="title class_">Function</span></span><br><span class="line">): <span class="title class_">Dictionary</span>&lt;string&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>åŸºæœ¬å°±æ˜¯,æŠŠurlé‡Œçš„è¯·æ±‚å‚æ•°query å’Œ å­—å…¸é‡Œçš„extraQueryï¼Œè½¬åŒ–ä¸º Dictionary<string></p>
<p>å¦‚æœæœ‰ç›¸åŒçš„è®©extraQueryè¦†ç›–queryé‡Œçš„ è¿™é‡Œæ˜æ˜æ˜¯å¯ä»¥ç”¨<code>misc.js</code>çš„<code>extend</code> ä¸ºä½•æ²¡ç”¨&#x3D;ã€‚&#x3D; æ˜¯æœ‰ä»€ä¹ˆè€ƒè™‘ä¹ˆ</p>
<p>ç„¶åé»˜è®¤å†…éƒ¨å®ç°äº†å¦‚ä¸Šæ‰€è¿°çš„parseQueryå‡½æ•°ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªä¼ è¿›å»ï¼Œä»æµ‹è¯•æ ·ä¾‹ä¸Šçœ‹ï¼Œæ˜¯æ²¡æœ‰æµ‹è¿™ä¸ª<code>_parseQuery</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">stringifyQuery</span> (<span class="attr">obj</span>: <span class="title class_">Dictionary</span>&lt;string&gt;): string &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>è½¬åŒ–ä¸ºurlä¸Šçš„è¯·æ±‚å‚æ•°æ ¼å¼ è®°å¾—encode</p>
<p>æ­¤å¤–å°±æ˜¯ä¸Šé¢ ä½¿ç”¨äº†ä¸€äº› urlçš„ç¼–ç è§£ç  å‡½æ•°</p>
<h3 id="resolve-components-js"><a href="#resolve-components-js" class="headerlink" title="resolve-components.js"></a>resolve-components.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">flatMapComponents</span> (</span><br><span class="line">  <span class="attr">matched</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecord</span>&gt;,</span><br><span class="line">  <span class="attr">fn</span>: <span class="title class_">Function</span></span><br><span class="line">): <span class="title class_">Array</span>&lt;?<span class="title class_">Function</span>&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹matchedçš„æ¯ä¸ªå…ƒç´ <code>m</code>,ä¸­<code>m.components</code>çš„æ¯ä¸ª<code>key</code> è°ƒç”¨<code>fn(m.components[key],m.instances[key],m,key)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">resolveAsyncComponents</span> (<span class="attr">matched</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecord</span>&gt;): <span class="title class_">Function</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>è¿”å›ä¸€ä¸ªé—­åŒ…å‡½æ•° <code>(to,from,next)=&gt;&#123;&#125;</code></p>
<p>ä½¿ç”¨äº†ä¸Šé¢çš„<code>flatMapComponents</code></p>
<p>é€šè¿‡å†…éƒ¨ ä¸¤ä¸ªå˜é‡<code>hasAsync</code>å’Œ<code>pending</code>æ¥æ§åˆ¶ next()</p>
<p>è¿™é‡Œæ²¡æœ‰ä½¿ç”¨<code>to</code>å’Œ<code>from</code>åªæœ‰ <code>next()</code>å’Œ<code>matched</code> </p>
<p>æ²¡æœ‰å¾ˆæ‡‚çš„æ˜¯ è¿™é‡Œ<code>def = matchedæŸä¸ª çš„components[key]</code>,å°±æ˜¯å…¶æŸä¸ª<code>_Vue.extend()</code></p>
<p>ä½†æ˜¯è¿™é‡Œ<code>resolve,reject</code>éƒ½æ˜¯<code>once</code></p>
<p>ä¸‹é¢ä¸ºä»€ä¹ˆ æ—¢æœ‰<code>res = def(resolve,reject)</code>åˆæœ‰ <code>res.then(resolve, reject)</code></p>
<p>emmmmmmmmmæ‰€ä»¥è¿™é‡Œæ­£å‘åŠŸèƒ½ æ˜¯é…ç½®æ‰€æœ‰ <code>components[key]</code> ä¹‹åè°ƒç”¨ <code>next()</code>?</p>
<p>ç„¶åä¼¼ä¹ä¸ºäº†å…¼å®¹ä¸åŒè¯­æ³•ï¼Œå†™äº†æ¯”è¾ƒç¥å¥‡çš„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">flatten</span> (<span class="attr">arr</span>: <span class="title class_">Array</span>&lt;any&gt;): <span class="title class_">Array</span>&lt;any&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>emmmåä¸ºflattenï¼Œå®é™… åªæ˜¯ <code>Array.prototype.concat.apply([],arr)</code>,æ‰€ä»¥æœ€å¤šflattenä¸€å±‚</p>
<p>æ¯”å¦‚<code>[1,[2,[3,[4]]]] -&gt; [1,2,[3,[4]]]</code></p>
<h3 id="route-js"><a href="#route-js" class="headerlink" title="route.js"></a>route.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createRoute</span> (</span><br><span class="line">  <span class="attr">record</span>: ?<span class="title class_">RouteRecord</span>,</span><br><span class="line">  <span class="attr">location</span>: <span class="title class_">Location</span>,</span><br><span class="line">  redirectedFrom?: ?<span class="title class_">Location</span>,</span><br><span class="line">  router?: <span class="title class_">VueRouter</span></span><br><span class="line">): <span class="title class_">Route</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>è¿”å›çš„æ˜¯ä¸€ä¸ª<code>Object.freeze(Route)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the starting route that represents the initial state</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">START</span> = <span class="title function_">createRoute</span>(<span class="literal">null</span>, &#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isSameRoute</span> (<span class="attr">a</span>: <span class="title class_">Route</span>, <span class="attr">b</span>: ?<span class="title class_">Route</span>): boolean &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ<code>b=== START</code>,é‚£ä¹ˆ <code>return a===START</code> æ‰€ä»¥ä¸ä¼šå†ç”Ÿæˆ<code>START</code>?</p>
<p>å¯¹ aå’Œbçš„path,name,hash,query,params è¿™äº› éœ€è¦æ¯”è¾ƒçš„è¿›è¡Œæ·±æ¯”è¾ƒ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isIncludedRoute</span> (<span class="attr">current</span>: <span class="title class_">Route</span>, <span class="attr">target</span>: <span class="title class_">Route</span>): boolean &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>ç›®æ ‡pathæ˜¯å½“å‰pathçš„å‰ç¼€ï¼Œç›®æ ‡hashä¸ºç©ºæˆ–è€…å’Œå½“å‰hashç›¸ç­‰ï¼Œç›®æ ‡queryçš„keyåœ¨å½“å‰keyä¸­éƒ½å‡ºç°è¿‡ &#x3D;.&#x3D;è¿™ä¸ªè§„åˆ™ å¥½è¿·å•Š</p>
<p>è¿™é‡Œ æœ‰å•ç‹¬å®ç°<code>clone</code>å’Œ<code>isObjectEqual</code>ä¸¤ä¸ªæ–¹æ³•ï¼Œéƒ½å®ç°äº†æ·±åº¦å¤„ç†ï¼Œä½†æ˜¯æ²¡æœ‰å®ç°å¯èƒ½å‡ºç°çš„å¾ªç¯å¼•ç”¨ã€‚ä¸è¿‡å› ä¸ºéƒ½æ˜¯ Routeä¸­çš„ â€œå¯æ§åˆ¶çš„â€å‚æ•°,è®¤ä¸ºæ˜¯ä¸ä¼šå‡ºç°å¾ªç¯å¼•ç”¨çš„ã€‚</p>
<h3 id="scroll-js"><a href="#scroll-js" class="headerlink" title="scroll.js"></a>scroll.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setupScroll</span> () &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>çœ‹å¾—å‡ºè‡ªé—­çš„æ„Ÿå—äº† è¿™é‡Œä¸‰ä¸ªæ³¨é‡Š <code>Fix #balabala</code></p>
<p><code>ç›‘å¬popstate =&gt;  export function saveScrollPosition () &#123; positionStore[å½“å‰ çŠ¶æ€key] = ä¿å­˜x,yåç§»</code> </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">handleScroll</span> (</span><br><span class="line">  <span class="attr">router</span>: <span class="title class_">Router</span>,</span><br><span class="line">  <span class="attr">to</span>: <span class="title class_">Route</span>,</span><br><span class="line">  <span class="attr">from</span>: <span class="title class_">Route</span>,</span><br><span class="line">  <span class="attr">isPop</span>: boolean</span><br><span class="line">) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>&#x2F;&#x2F; wait until re-render finishes before scrolling</p>
<p><code>router.app.$nextTick()</code>é‡Œæ‰§è¡Œ è°ƒç”¨<code>router.options.scrollBehavior.call(router,to,from,isPop?position:null)</code> æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ»šåŠ¨ï¼Œå¦‚æœéœ€è¦<br> åˆ™è°ƒç”¨ <code>scrollToPosition(...)</code></p>
<h3 id="state-key-js"><a href="#state-key-js" class="headerlink" title="state-key.js"></a>state-key.js</h3><p>ä¸Šé¢æ–‡ä»¶ä¼šç”¨åˆ° <code>gen/get/set StateKey</code>,ç„¶å å€¼æ˜¯ç›´æ¥å–ç”¨çš„ <code>Time.now().toFixed(3)</code></p>
<p>è‡³äº<code>Time</code> å¯èƒ½å– <code>window.performance</code>æˆ–è€…<code>Date</code></p>
<h3 id="warn-js"><a href="#warn-js" class="headerlink" title="warn.js"></a>warn.js</h3><p><code>assert/warn/isError/isExtendedError</code></p>
<p>å¦‚æœgrepä»£ç  å‘ç° éƒ½æ˜¯è¯´ <code>process.env.NODE_ENV !== &#39;production&#39;</code></p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº† ä¸ºä»€ä¹ˆ ä¸å†™æˆ åªåœ¨ å‡½æ•°å†…,å¤–éƒ¨ç›´æ¥è°ƒç”¨</p>
<p>æˆ–è€…è¯´</p>
<p>ä¸ºä»€ä¹ˆä¸å†™æˆï¼Œä¼ é€’å‚æ•°å¢åŠ ä¸€ä¸ªenv?</p>
<p>å†æˆ–è€…</p>
<p>è¯¦ç»†å‘½åå‡ºä¸€ä¸ªå‡½æ•° warnNonPro</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>Onhashchange çš„è§¦å‘æ¥æº</p>
<ul>
<li>ä¿®æ”¹æµè§ˆå™¨åœ°å€ å¢åŠ æ”¹å˜#hash</li>
<li>ä¿®æ”¹location.href &#x2F; location.hash</li>
<li>ç‚¹å‡»é”šç‚¹é“¾æ¥</li>
<li>æµè§ˆå™¨å‰è¿›åé€€å˜åŒ–</li>
</ul>
<p>hash</p>
<p>routeLinkè´Ÿè´£</p>
<ul>
<li>é˜»æ­¢é»˜è®¤è¡Œä¸º å¦‚click e.preventDefault()</li>
<li>è®¾ç½® location.hash</li>
</ul>
<p>routeViewè´Ÿè´£</p>
<ul>
<li>window.addEventListener(â€˜hashchangeâ€™,e&#x3D;&gt;{å…·ä½“å·¥ä½œ æ¯”å¦‚é¡µé¢æ¸²æŸ“});</li>
</ul>
<p>history(ç”¨çš„h5 api)</p>
<p>pushState ä¸è§¦å‘é¡µé¢åˆ·æ–°ï¼Œåªæ”¹å˜historyå¯¹è±¡ï¼Œæ˜¯åŒæºç­–ç•¥ä¿æŠ¤é™åˆ¶çš„</p>
<p>popstate é¡µé¢ç»„ä»¶åˆ·æ–°</p>
<p>routeLinkè´Ÿè´£</p>
<ul>
<li>é˜»æ­¢é»˜è®¤è¡Œä¸º å¦‚click e.preventDefault()</li>
<li>polyfillè¡¥ä¸ï¼Œæ”¯æŒä½ç‰ˆæœ¬æµè§ˆå™¨ã€‚æ–°ç‰ˆæœ¬çš„æ‰æœ‰history.pushState()</li>
<li>window.history.pushState(å¯¹è±¡,link,link);<br>routeViewè´Ÿè´£</li>
<li>window.addEventListener(â€˜popstateâ€™,e&#x3D;&gt;{å…·ä½“å·¥ä½œ æ¯”å¦‚é¡µé¢æ¸²æŸ“}); ç”±æµè§ˆå™¨å‰è¿›åé€€æŒ‰é’® è§¦å‘,æˆ–è€…historyæ–¹æ³•è§¦å‘</li>
</ul>
<p>ä¸æ”¯æŒpushStateä¼šé™çº§åˆ°hashæ¨¡å¼</p>
<h1 id="examples"><a href="#examples" class="headerlink" title="examples"></a>examples</h1><blockquote>
<p>å¯¹ç…§ æºç é‡Œçš„ exampleå†æ¥å›é¡¾å®ç°</p>
</blockquote>
<p>åœ¨æºç çš„<code>examples/</code>æ–‡ä»¶å¤¹é‡Œ</p>
<p>é€šè¿‡<code>npm run dev</code>æ¥å¯åŠ¨</p>
<h2 id="basic"><a href="#basic" class="headerlink" title="basic"></a>basic</h2><pre><code>mode: &#39;history&#39;,
base: __dirname,
</code></pre>
<p><code>grep -r &quot;base&quot; src/</code> å¯ä»¥å›é¡¾ä¸€ä¸‹ baseç›¸å…³çš„å®ç°</p>
<pre><code>    &lt;router-link tag=&quot;li&quot; to=&quot;/bar&quot; :event=&quot;[&#39;mousedown&#39;, &#39;touchstart&#39;]&quot;&gt;
      &lt;a&gt;/bar&lt;/a&gt;
    &lt;/router-link&gt;
    
</code></pre>
<p>è¿™ä¸€éƒ¨åˆ† å›é¡¾ linkçš„å®ç° , tagä¸ä¸ºa åˆ™ä¼š é€’å½’åœ¨this.$slots.defaultæ‰¾ç¬¬ä¸€ä¸ªaå…ƒç´ ,ç„¶å ç»‘ä¸Šäº‹ä»¶, ç„¶å event æ˜¯å¯¹åº” åœ¨æ‰¾åˆ°çš„æ ‡ç­¾aä¸Šçš„æ‰€æœ‰ onäº‹ä»¶æ”¹ä¸º é˜»æ­¢é»˜è®¤äº‹ä»¶ è°ƒç”¨<br><code>router.push/replace</code>,</p>
<p>æ‰€ä»¥è¿™ä¸ª<code>/bar</code>é¼ æ ‡ç‚¹å‡»ä¸‹ å°±ä¼šè§¦å‘ï¼Œ é¡µé¢ä¸Šå¦ä¸€ä¸ª<code>/bar</code> è¦é‡Šæ”¾æ‰ä¼šè§¦å‘</p>
<p>é‚£ä¹ˆï¼Œè·Ÿè§‰æºç çš„é€»è¾‘ è¿™æ · åšåä¼šè§¦å‘ä¸¤æ¬¡ push ,ä¸¤æ¬¡ transitionToï¼Œä¸¤æ¬¡ confirmTransitionï¼Œç„¶å é€šè¿‡ base.jsä¸­çš„isSameRouteä¸­åˆ¤è¯»æ˜¯å¦æ˜¯åŒä¸€ä¸ªRoute,å¦‚æœæ˜¯ åˆ™è°ƒç”¨ensureURL,æœ€åè°ƒç”¨ abort,</p>
<p>è€Œ abortä¸­ å¦‚æœæ˜¯ NavigationDuplicatedçš„ é”™è¯¯ åˆ™ä¸ä¼š warn,ä¼šè°ƒç”¨ å›è°ƒå‡½æ•°(å¦‚æœä¼ é€’äº†),</p>
<p>å½“ç„¶ å¦‚æœä½ å·²ç»åœ¨ä¸€ä¸ªè·¯å¾„ä¸‹ é‚£ä¹ˆä½ ç‚¹å‡» ä¸€ä¸ªæŒ‡å‘å½“å‰çš„è·¯ç”± ä¹Ÿä¼š èµ°ä¸Šé¢çš„é€»è¾‘(ä¸æ˜¯ä¸¤æ¬¡),åœ¨<code>isSameRoute</code>åå°±ä¸ä¼šå†èµ°åŠ¨</p>
<p>å…¶ä¸­çš„<code>to</code> æ˜¯é€šè¿‡<code>router.resolve(this.to,current,this.append)</code>è§£æå‡ºçš„ç›®æ ‡åœ°å€</p>
<pre><code>navigateAndIncrement () &#123;
</code></pre>
<p>å®ç°äº†ç›´æ¥å»è°ƒç”¨<code>$router.push</code>æ–¹æ³• ,ä½ å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„è¿”å›çœ‹åˆ°pushçš„æ•ˆæœ</p>
<pre><code>    &lt;router-link to=&quot;/foo&quot; v-slot=&quot;props&quot;&gt;
      &lt;li :class=&quot;[props.isActive &amp;&amp; &#39;active&#39;, props.isExactActive &amp;&amp; &#39;exact-active&#39;]&quot;&gt;
        &lt;a :href=&quot;props.href&quot; @click=&quot;props.navigate&quot;&gt;&#123;&#123; props.route.path &#125;&#125; (with v-slot).&lt;/a&gt;
      &lt;/li&gt;
    &lt;/router-link&gt;
</code></pre>
<p>è¿™ä¸€æ®µ ä¼šå¯¹åº”linkä¸­çš„ scopedSlot, æ³¨æ„åˆ° å®ƒå¹¶æ²¡æœ‰ ä¼ é€’<code>activeClass</code> å’Œ <code>exactActiveClass</code>è€Œæ˜¯ è‡ªå·±ç»„ä»¶é‡Œ åŠ¨æ€è®¡ç®—class,ç„¶åè¿™é‡Œ </p>
<p>è¿™é‡Œä¹Ÿæ˜¯æŠŠ æºç ä¸­ä¼ é€’çš„æ‰€æœ‰å‚æ•°éƒ½ç”¨åˆ°äº†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$scopedSlots</span>.<span class="title function_">default</span>(&#123;</span><br><span class="line">  href,</span><br><span class="line">  route,</span><br><span class="line">  <span class="attr">navigate</span>: handler,</span><br><span class="line">  <span class="attr">isActive</span>: classes[activeClass],</span><br><span class="line">  <span class="attr">isExactActive</span>: classes[exactActiveClass]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>htmlæœ€ä¸‹é¢ </p>
<pre><code>  &lt;pre id=&quot;query-t&quot;&gt;&#123;&#123; $route.query.t &#125;&#125;&lt;/pre&gt;
  &lt;pre id=&quot;hash&quot;&gt;&#123;&#123; $route.hash &#125;&#125;&lt;/pre&gt;
</code></pre>
<p>éƒ½æ˜¯ è¿‡ç¨‹ä¸­è®¡ç®—å‡ºæ¥çš„å½“å‰ Routeä¸Šçš„å‚æ•° query</p>
<p>åŒæ—¶å¯ä»¥å‘ç° å½“ è·¯ç”±æ”¹å˜æ—¶ æ‰€æœ‰ RouterLink çš„renderå‡½æ•° éƒ½è¢«é‡æ–°è°ƒç”¨</p>
<h2 id="hash-mode"><a href="#hash-mode" class="headerlink" title="hash-mode"></a>hash-mode</h2><p>å’Œbasic vimdiffä¸€ä¸‹ </p>
<p>é¦–å…ˆ æœ€ä¸»è¦çš„å˜åŒ–æ˜¯ <code>mode:&#39;hash&#39;</code></p>
<p>æ­¤å¤–è¿™é‡ŒåŠ å…¥äº† <code>/xxx/:yyy</code>è¿™æ ·çš„åŒ¹é…</p>
<p>ç„¶ååœ¨<code>router-link</code>éƒ¨åˆ† å°±åªä½¿ç”¨äº†æœ€åŸºæœ¬çš„å†™æ³•</p>
<p>modeä¹Ÿå°±æ˜¯ ç›´æ¥æ–‡ä»¶<code>history/hash.js</code></p>
<p>ç„¶å å†’å·è·¯å¾„ åŒæ ·æ˜¯ <code>link.js</code>ä¸­renderé‡Œçš„ router.resolve, æºç åè¿‡å»æœçš„è¯æ˜¯ <code>index.js: resolve(to...) -&gt;  location.js: normalizeLocation(raw...), -&gt; index.js:match(raw...) -&gt; create-matcher.js:match </code></p>
<p>è¿™é‡Œ æœ‰ç‚¹é—®é¢˜! è™½ç„¶è¯´<code>index.js::match</code> å’Œ <code>create-matcher.js</code>é‡Œéƒ½æ˜¯æœ‰è¿”å›Routeçš„,ä½†æ˜¯ï¼Œåœ¨ matchçš„ä¸€äº›æƒ…å†µä¸‹ ä¼ å…¥çš„rawè¢«æ›´æ”¹äº† æ¯”å¦‚åŠ ä¸Šäº†paramsï¼Œå› ä¸º åœ¨ normalizeLocationé‡Œ è¿”å›çš„location &#x3D;&#x3D; raw,å°±æœ‰äº† åé¢ matchä¸­ä¿®æ”¹æ”¹locationæ—¶ä¿®æ”¹äº† raw,</p>
<p>ä¹Ÿå°±æ˜¯ è¯´ åœ¨linkä¸­ è¿™ä¸ªè¿”å›çš„locationå¯èƒ½æ˜¯å¸¦ä¸Š params ä¹Ÿå¯èƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸å¯é çš„&#x3D;.&#x3D;</p>
<p>æ¯å½“è¿™æ—¶ å°±ä¼šæ€€å¿µ c++ä¸­çš„ constå¼•ç”¨å‚æ•° </p>
<p>ç„¶å å½“ç‚¹å‡»æ—¶ æ˜¯è§¦å‘<code>hash.js::push -&gt; bash.js::transitionTo -&gt; router.match åŒ¹é…å‡ºRoute -&gt; base.js updateRoute è·Ÿå¿ƒ current = route</code></p>
<p>å…¶ä¸­å¤„ç†å†’å·æ ¼å¼çš„æ˜¯é  <code>src/util/params.js</code> ä¸­ä½¿ç”¨â€™path-to-regexpâ€™,åœ¨ matchå‡½æ•°ä¸­ä½¿ç”¨ </p>
<p>è¿™æ ·ä¹Ÿå°±æ˜¯ æŠŠ è®¡ç®—å‡ºçš„params ä¹‹ç±»çš„ ä¸¢åˆ°äº†<code>$route</code>ä¸Š</p>
<h2 id="nested-routes"><a href="#nested-routes" class="headerlink" title="nested-routes"></a>nested-routes</h2><ol>
<li>æ˜¯<code>route</code>è¡¨ä¸­ æœ‰ <code>name&#39;</code> è¿™æ ·å†™toå°±å¯ä»¥ ä¸ç”¨å†™è¯¦ç»†è·¯å¾„</li>
</ol>
<p>å®ç°å°±æ˜¯é  <code>create-matcher.js</code>çš„<code>nameMap</code>æ¥å®ç°<code>åå­—-&gt; url/:xxx/yy</code> ä»¥åŠ å¯¹åº”çš„æ­£åˆ™</p>
<p>emmmmm ç»è¿‡è°ƒè¯• éƒ½åœ¨ createRouteMapä¸­æŠŠ nameMapåšå¥½äº†,åœ¨ ä¸‹é¢ <code>record=nameMap[name]</code>å§‹ç»ˆ éƒ½æœ‰å€¼</p>
<p>è·¯å¾„ä¹Ÿåœ¨<code>create-matcher.js</code>ä¸­çš„<code>locatoin.path = fillParams</code>åˆå¹¶</p>
<p>ä¾‹å¦‚</p>
<p><code>fillParams(&#39;/parent/qux/:quxId/quux&#39;,&#123;quxId: &quot;1&quot;, zapId: 2&#125;)</code></p>
<p>æˆ‘ä»¬å¯ä»¥å°è¯•æ·»åŠ  <code>fillParams /parent/qux/:quxId/quux &#123;quxId: &quot;1&quot;, zapId: 2&#125;</code></p>
<p>ä½ ä¼šå‘ç° ç‚¹å‡»ä¼šè·³è½¬åˆ°æ ¹(å¦‚æœæ²¡æœ‰ quxId) ä¼šæŠ¥warn <code>[vue-router] missing param for named route &quot;quux&quot;: Expected &quot;quxId&quot; to be defined</code></p>
<p>åœ¨urlä¸Šæ˜¯æ ¹ä½†æ˜¯ åœ¨ router-viewä¸Š è¿˜æ˜¯ æŒ‰ç…§ nameçš„å±‚æ¬¡æ¸²æŸ“çš„</p>
<p>è¿™é‡Œä¸€ä¸ªé—®é¢˜å°±æ˜¯ è¯´ name ä¸èƒ½é‡å¤ ä¼šæŠ¥é”™ <code>[vue-router] Duplicate named routes definition: &#123; name: &quot;quuy&quot;, path: &quot;/parent/qux/:quxId/quuy&quot; &#125;</code> ä½†å¦‚æœä¸ç®¡çš„è¯, nameæ ¹æ®ä¸é‡å¤å»ºç«‹ åªä¼šä¿å­˜ç¬¬ä¸€ä¸ª</p>
<p>ç¬¬äºŒä¸ªå°±æ˜¯è¯´ å³ä½¿ä»<code>xxx/:quxId</code> ç›´æ¥è·³ <code>name:&#39;quux&#39;</code>ä¹Ÿæ˜¯ä¼šå›åˆ°ä¸»é¡µ, å› ä¸ºè™½ç„¶åŸæ¥ quxIdæœ‰å€¼,ä½†æ ‘å½¢è§£æ ä¸Šå¹¶æ²¡æœ‰quxIdçš„å€¼</p>
<ol start="2">
<li>æ˜¯åµŒå¥—çš„ è·¯ç”±è¡¨ å’Œ åµŒå¥—çš„ router-view</li>
</ol>
<p>è·¯ç”±è¡¨åµŒå¥— ä¸Šé¢1.å·²ç»è¯´äº†ï¼Œç„¶å router-view åµŒå¥— é çš„å°±æ˜¯ä¸Šé¢ æºç é˜…è¯»ä¸­è®²çš„ matched çš„è®¡ç®—,è§<a href="router-view.js">view.js</a></p>
<p>å³æ¯ä¸€å±‚<code>router-view</code>æ¸²æŸ“æ˜¯é€šè¿‡depth å»<code>$route.matched[depth]</code>å–å€¼</p>
<h2 id="named-routes"><a href="#named-routes" class="headerlink" title="named-routes"></a>named-routes</h2><p>åŸºæœ¬å°±æ˜¯ routeré…ç½®çš„æ—¶å€™ å¸¦nameï¼Œç„¶å router-link çš„toæ—¶ é…ç½® name,ä¹Ÿå¯ä»¥é…ç½® params</p>
<p>æ²¡å•¥æ–°çš„ä¸œè¥¿ </p>
<p>ä¸Šé¢nested-routeséƒ½å±•ç¤ºäº†</p>
<h2 id="named-view"><a href="#named-view" class="headerlink" title="named-view"></a>named-view</h2><p><code>router-view</code> ä¸ŠåŠ ä¸Šäº† name</p>
<p>è·¯ç”±é‡Œé…ç½®</p>
<pre><code>  components: &#123;
    default: Baz,
    a: Bar,
    b: Foo
  &#125;
</code></pre>
<p>é‚£ä¹ˆåœ¨ å–çš„æ—¶å€™ æ ¹æ®propsçš„name å»<code>matched.components[name]</code>ä¸­è·å¾—</p>
<h1 id="å’Œvueå®ä¾‹ç”Ÿå‘½å‘¨æœŸé¡ºåº"><a href="#å’Œvueå®ä¾‹ç”Ÿå‘½å‘¨æœŸé¡ºåº" class="headerlink" title="å’Œvueå®ä¾‹ç”Ÿå‘½å‘¨æœŸé¡ºåº"></a>å’Œvueå®ä¾‹ç”Ÿå‘½å‘¨æœŸé¡ºåº</h1><p>æ‰“å¼€<code>codesandbox.io</code> æŠŠ<code>main.js</code>æ›¿æ¢ä¸ºä¸‹é¢,è®°å¾—å¼•å…¥<code>vue-router</code>ä¾èµ–</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Foo</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>:</span><br><span class="line">    <span class="string">&#x27;&lt;div&gt;&lt;h1&gt;foo&lt;/h1&gt;&lt;router-link to=&quot;/bar&quot;&gt;Go to Bar&lt;/router-link&gt;&lt;/div&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">beforeRouteEnter</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo inner beforeRouteEnter&quot;</span>);</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeRouteUpdate</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo inner beforeRouteUpdate&quot;</span>);</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeRouteLeave</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo inner beforeRouteLeave&quot;</span>);</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">beforeCreated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo beforeCreated&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo created&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo beforeMount&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo mounted&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo beforeDestroy&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">destroyed</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo destroyed&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Bar</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>:</span><br><span class="line">    <span class="string">&#x27;&lt;div&gt;&lt;h1&gt;bar&lt;/h1&gt;&lt;router-link to=&quot;/foo&quot;&gt;Go to foo&lt;/router-link&gt;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/foo&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Foo</span>,</span><br><span class="line">    <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Foo beforeEnter&quot;</span>);</span><br><span class="line">      <span class="title function_">next</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/bar&quot;</span>, <span class="attr">component</span>: <span class="title class_">Bar</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;global beforeEach&quot;</span>);</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;global afterEach&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div id=&quot;app&quot;&gt;&lt;router-view /&gt;&lt;/div&gt;&#x27;</span>,</span><br><span class="line">  router</span><br><span class="line">&#125;).$mount(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹<code>console</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">global beforeEach </span><br><span class="line">Foo beforeEnter </span><br><span class="line">foo inner beforeRouteEnter </span><br><span class="line">global afterEach </span><br><span class="line">foo created </span><br><span class="line">foo beforeMount </span><br><span class="line">foo mounted </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">foo inner beforeRouteLeave </span><br><span class="line">global beforeEach </span><br><span class="line">global afterEach </span><br><span class="line">foo beforeDestroy </span><br><span class="line">foo destroyed </span><br></pre></td></tr></table></figure>

<p>éªŒè¯äº†æˆ‘ä»¬ä¸Šé¢é˜…è¯»çš„æºç ï¼Œ<code>router-view</code> æ¥ç®¡ç†äº†ç»„ä»¶çš„æ¸²æŸ“ï¼Œè™½ç„¶æœ‰çš„å‡½æ•°ä»ä»£ç è§†è§’å†™åœ¨ç»„ä»¶å†…éƒ¨ï¼Œä½†å®é™…ä¸Šæ˜¯<code>vuer-router</code>ç¡®å®šè¦æ¸²æŸ“ç»„ä»¶ä»¥åï¼Œæ‰ä¼šè°ƒç”¨<code>vue</code>æä¾›çš„äº§ç”Ÿ<code>VNode</code>çš„æ–¹æ³•ï¼Œå› æ­¤ï¼Œç»™<code>router</code>ç”¨çš„æ˜¯ç”±<code>router</code>æ¥ç”¨ï¼Œä¹Ÿå°±è‡ªç„¶æ—©äº<code>vue</code>æœ¬èº«çš„ç”Ÿå‘½å‘¨æœŸäº†</p>
<h1 id="ä¸ªäººå…¶å®ƒæ”¶è·"><a href="#ä¸ªäººå…¶å®ƒæ”¶è·" class="headerlink" title="ä¸ªäººå…¶å®ƒæ”¶è·"></a>ä¸ªäººå…¶å®ƒæ”¶è·</h1><ol start="0">
<li>vuex,vue-routerçš„example éƒ½æ˜¯ ç”¨expresså†™çš„</li>
<li>vuex,vue-routerçš„æ–‡æ¡£éƒ½æ˜¯vuepressç”Ÿæˆçš„</li>
<li>vuexçš„å¼€å‘æµ‹è¯• ç›®æµ‹æ²¡æœ‰flowï¼Œvue-routerçš„æµ‹è¯•æœ‰ç”¨åˆ°flowï¼Œä¸¤è€…ä¼¼ä¹éƒ½ç”¨åˆ°äº†tsc</li>
<li>dev,æµ‹è¯•,release å…¨éƒ¨è„šæœ¬åŒ–äº†</li>
<li>ä¹‹å‰æœ‰ä¸å°‘åœ°æ–¹å»ºè®®ç”¨typeof &#x3D;&#x3D; â€˜undefinedâ€™æ¥æ¯”è¾ƒundefined,è¿™é‡Œæºç å†™çš„ä¾ç„¶æ˜¯ !&#x3D;&#x3D; undefinedæ¥æ¯”è¾ƒï¼Œæ„Ÿè§‰è¿™äº›å°±ç®—å¯æœ‰å¯æ— çš„å»ºè®®å§(å—)</li>
<li>å¦å¤–å°±æ˜¯ ä¹‹å‰æœ‰æƒ³è¿‡è¯´ ä»£ç é‡Œå°½é‡é¿å…å­—ç¬¦ä¸² ä½œä¸ºé€»è¾‘è¿ç®—ï¼Œç”¨enumæˆ–è€…å¸¸é‡ï¼Œæˆ–è€…å¸¸é‡æ„ä¹‰çš„å˜é‡ä»£æ›¿ï¼Œè¿™é‡Œçœ‹æºç ä¾ç„¶åå¾ˆå¤šcase å­—ç¬¦ä¸²ï¼Œæˆ–è€…å­—ç¬¦ä¸²ç›´æ¥æ¯”è¾ƒçš„ã€‚</li>
<li>åˆå¤šäº†ä¸€ç‚¹æºç é˜…è¯»ç»éªŒï¼Œå› ä¸º å¾ˆå¤šæºç ç°åœ¨éƒ½å·²ç»æœ‰è‡ªåŠ¨æµ‹è¯•äº†ï¼Œæ‰€ä»¥åœ¨ç›´æ¥çœ‹ util &#x2F;helperä¹‹ç±»çš„ ä»£ç æ—¶ï¼Œå…ˆçœ‹å¯¹åº”çš„æµ‹è¯•ä»£ç å¯ä»¥ å¿«é€ŸçŸ¥é“è¿™ä¸ªä»£ç æ˜¯å¹²å•¥ç”¨çš„ï¼Œå†é˜…è¯»ä»£ç å°±ä¼šæ›´å®¹æ˜“ç†è§£</li>
<li>æ¯”å¦‚queryé‡Œæ˜æ˜æ˜¯å¯ä»¥ç”¨<code>misc.js</code>çš„<code>extend</code> ä¸ºä½•æ²¡ç”¨&#x3D;ã€‚&#x3D; æ˜¯æœ‰ä»€ä¹ˆè€ƒè™‘ä¹ˆ</li>
<li>Object.freezeï¼Œæ²¡æœ‰æ·±å…¥ç ”ç©¶ï¼Œä½†æ‹‰å»å±æ€§å¯ä»¥çœ‹åˆ°writableéƒ½å˜æˆfalse</li>
<li>è¿™é‡Œä¸ºäº†å…¼å®¹å¤šç§è¯­æ³•ï¼Œé‡‡ç”¨çš„æ˜¯åœ¨å…·ä½“çš„å‡½æ•°é‡Œæ¥å—+ä¸€å †ifæ¥å¤„ç†ï¼Œè€Œä¸æ˜¯æä¾›å•ä¸€æ ‡å‡†å‚æ•°è®©è°ƒç”¨è€…æ§åˆ¶å‚æ•°ã€‚</li>
<li><code>this.$scopedSlots.default(&#123;</code>æ²¡æœ‰æŸ¥åˆ°,ä½†æ˜¯ çœ‹æºç ä¸­çš„ts æ˜¯ <code>$scopedSlots[slotåå­—]=(props:any)=&gt;ScopedSlotChildren;</code>)</li>
<li>çœ‹å¤šäº†æºç  ä½ ä¼šå‘ç°å¾ˆå¤š<code>process.env.NODE_ENV !== &#39;production&#39;</code> æ—¶ä¼šæŠ¥warn,åŒæ—¶ ä¹ŸçŸ¥é“äº†å¦‚æœä½ è¦è´Ÿè´£æ„å»ºæ‰“åŒ…ï¼Œçœ‹ä¼¼ ä¸€ä¸ªå­—ç¬¦ä¸²â€™productionâ€™å…¶å®æ˜¯ä¼šå‚ä¸é€»è¾‘</li>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/v2/guide/render-function.html#Functional-Components">functional ç»„ä»¶</a> </li>
<li>é‡Œé¢å®ç°çš„å‡½æ•°æœ‰ä¸€äº›æ½œåœ¨side-effectçš„ æ¯”å¦‚ match,å¯èƒ½ä¼šä¿®æ”¹åˆ°raw,è¿™ç§æ—¶å€™å°±ä¼šæ€€å¿µC++çš„constå¼•ç”¨</li>
</ol>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/hashchange_event">hashchange äº‹ä»¶ moziliaæ–‡æ¡£</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/popstate_event">popstate</a></p>
<p><a target="_blank" rel="noopener" href="https://flow.org/en/docs/">flow</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base">base tag</a></p>
<h1 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h1><p>çœ‹ä¸€ä¸‹ mixinæ–‡æ¡£äº†ï¼Œä¸ç„¶æœ‰äº›æ–¹æ³•çœ‹å¾—ä¸å¤ªç†è§£</p>
<ul>
<li>install, beforeCreate, $options registerRouteInstance?,defineProperty</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://vuejs.org/v2/api/#optionMergeStrategies">https://vuejs.org/v2/api/#optionMergeStrategies</a></p>
<p>Vue.util.defineReactive(this, â€˜_routeâ€™, this._router.history.current)</p>
<p>pwa</p>
<p>vue-ssr</p>
<p>ivew</p>
<p>å•å…ƒæµ‹è¯•</p>
<p>nuxtjs</p>
<p><a target="_blank" rel="noopener" href="https://npmdoc.github.io/node-npmdoc-vue/build..beta..travis-ci.org/apidoc.html#apidoc.element.vue.util.defineReactive">https://npmdoc.github.io/node-npmdoc-vue/build..beta..travis-ci.org/apidoc.html#apidoc.element.vue.util.defineReactive</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/19-08-26-design-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/19-08-26-design-pattern/" class="post-title-link" itemprop="url">è®¾è®¡æ¨¡å¼ é˜…è¯»ç¬”è®°</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

      <time title="å‰µå»ºæ™‚é–“ï¼š2019-08-26 15:09:01" itemprop="dateCreated datePublished" datetime="2019-08-26T15:09:01+08:00">2019-08-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
      <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-02-05 11:23:06" itemprop="dateModified" datetime="2023-02-05T11:23:06+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/notes/book/" itemprop="url" rel="index"><span itemprop="name">book</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Blog/19-08-26-design-pattern/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="19-08-26-design-pattern/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æ–‡ç« å­—æ•¸ï¼š</span>
      <span>11k</span>
    </span>
    <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">æ‰€éœ€é–±è®€æ™‚é–“ &asymp;</span>
      <span>10 åˆ†é˜</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>19-08-26 -&gt; 19-</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/design-pattern/design-pattern-tutorial.html">https://www.runoob.com/design-pattern/design-pattern-tutorial.html</a></p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/the-relationship-between-design-patterns.jpg" alt="relation"></p>
<h1 id="åˆ›å»ºå‹æ¨¡å¼"><a href="#åˆ›å»ºå‹æ¨¡å¼" class="headerlink" title="åˆ›å»ºå‹æ¨¡å¼"></a>åˆ›å»ºå‹æ¨¡å¼</h1><p>è¿™äº›è®¾è®¡æ¨¡å¼æä¾›äº†ä¸€ç§åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ new è¿ç®—ç¬¦ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚è¿™ä½¿å¾—ç¨‹åºåœ¨åˆ¤æ–­é’ˆå¯¹æŸä¸ªç»™å®šå®ä¾‹éœ€è¦åˆ›å»ºå“ªäº›å¯¹è±¡æ—¶æ›´åŠ çµæ´»ã€‚</p>
<p>1ã€å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰</p>
<p>å¼€é—­åŸåˆ™çš„æ„æ€æ˜¯ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚ç®€è¨€ä¹‹ï¼Œæ˜¯ä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œåé¢çš„å…·ä½“è®¾è®¡ä¸­æˆ‘ä»¬ä¼šæåˆ°è¿™ç‚¹ã€‚</p>
<p>2ã€é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰</p>
<p>é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚ é‡Œæ°ä»£æ¢åŸåˆ™ä¸­è¯´ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚LSP æ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“æ´¾ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œä¸”è½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œæ´¾ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å¼€é—­åŸåˆ™çš„è¡¥å……ã€‚å®ç°å¼€é—­åŸåˆ™çš„å…³é”®æ­¥éª¤å°±æ˜¯æŠ½è±¡åŒ–ï¼Œè€ŒåŸºç±»ä¸å­ç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–çš„å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚</p>
<p>3ã€ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰</p>
<p>è¿™ä¸ªåŸåˆ™æ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚</p>
<p>4ã€æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰</p>
<p>è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚å®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ„æ€æ˜¯ï¼šé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ã€‚ç”±æ­¤å¯è§ï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ã€ä¾¿äºå‡çº§å’Œç»´æŠ¤çš„è½¯ä»¶è®¾è®¡æ€æƒ³ï¼Œå®ƒå¼ºè°ƒé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚</p>
<p>5ã€è¿ªç±³ç‰¹æ³•åˆ™ï¼Œåˆç§°æœ€å°‘çŸ¥é“åŸåˆ™ï¼ˆDemeter Principleï¼‰</p>
<p>æœ€å°‘çŸ¥é“åŸåˆ™æ˜¯æŒ‡ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘åœ°ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚</p>
<p>6ã€åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰</p>
<p>åˆæˆå¤ç”¨åŸåˆ™æ˜¯æŒ‡ï¼šå°½é‡ä½¿ç”¨åˆæˆ&#x2F;èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚</p>
<table>
<thead>
<tr>
<th>æ¨¡å¼åç§°</th>
<th>ç®€å•æ¦‚æ‹¬</th>
</tr>
</thead>
<tbody><tr>
<td>å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰</td>
<td>ä»newå˜ä¸ºä»å·¥å‚æ‹¿å…·ä½“ç±»</td>
</tr>
<tr>
<td>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰</td>
<td>å…¶å®ƒå·¥å‚çš„å·¥å‚</td>
</tr>
<tr>
<td>å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰</td>
<td>æŸä½œç”¨åŸŸå”¯ä¸€çš„ï¼Œå­˜åœ¨0æˆ–1ä¸ª</td>
</tr>
<tr>
<td>å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰</td>
<td>åˆ†ç¦»ä¸å˜(åŸºæœ¬å…ƒç´ )å’Œæ˜“å˜æ¨¡å—(ç»„åˆåŸºæœ¬å…ƒç´ çš„æ–¹æ³•)</td>
</tr>
<tr>
<td>åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰</td>
<td>é‡å†™cloneæ–¹æ³• æ§åˆ¶é‡å¤å¯¹è±¡å…‹éš†çš„ä»£ä»·</td>
</tr>
</tbody></table>
<h2 id="å·¥å‚æ¨¡å¼ï¼ˆFactory-Patternï¼‰"><a href="#å·¥å‚æ¨¡å¼ï¼ˆFactory-Patternï¼‰" class="headerlink" title="å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰"></a>å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰</h2><p>å¤æ‚å¯¹è±¡é€‚åˆä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œè€Œç®€å•å¯¹è±¡ï¼Œç‰¹åˆ«æ˜¯åªéœ€è¦é€šè¿‡ new å°±å¯ä»¥å®Œæˆåˆ›å»ºçš„å¯¹è±¡ï¼Œæ— éœ€ä½¿ç”¨å·¥å‚æ¨¡å¼ã€‚å¦‚æœä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œå°±éœ€è¦å¼•å…¥ä¸€ä¸ªå·¥å‚ç±»ï¼Œä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/factory_pattern_uml_diagram.jpg" alt="factory pattern"></p>
<p>ä¸»ç¨‹åº new å·¥å‚</p>
<p>é€šè¿‡å·¥å‚æ–¹æ³•è·å¾—æœ‰æŸäº›æ¥å£å®ç°çš„å®ä¾‹</p>
<p>è°ƒç”¨å®ä¾‹çš„æ¥å£æ–¹æ³•</p>
<p>å¦‚ä¸Šå›¾ï¼Œå¯¹äºmainæ¥è¯´å·¦è¾¹æ¡†ä¸­é™¤äº† interface Shapeä»¥å¤– æ˜¯æœªçŸ¥çš„ï¼Œé€šè¿‡è°ƒç”¨Shape Factoryæ¥åˆ›å»ºå…·ä½“å®ç°äº†Shapeçš„å®ä¾‹</p>
<h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract-Factory-Patternï¼‰"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract-Factory-Patternï¼‰" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰"></a>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰</h2><p>å…¶ä»–å·¥å‚çš„å·¥å‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/abstractfactory_pattern_uml_diagram.jpg" alt="Abstract Factory Pattern"></p>
<p>è®²å°±æ˜¯ï¼Œé€šè¿‡å…¶å®ƒå·¥å‚çš„å·¥å‚æ¥åˆ›å»ºå·¥å‚ï¼Œå†é€šè¿‡åˆ›å»ºå‡ºçš„å·¥å‚æ¥è°ƒç”¨å…·ä½“çš„å¯¹è±¡åˆ›å»º</p>
<h2 id="å•ä¾‹æ¨¡å¼ï¼ˆSingleton-Patternï¼‰"><a href="#å•ä¾‹æ¨¡å¼ï¼ˆSingleton-Patternï¼‰" class="headerlink" title="å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰"></a>å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰</h2><ol>
<li>å•ä¾‹ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ã€‚</li>
<li>å•ä¾‹ç±»å¿…é¡»è‡ªå·±åˆ›å»ºè‡ªå·±çš„å”¯ä¸€å®ä¾‹ã€‚</li>
<li>å•ä¾‹ç±»å¿…é¡»ç»™æ‰€æœ‰å…¶ä»–å¯¹è±¡æä¾›è¿™ä¸€å®ä¾‹ã€‚</li>
</ol>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/singleton_pattern_uml_diagram.jpg" alt="singleton pattern"></p>
<h3 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h3><p>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼šæ˜¯</p>
<p>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼šå¦</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;  </span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span> <span class="params">()</span>&#123;&#125;  </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;  </span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;  </span><br><span class="line">      instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> instance;  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼šæ˜¯</p>
<p>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼šæ˜¯</p>
<p>è¿™ç§æ–¹å¼å…·å¤‡å¾ˆå¥½çš„ lazy loadingï¼Œèƒ½å¤Ÿåœ¨å¤šçº¿ç¨‹ä¸­å¾ˆå¥½çš„å·¥ä½œï¼Œä½†æ˜¯ï¼Œæ•ˆç‡å¾ˆä½ï¼Œ99% æƒ…å†µä¸‹ä¸éœ€è¦åŒæ­¥<br>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;  </span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span> <span class="params">()</span>&#123;&#125;  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123; <span class="comment">// ç›¸å¯¹æ¥è¯´ ä¿è¯äº†å¤šçº¿ç¨‹å®‰å…¨</span></span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;  </span><br><span class="line">      instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> instance;  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼šå¦</p>
<p>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼šæ˜¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>(); <span class="comment">// é»˜è®¤åˆå§‹åŒ–å•ä¾‹å®ä¾‹ ä½†å¯èƒ½ä¸ä¼šç”¨åˆ°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span> <span class="params">()</span>&#123;&#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;  </span><br><span class="line">      <span class="keyword">return</span> instance;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒæ£€é”&#x2F;åŒé‡æ ¡éªŒé”ï¼ˆDCLï¼Œå³ double-checked lockingï¼‰</p>
<p>JDK ç‰ˆæœ¬ï¼šJDK1.5 èµ·</p>
<p>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼šæ˜¯</p>
<p>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼šæ˜¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton singleton;  </span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span> <span class="params">()</span>&#123;&#125;  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getSingleton</span><span class="params">()</span> &#123;  </span><br><span class="line">    <span class="keyword">if</span> (singleton == <span class="literal">null</span>) &#123;   <span class="comment">// å› ä¸ºæœ€å¤š0æ¬¡æˆ–1æ­¤åˆ›å»º è€Œå¦‚æœä½¿ç”¨å¤§å¤šæ•°éƒ½æ˜¯ != null</span></span><br><span class="line">      <span class="keyword">synchronized</span> (Singleton.class) &#123;  </span><br><span class="line">        <span class="keyword">if</span> (singleton == <span class="literal">null</span>) &#123;  </span><br><span class="line">          singleton = <span class="keyword">new</span> <span class="title class_">Singleton</span>();  </span><br><span class="line">        &#125;  </span><br><span class="line">      &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> singleton;  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç™»è®°å¼&#x2F;é™æ€å†…éƒ¨ç±»</p>
<p>åˆ©ç”¨äº† classloader æœºåˆ¶æ¥ä¿è¯åˆå§‹åŒ– instance æ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SingletonHolder</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Singleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();  </span><br><span class="line">  &#125;  </span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span> <span class="params">()</span>&#123;&#125;  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;  </span><br><span class="line">    <span class="keyword">return</span> SingletonHolder.INSTANCE;  <span class="comment">// åªæœ‰é€šè¿‡æ˜¾å¼è°ƒç”¨ getInstance æ–¹æ³•æ—¶ï¼Œæ‰ä¼šæ˜¾å¼è£…è½½ SingletonHolder ç±»ï¼Œä»è€Œå®ä¾‹åŒ– instance</span></span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JDK ç‰ˆæœ¬ï¼šJDK1.5 èµ·</p>
<p>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼šå¦</p>
<p>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼šæ˜¯</p>
<p>è¿™ç§å®ç°æ–¹å¼è¿˜æ²¡æœ‰è¢«å¹¿æ³›é‡‡ç”¨ï¼Œä½†è¿™æ˜¯å®ç°å•ä¾‹æ¨¡å¼çš„æœ€ä½³æ–¹æ³•ã€‚å®ƒæ›´ç®€æ´ï¼Œè‡ªåŠ¨æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œç»å¯¹é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–ã€‚</p>
<p>è¿™ç§æ–¹å¼æ˜¯ Effective Java ä½œè€… Josh Bloch æå€¡çš„æ–¹å¼ï¼Œå®ƒä¸ä»…èƒ½é¿å…å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œè€Œä¸”è¿˜è‡ªåŠ¨æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œé˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œç»å¯¹é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–ã€‚ä¸è¿‡ï¼Œç”±äº JDK1.5 ä¹‹åæ‰åŠ å…¥ enum ç‰¹æ€§ï¼Œç”¨è¿™ç§æ–¹å¼å†™ä¸å…è®©äººæ„Ÿè§‰ç”Ÿç–ï¼Œåœ¨å®é™…å·¥ä½œä¸­ï¼Œä¹Ÿå¾ˆå°‘ç”¨ã€‚</p>
<p>ä¸èƒ½é€šè¿‡ reflection attack æ¥è°ƒç”¨ç§æœ‰æ„é€ æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Singleton</span> &#123;  </span><br><span class="line">    INSTANCE;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">whateverMethod</span><span class="params">()</span> &#123;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»éªŒä¹‹è°ˆï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸å»ºè®®ä½¿ç”¨ç¬¬ 1 ç§å’Œç¬¬ 2 ç§æ‡’æ±‰æ–¹å¼ï¼Œå»ºè®®ä½¿ç”¨ç¬¬ 3 ç§é¥¿æ±‰æ–¹å¼ã€‚åªæœ‰åœ¨è¦æ˜ç¡®å®ç° lazy loading æ•ˆæœæ—¶ï¼Œæ‰ä¼šä½¿ç”¨ç¬¬ 5 ç§ç™»è®°æ–¹å¼ã€‚å¦‚æœæ¶‰åŠåˆ°ååºåˆ—åŒ–åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ç¬¬ 6 ç§æšä¸¾æ–¹å¼ã€‚å¦‚æœæœ‰å…¶ä»–ç‰¹æ®Šçš„éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç¬¬ 4 ç§åŒæ£€é”æ–¹å¼ã€‚</p>
<h2 id="å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder-Patternï¼‰"><a href="#å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder-Patternï¼‰" class="headerlink" title="å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰"></a>å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰</h2><p>åˆ†ç¦» å¸¸å˜å’Œä¸å˜çš„</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/builder_pattern_uml_diagram.jpg" alt="builder pattern"></p>
<p>å¦‚ä¸Šï¼Œå…·ä½“çš„é£Ÿç‰© ç­‰æ˜¯ä¸å˜çš„ï¼Œè€Œ å¥—é¤ç»„åˆæ˜¯å˜åŒ–çš„&#x3D;.&#x3D;æˆ‘æš‚æ—¶æ²¡æœ‰æƒ³åˆ°ä»£ç ä¸­çš„ç”¨ä¾‹</p>
<p>ä½¿ç”¨åœºæ™¯ï¼š 1ã€éœ€è¦ç”Ÿæˆçš„å¯¹è±¡å…·æœ‰å¤æ‚çš„å†…éƒ¨ç»“æ„ã€‚ 2ã€éœ€è¦ç”Ÿæˆçš„å¯¹è±¡å†…éƒ¨å±æ€§æœ¬èº«ç›¸äº’ä¾èµ–ã€‚</p>
<p>æ³¨æ„äº‹é¡¹ï¼šä¸å·¥å‚æ¨¡å¼çš„åŒºåˆ«æ˜¯ï¼šå»ºé€ è€…æ¨¡å¼æ›´åŠ å…³æ³¨ä¸é›¶ä»¶è£…é…çš„é¡ºåºã€‚</p>
<h2 id="åŸå‹æ¨¡å¼ï¼ˆPrototype-Patternï¼‰"><a href="#åŸå‹æ¨¡å¼ï¼ˆPrototype-Patternï¼‰" class="headerlink" title="åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰"></a>åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰</h2><p>åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰æ˜¯ç”¨äºåˆ›å»ºé‡å¤çš„å¯¹è±¡ï¼ŒåŒæ—¶åˆèƒ½ä¿è¯æ€§èƒ½ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚</p>
<p>è¿™ç§æ¨¡å¼æ˜¯å®ç°äº†ä¸€ä¸ªåŸå‹æ¥å£ï¼Œè¯¥æ¥å£ç”¨äºåˆ›å»ºå½“å‰å¯¹è±¡çš„å…‹éš†ã€‚å½“ç›´æ¥åˆ›å»ºå¯¹è±¡çš„ä»£ä»·æ¯”è¾ƒå¤§æ—¶ï¼Œåˆ™é‡‡ç”¨è¿™ç§æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯¹è±¡éœ€è¦åœ¨ä¸€ä¸ªé«˜ä»£ä»·çš„æ•°æ®åº“æ“ä½œä¹‹åè¢«åˆ›å»ºã€‚æˆ‘ä»¬å¯ä»¥ç¼“å­˜è¯¥å¯¹è±¡ï¼Œåœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚æ—¶è¿”å›å®ƒçš„å…‹éš†ï¼Œåœ¨éœ€è¦çš„æ—¶å€™æ›´æ–°æ•°æ®åº“ï¼Œä»¥æ­¤æ¥å‡å°‘æ•°æ®åº“è°ƒç”¨ã€‚</p>
<p>å…³é”®ä»£ç ï¼š 1ã€å®ç°å…‹éš†æ“ä½œï¼Œåœ¨ JAVA ç»§æ‰¿ Cloneableï¼Œé‡å†™ clone()ï¼Œåœ¨ .NET ä¸­å¯ä»¥ä½¿ç”¨ Object ç±»çš„ MemberwiseClone() æ–¹æ³•æ¥å®ç°å¯¹è±¡çš„æµ…æ‹·è´æˆ–é€šè¿‡åºåˆ—åŒ–çš„æ–¹å¼æ¥å®ç°æ·±æ‹·è´ã€‚ 2ã€åŸå‹æ¨¡å¼åŒæ ·ç”¨äºéš”ç¦»ç±»å¯¹è±¡çš„ä½¿ç”¨è€…å’Œå…·ä½“ç±»å‹ï¼ˆæ˜“å˜ç±»ï¼‰ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œå®ƒåŒæ ·è¦æ±‚è¿™äº›â€æ˜“å˜ç±»â€æ‹¥æœ‰ç¨³å®šçš„æ¥å£ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒåŸå‹æ¨¡å¼å¾ˆå°‘å•ç‹¬å‡ºç°ï¼Œä¸€èˆ¬æ˜¯å’Œå·¥å‚æ–¹æ³•æ¨¡å¼ä¸€èµ·å‡ºç°ï¼Œé€šè¿‡ clone çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åç”±å·¥å‚æ–¹æ³•æä¾›ç»™è°ƒç”¨è€…ã€‚åŸå‹æ¨¡å¼å·²ç»ä¸ Java èä¸ºæµ‘ç„¶ä¸€ä½“ï¼Œå¤§å®¶å¯ä»¥éšæ‰‹æ‹¿æ¥ä½¿ç”¨ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/prototype_pattern_uml_diagram.jpg" alt="Prototype Pattern"></p>
<h1 id="ç»“æ„å‹æ¨¡å¼"><a href="#ç»“æ„å‹æ¨¡å¼" class="headerlink" title="ç»“æ„å‹æ¨¡å¼"></a>ç»“æ„å‹æ¨¡å¼</h1><p>è¿™äº›è®¾è®¡æ¨¡å¼å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»„åˆã€‚ç»§æ‰¿çš„æ¦‚å¿µè¢«ç”¨æ¥ç»„åˆæ¥å£å’Œå®šä¹‰ç»„åˆå¯¹è±¡è·å¾—æ–°åŠŸèƒ½çš„æ–¹å¼ã€‚</p>
<table>
<thead>
<tr>
<th>æ¨¡å¼åç§°</th>
<th>ç®€å•æ¦‚æ‹¬</th>
</tr>
</thead>
<tbody><tr>
<td>é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰</td>
<td>è§£å†³ æ¥å£ä¸å…¼å®¹ å¦‚wine</td>
</tr>
<tr>
<td>æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰</td>
<td>æŠ½è±¡å®ä½“è§£è€¦</td>
</tr>
<tr>
<td>è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria Patternï¼‰</td>
<td>æŠ½è±¡è¿‡æ»¤æ–¹æ³• å®ç°ä¸åŒè¿‡æ»¤å™¨</td>
</tr>
<tr>
<td>ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰</td>
<td>æ ‘å½¢ç»“æ„</td>
</tr>
<tr>
<td>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰</td>
<td>ä¸ä½¿ç”¨å­ç±» åŒ…ä¸€å±‚ å¢åŠ æ–¹æ³•</td>
</tr>
<tr>
<td>å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰</td>
<td>å¤æ‚åŒ–å†…éƒ¨ ç®€åŒ–å¯¹å¤–æ¥å£</td>
</tr>
<tr>
<td>äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰</td>
<td>å¤ç”¨ å¤§é‡ç»†ç²’åº¦å¯¹è±¡</td>
</tr>
<tr>
<td>ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰</td>
<td>ä¸­é—´å•† æŠ½è±¡&#x2F;ç®¡ç†cacheç­‰ osé‡Œå¸¸è§</td>
</tr>
</tbody></table>
<h2 id="é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter-Patternï¼‰"><a href="#é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter-Patternï¼‰" class="headerlink" title="é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰"></a>é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰</h2><p>ä¸å…¼å®¹å€Ÿå£ä¹‹é—´çš„æ¡¥æ¢</p>
<p>1ã€ç¾å›½ç”µå™¨ 110Vï¼Œä¸­å›½ 220Vï¼Œå°±è¦æœ‰ä¸€ä¸ªé€‚é…å™¨å°† 110V è½¬åŒ–ä¸º 220Vã€‚ 2ã€JAVA JDK 1.1 æä¾›äº† Enumeration æ¥å£ï¼Œè€Œåœ¨ 1.2 ä¸­æä¾›äº† Iterator æ¥å£ï¼Œæƒ³è¦ä½¿ç”¨ 1.2 çš„ JDKï¼Œåˆ™è¦å°†ä»¥å‰ç³»ç»Ÿçš„ Enumeration æ¥å£è½¬åŒ–ä¸º Iterator æ¥å£ï¼Œè¿™æ—¶å°±éœ€è¦é€‚é…å™¨æ¨¡å¼ã€‚ 3ã€åœ¨ LINUX ä¸Šè¿è¡Œ WINDOWS ç¨‹åºã€‚ 4ã€JAVA ä¸­çš„ jdbcã€‚</p>
<p>è¿™ä¸ªè‡ªå·±æœ‰é‡åˆ°è¿‡</p>
<ol>
<li>ä¹‹å‰æ”¹å†™çš„oiTerminal,ç›®çš„æ˜¯åŒæ—¶å…¼å®¹ä¸åŒçš„oj çš„é¡µé¢è®¿é—®è¯·æ±‚ å’Œè§£æ</li>
<li>ä¹‹å‰ä¹Ÿæœ‰åœ¨wukongé¡¹ç›®é‡Œçœ‹è¿‡ ç½‘è·¯è®¿é—®åšçš„ adapter</li>
</ol>
<p>æœ‰åŠ¨æœºåœ°ä¿®æ”¹ä¸€ä¸ªæ­£å¸¸è¿è¡Œçš„ç³»ç»Ÿçš„æ¥å£ï¼Œè¿™æ—¶åº”è¯¥è€ƒè™‘ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/adapter_pattern_uml_diagram.jpg" alt="Adapter Pattern"></p>
<h2 id="æ¡¥æ¥æ¨¡å¼ï¼ˆBridge-Patternï¼‰"><a href="#æ¡¥æ¥æ¨¡å¼ï¼ˆBridge-Patternï¼‰" class="headerlink" title="æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰"></a>æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰</h2><p>ç”¨æŠ½è±¡è§£è€¦å®ç°åŒ–</p>
<p>å¯¹äºä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä½¿ç”¨æ¡¥æ¥æ¨¡å¼å†é€‚åˆä¸è¿‡äº†ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/bridge_pattern_uml_diagram.jpg" alt="Bridge"></p>
<h2 id="è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria-Patternï¼‰"><a href="#è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria-Patternï¼‰" class="headerlink" title="è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria Patternï¼‰"></a>è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria Patternï¼‰</h2><p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/filter_pattern_uml_diagram.jpg" alt="Filter"></p>
<p>æ¥å£æ˜¯ meetCriteria</p>
<p>ä¸åŒçš„è¿‡æ»¤å™¨ä¸åŒçš„å®ç°æ–¹å¼</p>
<h2 id="ç»„åˆæ¨¡å¼ï¼ˆComposite-Patternï¼‰"><a href="#ç»„åˆæ¨¡å¼ï¼ˆComposite-Patternï¼‰" class="headerlink" title="ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰"></a>ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰</h2><p>æ•´ä½“éƒ¨åˆ†æ¨¡å¼ï¼Œæ ‘å½¢æ¨¡å¼?</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/composite_pattern_uml_diagram.jpg" alt="Composite Pattern"></p>
<h2 id="è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator-Patternï¼‰"><a href="#è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator-Patternï¼‰" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰"></a>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰</h2><p>ç°æœ‰ç±»çš„ä¸€ä¸ªåŒ…è£…</p>
<p>åŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ é¢å¤–çš„èŒè´£</p>
<p>æ¯”å­ç±»æ›´çµæ´» æ¯”å¦‚rustçš„macroçš„ <a href="https://cromarmot.github.io/Blog/19-08-15-rust/#Macros">https://cromarmot.github.io/Blog/19-08-15-rust/#Macros</a></p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/decorator_pattern_uml_diagram.jpg" alt="Decorator Pattern"></p>
<h2 id="å¤–è§‚æ¨¡å¼ï¼ˆFacade-Patternï¼‰"><a href="#å¤–è§‚æ¨¡å¼ï¼ˆFacade-Patternï¼‰" class="headerlink" title="å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰"></a>å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰</h2><p>ä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå¦‚æœè¦æ”¹ä¸œè¥¿å¾ˆéº»çƒ¦ï¼Œç»§æ‰¿é‡å†™éƒ½ä¸åˆé€‚ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ï¼š 1ã€ä¸ºå¤æ‚çš„æ¨¡å—æˆ–å­ç³»ç»Ÿæä¾›å¤–ç•Œè®¿é—®çš„æ¨¡å—ã€‚ 2ã€å­ç³»ç»Ÿç›¸å¯¹ç‹¬ç«‹ã€‚ 3ã€é¢„é˜²ä½æ°´å¹³äººå‘˜å¸¦æ¥çš„é£é™©ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/facade_pattern_uml_diagram.jpg" alt="Facade Pattern"></p>
<h2 id="äº«å…ƒæ¨¡å¼ï¼ˆFlyweight-Patternï¼‰"><a href="#äº«å…ƒæ¨¡å¼ï¼ˆFlyweight-Patternï¼‰" class="headerlink" title="äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰"></a>äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰</h2><p>æŠ½ç¦»å‡ºå¤§é‡ç»†åŠ›åº¦å¯¹è±¡å¤ç”¨</p>
<p>HashMap ,å¦‚ä¸‹å›¾çš„circleMap</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/flyweight_pattern_uml_diagram-1.jpg" alt="Flyweight Pattern"></p>
<h2 id="ä»£ç†æ¨¡å¼ï¼ˆProxy-Patternï¼‰"><a href="#ä»£ç†æ¨¡å¼ï¼ˆProxy-Patternï¼‰" class="headerlink" title="ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰"></a>ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰</h2><p>æŒ‰èŒè´£æ¥åˆ’åˆ†ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹ä½¿ç”¨åœºæ™¯ï¼š 1ã€è¿œç¨‹ä»£ç†ã€‚ 2ã€è™šæ‹Ÿä»£ç†ã€‚ 3ã€Copy-on-Write ä»£ç†ã€‚ 4ã€ä¿æŠ¤ï¼ˆProtect or Accessï¼‰ä»£ç†ã€‚ 5ã€Cacheä»£ç†ã€‚ 6ã€é˜²ç«å¢™ï¼ˆFirewallï¼‰ä»£ç†ã€‚ 7ã€åŒæ­¥åŒ–ï¼ˆSynchronizationï¼‰ä»£ç†ã€‚ 8ã€æ™ºèƒ½å¼•ç”¨ï¼ˆSmart Referenceï¼‰ä»£ç†ã€‚</p>
<p>å†™è¿‡æ“ä½œç³»ç»Ÿlabä»£ç çš„åº”è¯¥æ˜¯ å†ç†Ÿæ‚‰ä¸è¿‡äº†</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/proxy_pattern_uml_diagram.jpg" alt="Proxy Pattern"></p>
<p>#è¡Œä¸ºå‹æ¨¡å¼</p>
<p>è¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<h2 id="è´£ä»»é“¾æ¨¡å¼ï¼ˆChain-of-Responsibility-Patternï¼‰"><a href="#è´£ä»»é“¾æ¨¡å¼ï¼ˆChain-of-Responsibility-Patternï¼‰" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰"></a>è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰</h2><p>1ã€ä¸èƒ½ä¿è¯è¯·æ±‚ä¸€å®šè¢«æ¥æ”¶ã€‚ 2ã€ç³»ç»Ÿæ€§èƒ½å°†å—åˆ°ä¸€å®šå½±å“ï¼Œè€Œä¸”åœ¨è¿›è¡Œä»£ç è°ƒè¯•æ—¶ä¸å¤ªæ–¹ä¾¿ï¼Œå¯èƒ½ä¼šé€ æˆå¾ªç¯è°ƒç”¨ã€‚ 3ã€å¯èƒ½ä¸å®¹æ˜“è§‚å¯Ÿè¿è¡Œæ—¶çš„ç‰¹å¾ï¼Œæœ‰ç¢äºé™¤é”™ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ï¼š 1ã€æœ‰å¤šä¸ªå¯¹è±¡å¯ä»¥å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œå…·ä½“å“ªä¸ªå¯¹è±¡å¤„ç†è¯¥è¯·æ±‚ç”±è¿è¡Œæ—¶åˆ»è‡ªåŠ¨ç¡®å®šã€‚ 2ã€åœ¨ä¸æ˜ç¡®æŒ‡å®šæ¥æ”¶è€…çš„æƒ…å†µä¸‹ï¼Œå‘å¤šä¸ªå¯¹è±¡ä¸­çš„ä¸€ä¸ªæäº¤ä¸€ä¸ªè¯·æ±‚ã€‚ 3ã€å¯åŠ¨æ€æŒ‡å®šä¸€ç»„å¯¹è±¡å¤„ç†è¯·æ±‚ã€‚</p>
<p>æˆ‘èƒ½æƒ³åˆ°çš„å¦‚nodejsä¸­expressçš„ä¸­é—´ä»¶?</p>
<p>è‡ªå·±èƒ½å¤„ç†åˆ™å¤„ç†å¦åˆ™ä¼ é€’ç»™é“¾ä¸Šçš„ä¸‹ä¸€ä¸ªå¤„ç†å‡½æ•°</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/chain_pattern_uml_diagram.jpg" alt="Chain"></p>
<p>é“¾ä¸Šæ‰€æœ‰çš„ç±»éƒ½éœ€è¦å®ç°æŠ½è±¡ç±»,å¦‚ä¸Šé¢çš„AbstractLogger</p>
<h2 id="å‘½ä»¤æ¨¡å¼ï¼ˆCommand-Patternï¼‰"><a href="#å‘½ä»¤æ¨¡å¼ï¼ˆCommand-Patternï¼‰" class="headerlink" title="å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰"></a>å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰</h2><p>å…³é”®ä»£ç ï¼šå®šä¹‰ä¸‰ä¸ªè§’è‰²ï¼š1ã€received çœŸæ­£çš„å‘½ä»¤æ‰§è¡Œå¯¹è±¡ 2ã€Command 3ã€invoker ä½¿ç”¨å‘½ä»¤å¯¹è±¡çš„å…¥å£</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/command_pattern_uml_diagram.jpg" alt="command"></p>
<p>å¦‚ä¸Š Stockæ˜¯å®ä½“ç”¨çš„ç±»</p>
<p>Orderçš„å…·ä½“å®ç°BuyStock å’Œ SellStockæ˜¯è¦å¯¹ä¸€ä¸ªå…·ä½“Stockæ“ä½œçš„æ–¹æ³•</p>
<p>Brokeræ˜¯æ‰§è¡Œè€…</p>
<h2 id="è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter-Patternï¼‰"><a href="#è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter-Patternï¼‰" class="headerlink" title="è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰"></a>è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰</h2><p>å¦‚æœä¸€ç§ç‰¹å®šç±»å‹çš„é—®é¢˜å‘ç”Ÿçš„é¢‘ç‡è¶³å¤Ÿé«˜ï¼Œé‚£ä¹ˆå¯èƒ½å°±å€¼å¾—å°†è¯¥é—®é¢˜çš„å„ä¸ªå®ä¾‹è¡¨è¿°ä¸ºä¸€ä¸ªç®€å•è¯­è¨€ä¸­çš„å¥å­ã€‚è¿™æ ·å°±å¯ä»¥æ„å»ºä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¯¥è§£é‡Šå™¨é€šè¿‡è§£é‡Šè¿™äº›å¥å­æ¥è§£å†³è¯¥é—®é¢˜ã€‚</p>
<p>å¦‚ä¹‹å‰å†™è¿‡çš„sparqlè§£æå™¨</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/interpreter_pattern_uml_diagram.jpg" alt="Interpreter Pattern"></p>
<h2 id="è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator-Patternï¼‰"><a href="#è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator-Patternï¼‰" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰"></a>è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰</h2><p>èšåˆå¯¹è±¡å†…éƒ¨éå†æ–¹æ³•ï¼Œä½†æ˜¯ä¸æš´éœ²å…·ä½“å†…éƒ¨å®ç°</p>
<p>æ¯”å¦‚rustå·²ç»è¯´åšåˆ°ç”¨iterèƒ½å’Œ for indexåšå½“ç›¸åŒæ•ˆç‡çš„è¿­ä»£å™¨äº†</p>
<p>C++é‡Œå¸¸è§çš„stlé‡Œå„ç§è¿­ä»£å™¨</p>
<p>&#x2F;&#x2F; å°±æˆ‘å¯¹è¿­ä»£å™¨ä½¿ç”¨ç†è§£æ¥è¯´ï¼Œè¿™é‡Œæå‡ºçš„ç¼ºç‚¹æ˜¯ä¸ªä»€ä¹ˆé¬¼</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/iterator_pattern_uml_diagram.jpg" alt="iterator"></p>
<h2 id="ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator-Patternï¼‰"><a href="#ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator-Patternï¼‰" class="headerlink" title="ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰"></a>ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰</h2><p>ä½•æ—¶ä½¿ç”¨ï¼šå¤šä¸ªç±»ç›¸äº’è€¦åˆï¼Œå½¢æˆäº†ç½‘çŠ¶ç»“æ„ã€‚</p>
<p>å¦‚ä½•è§£å†³ï¼šå°†ä¸Šè¿°ç½‘çŠ¶ç»“æ„åˆ†ç¦»ä¸ºæ˜Ÿå‹ç»“æ„ã€‚</p>
<p>2ã€æœºåœºè°ƒåº¦ç³»ç»Ÿã€‚ 3ã€MVC æ¡†æ¶ï¼Œå…¶ä¸­Cï¼ˆæ§åˆ¶å™¨ï¼‰å°±æ˜¯ Mï¼ˆæ¨¡å‹ï¼‰å’Œ Vï¼ˆè§†å›¾ï¼‰çš„ä¸­ä»‹è€…ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/mediator_pattern_uml_diagram.jpg" alt="Mediator"></p>
<h2 id="å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento-Patternï¼‰"><a href="#å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento-Patternï¼‰" class="headerlink" title="å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰"></a>å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰</h2><p>å­˜æ¡£ï¼Œè¿”å›ä¸Šä¸€æ­¥ï¼Œæ•°æ®åº“äº‹åŠ¡ç®¡ç†</p>
<p>å¤‡å¿˜å½•æ¨¡å¼ä½¿ç”¨ä¸‰ä¸ªç±» Mementoã€Originator å’Œ CareTakerã€‚Memento åŒ…å«äº†è¦è¢«æ¢å¤çš„å¯¹è±¡çš„çŠ¶æ€ã€‚Originator åˆ›å»ºå¹¶åœ¨ Memento å¯¹è±¡ä¸­å­˜å‚¨çŠ¶æ€ã€‚Caretaker å¯¹è±¡è´Ÿè´£ä» Memento ä¸­æ¢å¤å¯¹è±¡çš„çŠ¶æ€ã€‚</p>
<p>MementoPatternDemoï¼Œæˆ‘ä»¬çš„æ¼”ç¤ºç±»ä½¿ç”¨ CareTaker å’Œ Originator å¯¹è±¡æ¥æ˜¾ç¤ºå¯¹è±¡çš„çŠ¶æ€æ¢å¤ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/memento_pattern_uml_diagram.jpg" alt="Memento"></p>
<p>è¿™ä¸ªä¸œè¥¿ æ„Ÿè§‰æ²¡æœ‰ä»€ä¹ˆçœŸå®å®è·µç»éªŒ</p>
<p>ä»¥å‰åšè¿‡ä¸€ä¸ªå¾ˆç®€å•ç‰ˆæœ¬ç®¡ç†ï¼Œç”¨çš„æ˜¯äºŒè¿›åˆ¶å¤‡ä»½å’Œæ¢å¤</p>
<p>ä¹Ÿåšè¿‡åŸºäºæ•°æ®åº“çš„å¤‡ä»½å’Œæ¢å¤,ä½†å®é™…è¿˜æ˜¯é çš„æ•°æ®åº“</p>
<p>æ‰€ä»¥åœ¨å®è·µä¸­ å¦‚æœå¯¹äºä¸€ä¸ª å¤§çš„å†…å®¹ï¼Œæ„Ÿè§‰ç›´æ¥å¤‡ä»½æ•´ä½“ æ¶ˆè€—æ˜¯å·¨å¤§çš„ã€‚çœ‹vimçš„undo treeæˆ–è€… gitçš„ç‰ˆæœ¬ç®¡ç†ï¼Œè¿™äº›å·¥ç¨‹å®è·µè¿‡çš„ä¸œè¥¿ï¼Œéƒ½æ˜¯äº¤äº’å¼ä½†éƒ½æ˜¯è®°å½•çš„å·®å¼‚</p>
<p>é‚£ä¹ˆé—®é¢˜åˆæ˜¯ï¼Œå¦‚ä½•è®°å½•å·®å¼‚ï¼Œå¦‚æœä¸€ä¸ªç³»ç»Ÿçš„æ“ä½œæ˜¯å…·æœ‰è¿å¸¦æ“ä½œçš„ï¼Œé‚£ä¹ˆæ‰€æœ‰è¿å¸¦å½±å“éƒ½åº”è¯¥è¢«è®°å½•ï¼Œè€Œåœ¨æ¢å¤æ—¶ä¸åº”è¯¥è§¦å‘ä»»ä½•è¿å¸¦ååº”ï¼Œä»è€Œè®¾è®¡ä¸Š æ„Ÿè§‰å°±è¿™é‡Œæ‰€ä¸¾çš„ä¾‹å­è¿œè¿œä¸å¤Ÿ</p>
<h2 id="è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver-Patternï¼‰"><a href="#è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver-Patternï¼‰" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰"></a>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰</h2><p>å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/observer_pattern_uml_diagram.jpg" alt="Observer"></p>
<p>ä¸€ä¸ªæ˜¯ vueçš„ watchä»¥åŠcomputedè®¾è®¡</p>
<p>å¦ä¸€ä¸ªæ˜¯RxJSé‡Œçš„ Observerableçš„è®¾è®¡</p>
<p>è¿™ç§æè¿°å¼çš„è¡¨è¿°æ³•ç›´æ¥ä»£ç é˜…è¯»ä½“éªŒæ˜¯ä¼šæ¯”å‘½ä»¤å¼çš„å¥½ä¸€äº›</p>
<p>æ¯”å¦‚ æŒ–æ˜Vueçš„å£°æ˜å¼çš„äº¤äº’èƒ½åŠ› <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av37345007?from=search&amp;seid=18134472664073504003">https://www.bilibili.com/video/av37345007?from=search&amp;seid=18134472664073504003</a></p>
<h2 id="çŠ¶æ€æ¨¡å¼ï¼ˆState-Patternï¼‰"><a href="#çŠ¶æ€æ¨¡å¼ï¼ˆState-Patternï¼‰" class="headerlink" title="çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰"></a>çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰</h2><p>å†…éƒ¨æœ‰çŠ¶æ€ï¼Œä¸åŒçš„çŠ¶æ€ä¸‹ ä¸åŒçš„æ–¹æ³•æœ‰ä¸åŒçš„è¡Œä¸º</p>
<p>ä½¿ç”¨åœºæ™¯ï¼š 1ã€è¡Œä¸ºéšçŠ¶æ€æ”¹å˜è€Œæ”¹å˜çš„åœºæ™¯ã€‚ 2ã€æ¡ä»¶ã€åˆ†æ”¯è¯­å¥çš„ä»£æ›¿è€…ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/state_pattern_uml_diagram.png" alt="State Pattern"></p>
<p>å¯¹äºif æ¯”è¾ƒå¤šä¸”å¤æ‚çš„æ—¶å€™ä¼šè€ƒè™‘</p>
<p>ç„¶åä½œä¸ºç®€å•çš„ç»ƒä¹ æœ‰ å¾ˆå¤šç®—æ³•ä¸Šçš„ï¼Œæ¯”å¦‚ACè‡ªåŠ¨æœºç­‰ç­‰</p>
<h2 id="ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull-Object-Patternï¼‰"><a href="#ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull-Object-Patternï¼‰" class="headerlink" title="ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull Object Patternï¼‰"></a>ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull Object Patternï¼‰</h2><p>ä¸€ä¸ªç©ºå¯¹è±¡å–ä»£ NULL å¯¹è±¡å®ä¾‹çš„æ£€æŸ¥ã€‚Null å¯¹è±¡ä¸æ˜¯æ£€æŸ¥ç©ºå€¼ï¼Œè€Œæ˜¯ååº”ä¸€ä¸ªä¸åšä»»ä½•åŠ¨ä½œçš„å…³ç³»ã€‚è¿™æ ·çš„ Null å¯¹è±¡ä¹Ÿå¯ä»¥åœ¨æ•°æ®ä¸å¯ç”¨çš„æ—¶å€™æä¾›é»˜è®¤çš„è¡Œä¸ºã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/null_pattern_uml_diagram.jpg" alt="Null object"></p>
<p>ä¸ªäººæ„Ÿè§‰å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§ æ•°æ®çš„å…œåº•è¡Œä¸º,è¿™ä¸ªæ„Ÿè§‰è¦çœ‹å…·ä½“æ˜¯å¸Œæœ› æŠ›é”™å‡ºå»è¿˜æ˜¯è¯´ç”¨å…œåº•è¡Œä¸ºä¿æŠ¤ï¼Œçœ‹å…·ä½“ä¸šåŠ¡å¸Œæœ›</p>
<h2 id="ç­–ç•¥æ¨¡å¼ï¼ˆStrategy-Patternï¼‰"><a href="#ç­–ç•¥æ¨¡å¼ï¼ˆStrategy-Patternï¼‰" class="headerlink" title="ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰"></a>ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰</h2><p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/strategy_pattern_uml_diagram.jpg" alt="Strategy"></p>
<p>å¤šä¸ªå°è£…èµ·æ¥å¯ä»¥â€œæ›¿æ¢â€çš„ç­–ç•¥ç±»</p>
<p>æ¯”å¦‚å¤æ‚çš„å†³ç­–åŠŸèƒ½è€Œä¸æ˜¯ç®€å•çš„state</p>
<h2 id="æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate-Patternï¼‰"><a href="#æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate-Patternï¼‰" class="headerlink" title="æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰"></a>æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰</h2><p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/template_pattern_uml_diagram.jpg" alt="template"></p>
<p>è¿™æ ·çœ‹ ä¹‹å‰çš„ åŸºç±»æ¨¡å¼å†™çš„oiTerminal åº”è¯¥æ˜¯å±äºæ¨¡æ¿æ¨¡å¼çš„</p>
<h2 id="è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor-Patternï¼‰"><a href="#è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor-Patternï¼‰" class="headerlink" title="è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰"></a>è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰</h2><p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/visitor_pattern_uml_diagram.jpg" alt="visitor"></p>
<p>éœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡ç»“æ„ä¸­çš„å¯¹è±¡è¿›è¡Œå¾ˆå¤šä¸åŒçš„å¹¶ä¸”ä¸ç›¸å…³çš„æ“ä½œï¼Œè€Œéœ€è¦é¿å…è®©è¿™äº›æ“ä½œâ€æ±¡æŸ“â€è¿™äº›å¯¹è±¡çš„ç±»ï¼Œä½¿ç”¨è®¿é—®è€…æ¨¡å¼å°†è¿™äº›å°è£…åˆ°ç±»ä¸­ã€‚</p>
<p>ä¹Ÿå°±æ˜¯ã€€æŸä¸€äº›æ–¹æ³•ã€€ä¸åº”è¯¥ç›´æ¥æ”¾åœ¨ã€€ç±»å’Œå­ç±»ä¸­æ—¶</p>
<p>ä¼˜ç‚¹ï¼š 1ã€ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚ 2ã€ä¼˜ç§€çš„æ‰©å±•æ€§ã€‚ 3ã€çµæ´»æ€§ã€‚</p>
<p>ç¼ºç‚¹ï¼š 1ã€å…·ä½“å…ƒç´ å¯¹è®¿é—®è€…å…¬å¸ƒç»†èŠ‚ï¼Œè¿åäº†è¿ªç±³ç‰¹åŸåˆ™ã€‚ 2ã€å…·ä½“å…ƒç´ å˜æ›´æ¯”è¾ƒå›°éš¾ã€‚ 3ã€è¿åäº†ä¾èµ–å€’ç½®åŸåˆ™ï¼Œä¾èµ–äº†å…·ä½“ç±»ï¼Œæ²¡æœ‰ä¾èµ–æŠ½è±¡ã€‚</p>
<p>ç»“æ„å†…å¾ˆå°‘æ”¹å˜ã€€ä½†éœ€è¦åœ¨å¯¹è±¡ç»“æ„ä¸Šå®šä¹‰æ–°çš„æ“ä½œ</p>
<h1 id="J2EE-æ¨¡å¼"><a href="#J2EE-æ¨¡å¼" class="headerlink" title="J2EE æ¨¡å¼"></a>J2EE æ¨¡å¼</h1><p>è¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨è¡¨ç¤ºå±‚ã€‚è¿™äº›æ¨¡å¼æ˜¯ç”± Sun Java Center é‰´å®šçš„ã€‚</p>
<h2 id="MVC-æ¨¡å¼ï¼ˆMVC-Patternï¼‰"><a href="#MVC-æ¨¡å¼ï¼ˆMVC-Patternï¼‰" class="headerlink" title="MVC æ¨¡å¼ï¼ˆMVC Patternï¼‰"></a>MVC æ¨¡å¼ï¼ˆMVC Patternï¼‰</h2><p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/1200px-ModelViewControllerDiagram2.svg_.png" alt="mvc"></p>
<p>Modelï¼ˆæ¨¡å‹ï¼‰ - æ¨¡å‹ä»£è¡¨ä¸€ä¸ªå­˜å–æ•°æ®çš„å¯¹è±¡æˆ– JAVA POJOã€‚å®ƒä¹Ÿå¯ä»¥å¸¦æœ‰é€»è¾‘ï¼Œåœ¨æ•°æ®å˜åŒ–æ—¶æ›´æ–°æ§åˆ¶å™¨ã€‚</p>
<p>Viewï¼ˆè§†å›¾ï¼‰ - è§†å›¾ä»£è¡¨æ¨¡å‹åŒ…å«çš„æ•°æ®çš„å¯è§†åŒ–ã€‚</p>
<p>Controllerï¼ˆæ§åˆ¶å™¨ï¼‰ - æ§åˆ¶å™¨ä½œç”¨äºæ¨¡å‹å’Œè§†å›¾ä¸Šã€‚å®ƒæ§åˆ¶æ•°æ®æµå‘æ¨¡å‹å¯¹è±¡ï¼Œå¹¶åœ¨æ•°æ®å˜åŒ–æ—¶æ›´æ–°è§†å›¾ã€‚å®ƒä½¿è§†å›¾ä¸æ¨¡å‹åˆ†ç¦»å¼€ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/mvc_pattern_uml_diagram.jpg" alt="mvc pattern"></p>
<h2 id="ä¸šåŠ¡ä»£è¡¨æ¨¡å¼ï¼ˆBusiness-Delegate-Patternï¼‰"><a href="#ä¸šåŠ¡ä»£è¡¨æ¨¡å¼ï¼ˆBusiness-Delegate-Patternï¼‰" class="headerlink" title="ä¸šåŠ¡ä»£è¡¨æ¨¡å¼ï¼ˆBusiness Delegate Patternï¼‰"></a>ä¸šåŠ¡ä»£è¡¨æ¨¡å¼ï¼ˆBusiness Delegate Patternï¼‰</h2><p>å®¢æˆ·ç«¯ï¼ˆClientï¼‰ - è¡¨ç¤ºå±‚ä»£ç å¯ä»¥æ˜¯ JSPã€servlet æˆ– UI java ä»£ç ã€‚</p>
<p>ä¸šåŠ¡ä»£è¡¨ï¼ˆBusiness Delegateï¼‰ - ä¸€ä¸ªä¸ºå®¢æˆ·ç«¯å®ä½“æä¾›çš„å…¥å£ç±»ï¼Œå®ƒæä¾›äº†å¯¹ä¸šåŠ¡æœåŠ¡æ–¹æ³•çš„è®¿é—®ã€‚</p>
<p>æŸ¥è¯¢æœåŠ¡ï¼ˆLookUp Serviceï¼‰ - æŸ¥æ‰¾æœåŠ¡å¯¹è±¡è´Ÿè´£è·å–ç›¸å…³çš„ä¸šåŠ¡å®ç°ï¼Œå¹¶æä¾›ä¸šåŠ¡å¯¹è±¡å¯¹ä¸šåŠ¡ä»£è¡¨å¯¹è±¡çš„è®¿é—®ã€‚</p>
<p>ä¸šåŠ¡æœåŠ¡ï¼ˆBusiness Serviceï¼‰ - ä¸šåŠ¡æœåŠ¡æ¥å£ã€‚å®ç°äº†è¯¥ä¸šåŠ¡æœåŠ¡çš„å®ä½“ç±»ï¼Œæä¾›äº†å®é™…çš„ä¸šåŠ¡å®ç°é€»è¾‘ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/business_delegate_pattern_uml_diagram2.png" alt="Business delegate"></p>
<p>æˆ‘ä¸ªäººé‡Œçš„ç†è§£æ˜¯ã€€æ¯”å¦‚ã€€æœ‰å‰ç«¯å’ŒæœåŠ¡ç«¯çš„äº¤äº’ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯ä¼šå¼€å‘ä¸€å±‚æ‰å¹³çš„ã€€æ¥å£ç»™å‰ç«¯ä½¿ç”¨ï¼Œå‰ç«¯ç›´æ¥è°ƒç”¨çš„è¿™ä¸€å±‚å°±æ˜¯</p>
<p>éšè—äº†å†…éƒ¨å®ç°</p>
<h2 id="ç»„åˆå®ä½“æ¨¡å¼ï¼ˆComposite-Entity-Patternï¼‰"><a href="#ç»„åˆå®ä½“æ¨¡å¼ï¼ˆComposite-Entity-Patternï¼‰" class="headerlink" title="ç»„åˆå®ä½“æ¨¡å¼ï¼ˆComposite Entity Patternï¼‰"></a>ç»„åˆå®ä½“æ¨¡å¼ï¼ˆComposite Entity Patternï¼‰</h2><p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/compositeentity_pattern_uml_diagram.jpg" alt="Composite"></p>
<p>ç»„åˆå®ä½“æ¨¡å¼ï¼ˆComposite Entity Patternï¼‰ç”¨åœ¨ EJB æŒä¹…åŒ–æœºåˆ¶ä¸­ã€‚ä¸€ä¸ªç»„åˆå®ä½“æ˜¯ä¸€ä¸ª EJB å®ä½“ beanï¼Œä»£è¡¨äº†å¯¹è±¡çš„å›¾è§£ã€‚å½“æ›´æ–°ä¸€ä¸ªç»„åˆå®ä½“æ—¶ï¼Œå†…éƒ¨ä¾èµ–å¯¹è±¡ beans ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç”± EJB å®ä½“ bean ç®¡ç†çš„ã€‚ä»¥ä¸‹æ˜¯ç»„åˆå®ä½“ bean çš„å‚ä¸è€…ã€‚</p>
<ul>
<li><p>ç»„åˆå®ä½“ï¼ˆComposite Entityï¼‰ - å®ƒæ˜¯ä¸»è¦çš„å®ä½“ beanã€‚å®ƒå¯ä»¥æ˜¯ç²—ç²’çš„ï¼Œæˆ–è€…å¯ä»¥åŒ…å«ä¸€ä¸ªç²—ç²’åº¦å¯¹è±¡ï¼Œç”¨äºæŒç»­ç”Ÿå‘½å‘¨æœŸã€‚</p>
</li>
<li><p>ç²—ç²’åº¦å¯¹è±¡ï¼ˆCoarse-Grained Objectï¼‰ - è¯¥å¯¹è±¡åŒ…å«ä¾èµ–å¯¹è±¡ã€‚å®ƒæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿèƒ½ç®¡ç†ä¾èµ–å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
</li>
<li><p>ä¾èµ–å¯¹è±¡ï¼ˆDependent Objectï¼‰ - ä¾èµ–å¯¹è±¡æ˜¯ä¸€ä¸ªæŒç»­ç”Ÿå‘½å‘¨æœŸä¾èµ–äºç²—ç²’åº¦å¯¹è±¡çš„å¯¹è±¡ã€‚</p>
</li>
<li><p>ç­–ç•¥ï¼ˆStrategiesï¼‰ - ç­–ç•¥è¡¨ç¤ºå¦‚ä½•å®ç°ç»„åˆå®ä½“ã€‚</p>
</li>
</ul>
<p>æ²¡æœ‰ç†è§£åˆ°ã€€å…·ä½“çš„ç›®çš„å’Œè§£å†³çš„é—®é¢˜ï¼ŒæŸ¥wikipediaæœ‰è¯´ï¼Œã€€æ¶ˆé™¤å®ä½“ä¹‹é—´å…³ç³» å‡å°‘å®ä½“beanæé«˜å¯ç®¡ç†æ€§ã€‚</p>
<h2 id="æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼ï¼ˆData-Access-Object-Patternï¼‰"><a href="#æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼ï¼ˆData-Access-Object-Patternï¼‰" class="headerlink" title="æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼ï¼ˆData Access Object Patternï¼‰"></a>æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼ï¼ˆData Access Object Patternï¼‰</h2><p>æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼ï¼ˆData Access Object Patternï¼‰æˆ– DAO æ¨¡å¼ç”¨äºæŠŠä½çº§çš„æ•°æ®è®¿é—® API æˆ–æ“ä½œä»é«˜çº§çš„ä¸šåŠ¡æœåŠ¡ä¸­åˆ†ç¦»å‡ºæ¥ã€‚ä»¥ä¸‹æ˜¯æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼çš„å‚ä¸è€…ã€‚</p>
<p>æ•°æ®è®¿é—®å¯¹è±¡æ¥å£ï¼ˆData Access Object Interfaceï¼‰ - è¯¥æ¥å£å®šä¹‰äº†åœ¨ä¸€ä¸ªæ¨¡å‹å¯¹è±¡ä¸Šè¦æ‰§è¡Œçš„æ ‡å‡†æ“ä½œã€‚</p>
<p>æ•°æ®è®¿é—®å¯¹è±¡å®ä½“ç±»ï¼ˆData Access Object concrete classï¼‰ - è¯¥ç±»å®ç°äº†ä¸Šè¿°çš„æ¥å£ã€‚è¯¥ç±»è´Ÿè´£ä»æ•°æ®æºè·å–æ•°æ®ï¼Œæ•°æ®æºå¯ä»¥æ˜¯æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥æ˜¯ xmlï¼Œæˆ–è€…æ˜¯å…¶ä»–çš„å­˜å‚¨æœºåˆ¶ã€‚</p>
<p>æ¨¡å‹å¯¹è±¡&#x2F;æ•°å€¼å¯¹è±¡ï¼ˆModel Object&#x2F;Value Objectï¼‰ - è¯¥å¯¹è±¡æ˜¯ç®€å•çš„ POJOï¼ŒåŒ…å«äº† get&#x2F;set æ–¹æ³•æ¥å­˜å‚¨é€šè¿‡ä½¿ç”¨ DAO ç±»æ£€ç´¢åˆ°çš„æ•°æ®ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/dao_pattern_uml_diagram.jpg" alt="Data Access Object"></p>
<p>åŸæ¥DAOçš„ä¸­æ–‡å…¨ç§°æ˜¯è¿™ä¸ª</p>
<p>DAOåœ¨æˆ‘çš„å°è±¡çš„javaä¸­æ˜¯è¿æ¥ æ•°æ®åº“ å’Œ javaä»£ç çš„</p>
<h2 id="å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ï¼ˆFront-Controller-Patternï¼‰"><a href="#å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ï¼ˆFront-Controller-Patternï¼‰" class="headerlink" title="å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ï¼ˆFront Controller Patternï¼‰"></a>å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ï¼ˆFront Controller Patternï¼‰</h2><p>å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ï¼ˆFront Controller Patternï¼‰æ˜¯ç”¨æ¥æä¾›ä¸€ä¸ªé›†ä¸­çš„è¯·æ±‚å¤„ç†æœºåˆ¶ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½å°†ç”±ä¸€ä¸ªå•ä¸€çš„å¤„ç†ç¨‹åºå¤„ç†ã€‚è¯¥å¤„ç†ç¨‹åºå¯ä»¥åšè®¤è¯&#x2F;æˆæƒ&#x2F;è®°å½•æ—¥å¿—ï¼Œæˆ–è€…è·Ÿè¸ªè¯·æ±‚ï¼Œç„¶åæŠŠè¯·æ±‚ä¼ ç»™ç›¸åº”çš„å¤„ç†ç¨‹åºã€‚ä»¥ä¸‹æ˜¯è¿™ç§è®¾è®¡æ¨¡å¼çš„å®ä½“ã€‚</p>
<p>å‰ç«¯æ§åˆ¶å™¨ï¼ˆFront Controllerï¼‰ - å¤„ç†åº”ç”¨ç¨‹åºæ‰€æœ‰ç±»å‹è¯·æ±‚çš„å•ä¸ªå¤„ç†ç¨‹åºï¼Œåº”ç”¨ç¨‹åºå¯ä»¥æ˜¯åŸºäº web çš„åº”ç”¨ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºäºæ¡Œé¢çš„åº”ç”¨ç¨‹åºã€‚</p>
<p>è°ƒåº¦å™¨ï¼ˆDispatcherï¼‰ - å‰ç«¯æ§åˆ¶å™¨å¯èƒ½ä½¿ç”¨ä¸€ä¸ªè°ƒåº¦å™¨å¯¹è±¡æ¥è°ƒåº¦è¯·æ±‚åˆ°ç›¸åº”çš„å…·ä½“å¤„ç†ç¨‹åºã€‚</p>
<p>è§†å›¾ï¼ˆViewï¼‰ - è§†å›¾æ˜¯ä¸ºè¯·æ±‚è€Œåˆ›å»ºçš„å¯¹è±¡ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/frontcontroller_pattern_uml_diagram.jpg" alt="Front Controller"></p>
<p>è¿™ä¸ªä¸æ˜¯å¾ˆç†è§£ è¿™æ ·åˆ’åˆ†å‡ºçš„æ¨¡å¼</p>
<p>æˆ‘æ„Ÿè§‰ä¸Šé¢æ²¡æœ‰è®²åˆ°å•ç‹¬çš„dispatcheræ¨¡å¼ ï¼Œä½†æ˜¯æœ‰æåˆ° ä¸šåŠ¡ä»£è¡¨æ¨¡å¼</p>
<p>ç„¶åå°±è¿™ä¸ªå›¾ä¸Šçœ‹ï¼Œæˆ‘æ„Ÿè§‰ åƒæ˜¯ ä¸šåŠ¡ä»£è¡¨æ¨¡å¼å’Œdispatcheræ¨¡å¼çš„èåˆ</p>
<h2 id="æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ï¼ˆIntercepting-Filter-Patternï¼‰"><a href="#æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ï¼ˆIntercepting-Filter-Patternï¼‰" class="headerlink" title="æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ï¼ˆIntercepting Filter Patternï¼‰"></a>æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ï¼ˆIntercepting Filter Patternï¼‰</h2><p>æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ï¼ˆIntercepting Filter Patternï¼‰ç”¨äºå¯¹åº”ç”¨ç¨‹åºçš„è¯·æ±‚æˆ–å“åº”åšä¸€äº›é¢„å¤„ç†&#x2F;åå¤„ç†ã€‚å®šä¹‰è¿‡æ»¤å™¨ï¼Œå¹¶åœ¨æŠŠè¯·æ±‚ä¼ ç»™å®é™…ç›®æ ‡åº”ç”¨ç¨‹åºä¹‹å‰åº”ç”¨åœ¨è¯·æ±‚ä¸Šã€‚è¿‡æ»¤å™¨å¯ä»¥åšè®¤è¯&#x2F;æˆæƒ&#x2F;è®°å½•æ—¥å¿—ï¼Œæˆ–è€…è·Ÿè¸ªè¯·æ±‚ï¼Œç„¶åæŠŠè¯·æ±‚ä¼ ç»™ç›¸åº”çš„å¤„ç†ç¨‹åºã€‚ä»¥ä¸‹æ˜¯è¿™ç§è®¾è®¡æ¨¡å¼çš„å®ä½“ã€‚</p>
<p>è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ - è¿‡æ»¤å™¨åœ¨è¯·æ±‚å¤„ç†ç¨‹åºæ‰§è¡Œè¯·æ±‚ä¹‹å‰æˆ–ä¹‹åï¼Œæ‰§è¡ŒæŸäº›ä»»åŠ¡ã€‚</p>
<p>è¿‡æ»¤å™¨é“¾ï¼ˆFilter Chainï¼‰ - è¿‡æ»¤å™¨é“¾å¸¦æœ‰å¤šä¸ªè¿‡æ»¤å™¨ï¼Œå¹¶åœ¨ Target ä¸ŠæŒ‰ç…§å®šä¹‰çš„é¡ºåºæ‰§è¡Œè¿™äº›è¿‡æ»¤å™¨ã€‚</p>
<p>Target - Target å¯¹è±¡æ˜¯è¯·æ±‚å¤„ç†ç¨‹åºã€‚</p>
<p>è¿‡æ»¤ç®¡ç†å™¨ï¼ˆFilter Managerï¼‰ - è¿‡æ»¤ç®¡ç†å™¨ç®¡ç†è¿‡æ»¤å™¨å’Œè¿‡æ»¤å™¨é“¾ã€‚</p>
<p>å®¢æˆ·ç«¯ï¼ˆClientï¼‰ - Client æ˜¯å‘ Target å¯¹è±¡å‘é€è¯·æ±‚çš„å¯¹è±¡ã€‚</p>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/interceptingfilter_pattern_uml_diagram.jpg" alt="intercepting filter"></p>
<p>ä¸ºä»€ä¹ˆçœ‹ä¸‹é¢çš„å®ç°ä»£ç  æ„Ÿè§‰æ˜¯è®©æ¯ä¸€ä¸ªè¿‡æ»¤ç®¡ç†å™¨ éƒ½æ‰§è¡Œä¸€è¾¹æ“ä½œ</p>
<p>è€Œ è¿‡æ»¤å™¨é“¾æ›´åƒæ˜¯ä¸€ç³»åˆ—æ“ä½œå‡½æ•°çš„æ•°ç»„ã€‚</p>
<p>æ‰§è¡Œè¿‡ç¨‹æ˜¯è®©æ•°ç»„ä¸­çš„ä¸€ç³»åˆ—æ“ä½œéƒ½ å¯¹è¾“å…¥æ•°æ®æ‰§è¡Œä¸€é</p>
<h2 id="æœåŠ¡å®šä½å™¨æ¨¡å¼ï¼ˆService-Locator-Patternï¼‰"><a href="#æœåŠ¡å®šä½å™¨æ¨¡å¼ï¼ˆService-Locator-Patternï¼‰" class="headerlink" title="æœåŠ¡å®šä½å™¨æ¨¡å¼ï¼ˆService Locator Patternï¼‰"></a>æœåŠ¡å®šä½å™¨æ¨¡å¼ï¼ˆService Locator Patternï¼‰</h2><p>æœåŠ¡å®šä½å™¨æ¨¡å¼ï¼ˆService Locator Patternï¼‰ç”¨åœ¨æˆ‘ä»¬æƒ³ä½¿ç”¨ JNDI æŸ¥è¯¢å®šä½å„ç§æœåŠ¡çš„æ—¶å€™ã€‚è€ƒè™‘åˆ°ä¸ºæŸä¸ªæœåŠ¡æŸ¥æ‰¾ JNDI çš„ä»£ä»·å¾ˆé«˜ï¼ŒæœåŠ¡å®šä½å™¨æ¨¡å¼å……åˆ†åˆ©ç”¨äº†ç¼“å­˜æŠ€æœ¯ã€‚åœ¨é¦–æ¬¡è¯·æ±‚æŸä¸ªæœåŠ¡æ—¶ï¼ŒæœåŠ¡å®šä½å™¨åœ¨ JNDI ä¸­æŸ¥æ‰¾æœåŠ¡ï¼Œå¹¶ç¼“å­˜è¯¥æœåŠ¡å¯¹è±¡ã€‚å½“å†æ¬¡è¯·æ±‚ç›¸åŒçš„æœåŠ¡æ—¶ï¼ŒæœåŠ¡å®šä½å™¨ä¼šåœ¨å®ƒçš„ç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Œè¿™æ ·å¯ä»¥åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯è¿™ç§è®¾è®¡æ¨¡å¼çš„å®ä½“ã€‚</p>
<ul>
<li><p>æœåŠ¡ï¼ˆServiceï¼‰ - å®é™…å¤„ç†è¯·æ±‚çš„æœåŠ¡ã€‚å¯¹è¿™ç§æœåŠ¡çš„å¼•ç”¨å¯ä»¥åœ¨ JNDI æœåŠ¡å™¨ä¸­æŸ¥æ‰¾åˆ°ã€‚</p>
</li>
<li><p>Context &#x2F; åˆå§‹çš„ Context - JNDI Context å¸¦æœ‰å¯¹è¦æŸ¥æ‰¾çš„æœåŠ¡çš„å¼•ç”¨ã€‚</p>
</li>
<li><p>æœåŠ¡å®šä½å™¨ï¼ˆService Locatorï¼‰ - æœåŠ¡å®šä½å™¨æ˜¯é€šè¿‡ JNDI æŸ¥æ‰¾å’Œç¼“å­˜æœåŠ¡æ¥è·å–æœåŠ¡çš„å•ç‚¹æ¥è§¦ã€‚</p>
</li>
<li><p>ç¼“å­˜ï¼ˆCacheï¼‰ - ç¼“å­˜å­˜å‚¨æœåŠ¡çš„å¼•ç”¨ï¼Œä»¥ä¾¿å¤ç”¨å®ƒä»¬ã€‚</p>
</li>
<li><p>å®¢æˆ·ç«¯ï¼ˆClientï¼‰ - Client æ˜¯é€šè¿‡ ServiceLocator è°ƒç”¨æœåŠ¡çš„å¯¹è±¡</p>
</li>
</ul>
<p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/servicelocator_pattern_uml_diagram.jpg" alt="Service Locator"></p>
<p>æ„Ÿè§‰ç®—æ˜¯ä¸Šé¢ æ¨¡å¼çš„åˆä½“äº†</p>
<h2 id="ä¼ è¾“å¯¹è±¡æ¨¡å¼ï¼ˆTransfer-Object-Patternï¼‰"><a href="#ä¼ è¾“å¯¹è±¡æ¨¡å¼ï¼ˆTransfer-Object-Patternï¼‰" class="headerlink" title="ä¼ è¾“å¯¹è±¡æ¨¡å¼ï¼ˆTransfer Object Patternï¼‰"></a>ä¼ è¾“å¯¹è±¡æ¨¡å¼ï¼ˆTransfer Object Patternï¼‰</h2><p><img data-src="https://www.runoob.com/wp-content/uploads/2014/08/transferobject_pattern_uml_diagram.jpg" alt="Transfer Object"></p>
<p>ä¼ è¾“å¯¹è±¡æ¨¡å¼ï¼ˆTransfer Object Patternï¼‰ç”¨äºä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¸€æ¬¡æ€§ä¼ é€’å¸¦æœ‰å¤šä¸ªå±æ€§çš„æ•°æ®ã€‚ä¼ è¾“å¯¹è±¡ä¹Ÿè¢«ç§°ä¸ºæ•°å€¼å¯¹è±¡ã€‚ä¼ è¾“å¯¹è±¡æ˜¯ä¸€ä¸ªå…·æœ‰ getter&#x2F;setter æ–¹æ³•çš„ç®€å•çš„ POJO ç±»ï¼Œå®ƒæ˜¯å¯åºåˆ—åŒ–çš„ï¼Œæ‰€ä»¥å®ƒå¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“ã€‚å®ƒæ²¡æœ‰ä»»ä½•çš„è¡Œä¸ºã€‚æœåŠ¡å™¨ç«¯çš„ä¸šåŠ¡ç±»é€šå¸¸ä»æ•°æ®åº“è¯»å–æ•°æ®ï¼Œç„¶åå¡«å…… POJOï¼Œå¹¶æŠŠå®ƒå‘é€åˆ°å®¢æˆ·ç«¯æˆ–æŒ‰å€¼ä¼ é€’å®ƒã€‚å¯¹äºå®¢æˆ·ç«¯ï¼Œä¼ è¾“å¯¹è±¡æ˜¯åªè¯»çš„ã€‚å®¢æˆ·ç«¯å¯ä»¥åˆ›å»ºè‡ªå·±çš„ä¼ è¾“å¯¹è±¡ï¼Œå¹¶æŠŠå®ƒä¼ é€’ç»™æœåŠ¡å™¨ï¼Œä»¥ä¾¿ä¸€æ¬¡æ€§æ›´æ–°æ•°æ®åº“ä¸­çš„æ•°å€¼ã€‚ä»¥ä¸‹æ˜¯è¿™ç§è®¾è®¡æ¨¡å¼çš„å®ä½“ã€‚</p>
<ul>
<li>ä¸šåŠ¡å¯¹è±¡ï¼ˆBusiness Objectï¼‰ - ä¸ºä¼ è¾“å¯¹è±¡å¡«å……æ•°æ®çš„ä¸šåŠ¡æœåŠ¡ã€‚</li>
<li>ä¼ è¾“å¯¹è±¡ï¼ˆTransfer Objectï¼‰ - ç®€å•çš„ POJOï¼Œåªæœ‰è®¾ç½®&#x2F;è·å–å±æ€§çš„æ–¹æ³•ã€‚</li>
<li>å®¢æˆ·ç«¯ï¼ˆClientï¼‰ - å®¢æˆ·ç«¯å¯ä»¥å‘é€è¯·æ±‚æˆ–è€…å‘é€ä¼ è¾“å¯¹è±¡åˆ°ä¸šåŠ¡å¯¹è±¡ã€‚</li>
</ul>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªä½œä¸ºä¸šåŠ¡å¯¹è±¡çš„ StudentBO å’Œä½œä¸ºä¼ è¾“å¯¹è±¡çš„ StudentVOï¼Œå®ƒä»¬éƒ½ä»£è¡¨äº†æˆ‘ä»¬çš„å®ä½“ã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/Blog/page/6/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é "></i></a><a class="page-number" href="/Blog/">1</a><a class="page-number" href="/Blog/page/4/">4</a><a class="page-number" href="/Blog/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/Blog/page/8/">8</a><a class="page-number" href="/Blog/page/10/">10</a><a class="page-number" href="/Blog/page/13/">13</a><a class="extend next" rel="next" href="/Blog/page/8/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é "></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cro-Marmot</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="ç¸½å­—æ•¸">683k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="æ‰€éœ€ç¸½é–±è®€æ™‚é–“">10:21</span>
  </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> å¼·åŠ›é©…å‹•
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/Blog/js/comments.js"></script><script src="/Blog/js/utils.js"></script><script src="/Blog/js/schemes/muse.js"></script><script src="/Blog/js/next-boot.js"></script><script src="/Blog/js/bookmark.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/Blog/js/third-party/search/local-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/Blog/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.2.0/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":false,"home":false,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://cromarmot.github.io/Blog/page/7/"}</script>
  <script src="/Blog/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"cromarmot","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/Blog/js/third-party/comments/disqus.js"></script>

</body>
</html>
