<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/Blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/Blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/Blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/Blog/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="googlea0cb77247135ae4c.html">

<link rel="stylesheet" href="/Blog/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha256-xejo6yLi6vGtAjcMIsY8BHdKsLg7QynVlFMzdQgUuy8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cromarmot.github.io","root":"/Blog/","images":"/Blog/images","scheme":"Muse","darkmode":false,"version":"8.12.3","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"},"path":"/Blog/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/Blog/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Cro-Marmot&#39;s Blog">
<meta property="og:url" content="https://cromarmot.github.io/Blog/page/11/index.html">
<meta property="og:site_name" content="Cro-Marmot&#39;s Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Cro-Marmot">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://cromarmot.github.io/Blog/page/11/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-TW","comments":"","permalink":"","path":"page/11/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Cro-Marmot's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/Blog/css/noscript.css">
  </noscript>
<link rel="alternate" href="/Blog/atom.xml" title="Cro-Marmot's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/Blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Cro-Marmot's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/Blog/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a></li><li class="menu-item menu-item-archives"><a href="/Blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔<span class="badge">118</span></a></li><li class="menu-item menu-item-rss"><a href="/Blog/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>rss</a></li><li class="menu-item menu-item-categories"><a href="/Blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類<span class="badge">39</span></a></li><li class="menu-item menu-item-tags"><a href="/Blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤<span class="badge">129</span></a></li><li class="menu-item menu-item-about"><a href="/Blog/20-07-13-rsa/#contact" rel="section"><i class="fa fa-user fa-fw"></i>關於</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Cro-Marmot"
      src="https://avatars.githubusercontent.com/u/24691835?v=4">
  <p class="site-author-name" itemprop="name">Cro-Marmot</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/Blog/archives/">
          <span class="site-state-item-count">118</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/Blog/categories/">
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/Blog/tags/">
        <span class="site-state-item-count">129</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/cromarmot" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;cromarmot" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yexiaorain@gmail.com" title="E-Mail → mailto:yexiaorain@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://atcoder.jp/users/cromarmot" title="https:&#x2F;&#x2F;atcoder.jp&#x2F;users&#x2F;cromarmot" rel="noopener" target="_blank">AtCoder</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://codeforces.com/profile/Cro-Marmot" title="https:&#x2F;&#x2F;codeforces.com&#x2F;profile&#x2F;Cro-Marmot" rel="noopener" target="_blank">Codeforces</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="回到頂端">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-04-22-Java%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%AE%9E%E5%BD%952008%E7%89%88%E4%B8%AA%E4%BA%BA%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/17-04-22-Java%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%AE%9E%E5%BD%952008%E7%89%88%E4%B8%AA%E4%BA%BA%E6%95%B4%E7%90%86/" class="post-title-link" itemprop="url">java 个人整理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-04-22 11:20:14" itemprop="dateCreated datePublished" datetime="2017-04-22T11:20:14+08:00">2017-04-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-10-25 14:23:06" itemprop="dateModified" datetime="2022-10-25T14:23:06+08:00">2022-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/background/" itemprop="url" rel="index"><span itemprop="name">background</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/background/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-04-22-Java%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%AE%9E%E5%BD%952008%E7%89%88%E4%B8%AA%E4%BA%BA%E6%95%B4%E7%90%86/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-04-22-Java项目开发实录2008版个人整理/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>554</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>1 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>#Java 个人整理</p>
<p><a target="_blank" rel="noopener" href="http://www.studytonight.com/java/overview-of-java.php">core java</a></p>
<p>##《Java项目开发全程实录 第3版》个人整理</p>
<h3 id="涉及知识一览"><a href="#涉及知识一览" class="headerlink" title="涉及知识一览"></a>涉及知识一览</h3><p><strong>按层次</strong></p>
<ul>
<li>Swing</li>
<li><a target="_blank" rel="noopener" href="http://www.runoob.com/w3cnote/basic-knowledge-summary-of-spring.html">Spring</a>(<a target="_blank" rel="noopener" href="http://www.cnblogs.com/jailu/archive/2006/08/18/479978.html">控制反转&#x2F;依赖注入DI</a>ioc(Inversion of Control),AOP(Aspect Oriented Programming)<a target="_blank" rel="noopener" href="http://www.cnblogs.com/yanbincn/archive/2012/06/01/2530377.html">面向切面编程</a>,<a target="_blank" rel="noopener" href="http://jinnianshilongnian.iteye.com/blog/1474325">2</a>)</li>
<li><a target="_blank" rel="noopener" href="http://blog.csdn.net/cping1982/article/details/2101247">DAO(Data Access Object DAO)</a></li>
<li><a target="_blank" rel="noopener" href="http://wiki.jikexueyuan.com/project/hibernate/examples.html">Hibernate(orm(Object Relational Mapping)框架)</a> 轻量级封装JDBC，服务于Dao+数据库</li>
<li>JDBC(SQL Server 2000,JavaDB.Oracle,SQL Server 2005)</li>
<li>PowerDesigner&#x2F;Visio(E-R图)</li>
</ul>
<p>其它</p>
<ul>
<li>JUnit(Java单元测试框架)</li>
<li><a target="_blank" rel="noopener" href="http://blog.csdn.net/ritterliu/article/details/7764849">Java 反射</a></li>
<li>Java Mail</li>
</ul>
<p><strong>按目录</strong></p>
<ol>
<li>SQL Server 2000, PowerDesigner</li>
<li>JavaDB</li>
<li>Hibernate Oracle</li>
<li>SQL Server 2005, Visio</li>
<li>SQL Server 2000</li>
<li>JavaDB, 短信猫 Java Mail</li>
<li>Hibernate, Spring</li>
<li>SQL Server 2005</li>
<li>no Swing, jsp, javaBean, SQL Server 2000, Tomcat, Proxool</li>
<li>Socket, thread</li>
</ol>
<hr>
<p>TODO</p>
<p>IoC</p>
<p>AOP</p>
<p>Spring</p>
<p>Swing</p>
<p>个人账目管理</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-04-17-Minimum-maintenance-cpp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/17-04-17-Minimum-maintenance-cpp/" class="post-title-link" itemprop="url">最小值管理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-04-17 23:31:33" itemprop="dateCreated datePublished" datetime="2017-04-17T23:31:33+08:00">2017-04-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-10-25 14:23:06" itemprop="dateModified" datetime="2022-10-25T14:23:06+08:00">2022-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/backend/" itemprop="url" rel="index"><span itemprop="name">backend</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/backend/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-04-17-Minimum-maintenance-cpp/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-04-17-Minimum-maintenance-cpp/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>9.7k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>9 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>C++手工优化</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/Blog/17-04-17-Minimum-maintenance-cpp/">
                閱讀全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-04-17-permutation-traversal-cpp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/17-04-17-permutation-traversal-cpp/" class="post-title-link" itemprop="url">遍历管理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-04-17 00:50:21" itemprop="dateCreated datePublished" datetime="2017-04-17T00:50:21+08:00">2017-04-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-10-25 14:23:06" itemprop="dateModified" datetime="2022-10-25T14:23:06+08:00">2022-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-04-17-permutation-traversal-cpp/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-04-17-permutation-traversal-cpp/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>14k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>13 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="permutation-traversal-cpp"><a href="#permutation-traversal-cpp" class="headerlink" title="permutation_traversal.cpp"></a>permutation_traversal.cpp</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//10 - 0.2s</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> pt_s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ptdemo</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> pt_bits)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(pt_bits == (<span class="number">1</span>&lt;&lt;pt_s) - <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> i;</span><br><span class="line">  <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; pt_s ; ++i)&#123;</span><br><span class="line">    <span class="keyword">if</span>( pt_bits &amp; (<span class="number">1</span>&lt;&lt;i) )</span><br><span class="line">      <span class="keyword">continue</span> ; </span><br><span class="line">    <span class="comment">//cout&lt;&lt;i&lt;&lt;endl;</span></span><br><span class="line">    <span class="type">int</span> debug = i;</span><br><span class="line">    <span class="built_in">ptdemo</span>(pt_bits | (<span class="number">1</span>&lt;&lt;i));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  pt_s = <span class="number">10</span>;</span><br><span class="line">  <span class="type">int</span> v = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">ptdemo</span>(v);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="permutation-traversal-old1-cpp"><a href="#permutation-traversal-old1-cpp" class="headerlink" title="permutation_traversal.old1.cpp"></a>permutation_traversal.old1.cpp</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//10 - 11.588 </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Permutation_traversal</span>&#123;</span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;left_index; <span class="comment">// to boost vector?</span></span><br><span class="line">    stack&lt;pair&lt;vector&lt;<span class="type">int</span>&gt;::iterator,<span class="type">int</span>&gt;&gt;visitstack; <span class="comment">// to boost list?</span></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;::iterator iter;</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>(<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp;li,<span class="type">const</span> stack&lt;pair&lt;vector&lt;<span class="type">int</span>&gt;::iterator,<span class="type">int</span>&gt;&gt;&amp;vs)</span><br><span class="line">    :<span class="built_in">left_index</span>(li),<span class="built_in">visitstack</span>(vs)&#123;</span><br><span class="line">      iter = left_index.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>(<span class="type">int</span> s)&#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s;i++)&#123;</span><br><span class="line">        left_index.<span class="built_in">push_back</span>(i);</span><br><span class="line">      &#125;</span><br><span class="line">      iter = left_index.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> left_index.<span class="built_in">empty</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">next</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(iter == left_index.<span class="built_in">end</span>())</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">      ++iter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">valid</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> iter != left_index.<span class="built_in">end</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getnum</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> visitstack.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">getvalue</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> iter != left_index.<span class="built_in">end</span>() ? *iter : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(iter == left_index.<span class="built_in">end</span>())</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">      visitstack.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(iter,*iter));</span><br><span class="line">      left_index.<span class="built_in">erase</span>(iter);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pop</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(visitstack.<span class="built_in">empty</span>())</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">      pair&lt;vector&lt;<span class="type">int</span>&gt;::iterator,<span class="type">int</span>&gt; p = visitstack.<span class="built_in">top</span>();</span><br><span class="line">      left_index.<span class="built_in">insert</span>(p.first,p.second);</span><br><span class="line">      visitstack.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Permutation_traversal * <span class="title">isolate</span><span class="params">()</span></span>&#123;<span class="comment">// careful about memory overflow</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Permutation_traversal</span>(left_index,visitstack);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ptdemo</span><span class="params">(Permutation_traversal &amp; pt)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(pt.<span class="built_in">empty</span>())</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">  <span class="keyword">for</span>(;pt.<span class="built_in">valid</span>();pt.<span class="built_in">next</span>())&#123;</span><br><span class="line">    <span class="comment">//for(int i=0,limiti=pt.getnum();i&lt;limiti;i++)cout&lt;&lt;&quot; &quot;;</span></span><br><span class="line">    <span class="comment">//cout&lt;&lt;pt.getvalue()&lt;&lt;endl;</span></span><br><span class="line">    <span class="type">int</span> debug = pt.<span class="built_in">getvalue</span>();</span><br><span class="line">    pt.<span class="built_in">push</span>();</span><br><span class="line">    Permutation_traversal * child_pt = pt.<span class="built_in">isolate</span>();</span><br><span class="line">    <span class="built_in">ptdemo</span>(*child_pt);</span><br><span class="line">    <span class="keyword">delete</span> child_pt;</span><br><span class="line">    pt.<span class="built_in">pop</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="function">Permutation_traversal <span class="title">pt</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">  <span class="built_in">ptdemo</span>(pt);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="permutation-traversal-old1-min-cpp"><a href="#permutation-traversal-old1-min-cpp" class="headerlink" title="permutation_traversal.old1.min.cpp"></a>permutation_traversal.old1.min.cpp</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ,min.cpp use less check</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Permutation_traversal</span>&#123;</span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;left_index; <span class="comment">// to boost vector?</span></span><br><span class="line">    stack&lt;pair&lt;vector&lt;<span class="type">int</span>&gt;::iterator,<span class="type">int</span>&gt;&gt;visitstack; <span class="comment">// to boost list?</span></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;::iterator iter;</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>(<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp;li,<span class="type">const</span> stack&lt;pair&lt;vector&lt;<span class="type">int</span>&gt;::iterator,<span class="type">int</span>&gt;&gt;&amp;vs)</span><br><span class="line">    :<span class="built_in">left_index</span>(li),<span class="built_in">visitstack</span>(vs)&#123;</span><br><span class="line">      iter = left_index.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>(<span class="type">int</span> s)&#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s;i++)&#123;</span><br><span class="line">        left_index.<span class="built_in">push_back</span>(i);</span><br><span class="line">      &#125;</span><br><span class="line">      iter = left_index.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> left_index.<span class="built_in">empty</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">next</span><span class="params">()</span></span>&#123;</span><br><span class="line">      ++iter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">valid</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> iter != left_index.<span class="built_in">end</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">getvalue</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> *iter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">()</span></span>&#123;</span><br><span class="line">      visitstack.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(iter,*iter));</span><br><span class="line">      left_index.<span class="built_in">erase</span>(iter);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pop</span><span class="params">()</span></span>&#123;</span><br><span class="line">      pair&lt;vector&lt;<span class="type">int</span>&gt;::iterator,<span class="type">int</span>&gt; p = visitstack.<span class="built_in">top</span>();</span><br><span class="line">      left_index.<span class="built_in">insert</span>(p.first,p.second);</span><br><span class="line">      visitstack.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Permutation_traversal * <span class="title">isolate</span><span class="params">()</span></span>&#123;<span class="comment">// careful about memory overflow</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Permutation_traversal</span>(left_index,visitstack);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ptdemo</span><span class="params">(Permutation_traversal &amp; pt)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(pt.<span class="built_in">empty</span>())</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">  <span class="keyword">for</span>(;pt.<span class="built_in">valid</span>();pt.<span class="built_in">next</span>())&#123;</span><br><span class="line">    cout&lt;&lt;pt.<span class="built_in">getvalue</span>()&lt;&lt;endl;</span><br><span class="line">    pt.<span class="built_in">push</span>();</span><br><span class="line">    Permutation_traversal * child_pt = pt.<span class="built_in">isolate</span>();</span><br><span class="line">    <span class="built_in">ptdemo</span>(*child_pt);</span><br><span class="line">    <span class="keyword">delete</span> child_pt;</span><br><span class="line">    pt.<span class="built_in">pop</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="function">Permutation_traversal <span class="title">pt</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">  <span class="built_in">ptdemo</span>(pt);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="permutation-traversal-old2-cpp"><a href="#permutation-traversal-old2-cpp" class="headerlink" title="permutation_traversal.old2.cpp"></a>permutation_traversal.old2.cpp</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//10 4.469s</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Permutation_traversal</span>&#123;</span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;left_index; <span class="comment">// to boost vector?</span></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;::iterator iter;</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>(<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp;li)</span><br><span class="line">    :<span class="built_in">left_index</span>(li)&#123;</span><br><span class="line">      iter = left_index.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>(<span class="type">int</span> s)&#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s;i++)&#123;</span><br><span class="line">        left_index.<span class="built_in">push_back</span>(i);</span><br><span class="line">      &#125;</span><br><span class="line">      iter = left_index.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> left_index.<span class="built_in">empty</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">next</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(iter == left_index.<span class="built_in">end</span>())</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">      ++iter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">valid</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> iter != left_index.<span class="built_in">end</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">getvalue</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> iter != left_index.<span class="built_in">end</span>() ? *iter : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Permutation_traversal * <span class="title">isolate</span><span class="params">()</span></span>&#123;<span class="comment">// careful about memory overflow</span></span><br><span class="line">      <span class="keyword">if</span>(iter == left_index.<span class="built_in">end</span>())</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">      vector&lt;<span class="type">int</span>&gt;::iterator tmp_iter = iter;</span><br><span class="line">      <span class="type">int</span> tmp_val = *iter;</span><br><span class="line">      left_index.<span class="built_in">erase</span>(iter);</span><br><span class="line">      Permutation_traversal * newpt = <span class="keyword">new</span> <span class="built_in">Permutation_traversal</span>(left_index);</span><br><span class="line">      left_index.<span class="built_in">insert</span>(tmp_iter,tmp_val);</span><br><span class="line">      <span class="keyword">return</span> newpt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// debug [TODO]remove code below</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getnum</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">5</span>-left_index.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ptdemo</span><span class="params">(Permutation_traversal &amp; pt)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(pt.<span class="built_in">empty</span>())</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">  <span class="keyword">for</span>(;pt.<span class="built_in">valid</span>();pt.<span class="built_in">next</span>())&#123;</span><br><span class="line">    <span class="comment">//for(int i=0,limiti=pt.getnum();i&lt;limiti;i++)cout&lt;&lt;&quot; &quot;;</span></span><br><span class="line">    <span class="comment">//cout&lt;&lt;pt.getvalue()&lt;&lt;endl;</span></span><br><span class="line">    <span class="type">int</span> debug = pt.<span class="built_in">getvalue</span>();</span><br><span class="line">    Permutation_traversal * child_pt = pt.<span class="built_in">isolate</span>();</span><br><span class="line">    <span class="built_in">ptdemo</span>(*child_pt);</span><br><span class="line">    <span class="keyword">delete</span> child_pt;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="function">Permutation_traversal <span class="title">pt</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">  <span class="built_in">ptdemo</span>(pt);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="permutation-traversal-old2-min-cpp"><a href="#permutation-traversal-old2-min-cpp" class="headerlink" title="permutation_traversal.old2.min.cpp"></a>permutation_traversal.old2.min.cpp</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Permutation_traversal</span>&#123;</span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;left_index; <span class="comment">// to boost vector?</span></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;::iterator iter;</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>(<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp;li)</span><br><span class="line">    :<span class="built_in">left_index</span>(li)&#123;</span><br><span class="line">      iter = left_index.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>(<span class="type">int</span> s)&#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s;i++)&#123;</span><br><span class="line">        left_index.<span class="built_in">push_back</span>(i);</span><br><span class="line">      &#125;</span><br><span class="line">      iter = left_index.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> left_index.<span class="built_in">empty</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">next</span><span class="params">()</span></span>&#123;</span><br><span class="line">      ++iter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">valid</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> iter != left_index.<span class="built_in">end</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">getvalue</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> *iter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Permutation_traversal * <span class="title">isolate</span><span class="params">()</span></span>&#123;<span class="comment">// careful about memory overflow</span></span><br><span class="line">      vector&lt;<span class="type">int</span>&gt;::iterator tmp_iter = iter;</span><br><span class="line">      <span class="type">int</span> tmp_val = *iter;</span><br><span class="line">      left_index.<span class="built_in">erase</span>(iter);</span><br><span class="line">      Permutation_traversal * newpt = <span class="keyword">new</span> <span class="built_in">Permutation_traversal</span>(left_index);</span><br><span class="line">      left_index.<span class="built_in">insert</span>(tmp_iter,tmp_val);</span><br><span class="line">      <span class="keyword">return</span> newpt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// debug [TODO]remove code below</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getnum</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">5</span>-left_index.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ptdemo</span><span class="params">(Permutation_traversal &amp; pt)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(pt.<span class="built_in">empty</span>())</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">  <span class="keyword">for</span>(;pt.<span class="built_in">valid</span>();pt.<span class="built_in">next</span>())&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,limiti=pt.<span class="built_in">getnum</span>();i&lt;limiti;i++)cout&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout&lt;&lt;pt.<span class="built_in">getvalue</span>()&lt;&lt;endl;</span><br><span class="line">    Permutation_traversal * child_pt = pt.<span class="built_in">isolate</span>();</span><br><span class="line">    <span class="built_in">ptdemo</span>(*child_pt);</span><br><span class="line">    <span class="keyword">delete</span> child_pt;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="function">Permutation_traversal <span class="title">pt</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">  <span class="built_in">ptdemo</span>(pt);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="permutation-traversal-old3-cpp"><a href="#permutation-traversal-old3-cpp" class="headerlink" title="permutation_traversal.old3.cpp"></a>permutation_traversal.old3.cpp</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//10 - 0.927s</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Permutation_traversal</span>&#123;</span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> * left_index; <span class="comment">// to boost vector?</span></span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    <span class="type">int</span> iter;</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>()&#123;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>(<span class="type">int</span> s)</span><br><span class="line">    :<span class="built_in">size</span>(s),<span class="built_in">iter</span>(<span class="number">0</span>)&#123;</span><br><span class="line">      left_index = <span class="keyword">new</span> <span class="type">int</span>[s];</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s;i++)&#123;</span><br><span class="line">        left_index[i]=i;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">Permutation_traversal</span>()&#123;</span><br><span class="line">      <span class="keyword">delete</span> [] left_index;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">next</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(iter == size)</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">      ++iter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">valid</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> iter != size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">getvalue</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> iter != size ? left_index[iter] : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Permutation_traversal * <span class="title">isolate</span><span class="params">()</span></span>&#123;<span class="comment">// careful about memory overflow</span></span><br><span class="line">      <span class="keyword">if</span>(iter == size)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">      Permutation_traversal * newpt = <span class="keyword">new</span> <span class="built_in">Permutation_traversal</span>();</span><br><span class="line">      newpt-&gt;left_index = <span class="keyword">new</span> <span class="type">int</span>[size<span class="number">-1</span>];</span><br><span class="line">      newpt-&gt;size = <span class="number">0</span>;</span><br><span class="line">      newpt-&gt;iter = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> it = <span class="number">0</span> ; it &lt; size ; ++it)&#123;</span><br><span class="line">        <span class="keyword">if</span>(it == iter)</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        newpt-&gt;left_index[newpt-&gt;size++] = left_index[it];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> newpt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// debug [TODO]remove code below</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getnum</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">5</span>-size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ptdemo</span><span class="params">(Permutation_traversal &amp; pt)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(pt.<span class="built_in">empty</span>())</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">  <span class="keyword">for</span>(;pt.<span class="built_in">valid</span>();pt.<span class="built_in">next</span>())&#123;</span><br><span class="line">    <span class="comment">//for(int i=0,limiti=pt.getnum();i&lt;limiti;i++)cout&lt;&lt;&quot; &quot;;</span></span><br><span class="line">    <span class="comment">//cout&lt;&lt;pt.getvalue()&lt;&lt;endl;</span></span><br><span class="line">    <span class="type">int</span> debug = pt.<span class="built_in">getvalue</span>();</span><br><span class="line">    Permutation_traversal * child_pt = pt.<span class="built_in">isolate</span>();</span><br><span class="line">    <span class="built_in">ptdemo</span>(*child_pt);</span><br><span class="line">    <span class="keyword">delete</span> child_pt;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="function">Permutation_traversal <span class="title">pt</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">  <span class="built_in">ptdemo</span>(pt);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="permutation-traversal-old3-min-cpp"><a href="#permutation-traversal-old3-min-cpp" class="headerlink" title="permutation_traversal.old3.min.cpp"></a>permutation_traversal.old3.min.cpp</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Permutation_traversal</span>&#123;</span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> * left_index; <span class="comment">// to boost vector?</span></span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    <span class="type">int</span> iter;</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>()&#123;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Permutation_traversal</span>(<span class="type">int</span> s)</span><br><span class="line">    :<span class="built_in">size</span>(s),<span class="built_in">iter</span>(<span class="number">0</span>)&#123;</span><br><span class="line">      left_index = <span class="keyword">new</span> <span class="type">int</span>[s];</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s;i++)&#123;</span><br><span class="line">        left_index[i]=i;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">Permutation_traversal</span>()&#123;</span><br><span class="line">      <span class="keyword">delete</span> [] left_index;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">next</span><span class="params">()</span></span>&#123;</span><br><span class="line">      ++iter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">valid</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> iter != size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">getvalue</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> left_index[iter];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Permutation_traversal * <span class="title">isolate</span><span class="params">()</span></span>&#123;<span class="comment">// careful about memory overflow</span></span><br><span class="line">      Permutation_traversal * newpt = <span class="keyword">new</span> <span class="built_in">Permutation_traversal</span>();</span><br><span class="line">      newpt-&gt;left_index = <span class="keyword">new</span> <span class="type">int</span>[size<span class="number">-1</span>];</span><br><span class="line">      newpt-&gt;size = <span class="number">0</span>;</span><br><span class="line">      newpt-&gt;iter = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> it = <span class="number">0</span> ; it &lt; size ; ++it)&#123;</span><br><span class="line">        <span class="keyword">if</span>(it == iter)</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        newpt-&gt;left_index[newpt-&gt;size++] = left_index[it];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> newpt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// debug [TODO]remove code below</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getnum</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">5</span>-size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ptdemo</span><span class="params">(Permutation_traversal &amp; pt)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(pt.<span class="built_in">empty</span>())</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">  <span class="keyword">for</span>(;pt.<span class="built_in">valid</span>();pt.<span class="built_in">next</span>())&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,limiti=pt.<span class="built_in">getnum</span>();i&lt;limiti;i++)cout&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout&lt;&lt;pt.<span class="built_in">getvalue</span>()&lt;&lt;endl;</span><br><span class="line">    Permutation_traversal * child_pt = pt.<span class="built_in">isolate</span>();</span><br><span class="line">    <span class="built_in">ptdemo</span>(*child_pt);</span><br><span class="line">    <span class="keyword">delete</span> child_pt;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="function">Permutation_traversal <span class="title">pt</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">  <span class="built_in">ptdemo</span>(pt);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="permutation-traversal-old4-cpp"><a href="#permutation-traversal-old4-cpp" class="headerlink" title="permutation_traversal.old4.cpp"></a>permutation_traversal.old4.cpp</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//10 - 0.581s</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Permutation_traversal</span>&#123;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">Child_Permutation_traversal</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">      <span class="type">int</span> * left_index; <span class="comment">// to boost vector?</span></span><br><span class="line">      <span class="type">int</span> size;</span><br><span class="line">      <span class="type">int</span> iter;</span><br><span class="line">      <span class="built_in">Child_Permutation_traversal</span>(<span class="type">int</span> s)</span><br><span class="line">        :<span class="built_in">size</span>(s),<span class="built_in">iter</span>(<span class="number">0</span>)&#123;</span><br><span class="line">          left_index = <span class="keyword">new</span> <span class="type">int</span>[s];</span><br><span class="line">        &#125;</span><br><span class="line">      ~<span class="built_in">Child_Permutation_traversal</span>()&#123;</span><br><span class="line">        <span class="keyword">delete</span> [] left_index;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Child_Permutation_traversal ** cpt;</span><br><span class="line">  <span class="type">int</span> size;</span><br><span class="line">  <span class="type">int</span> depth;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Permutation_traversal</span>(<span class="type">int</span> s)</span><br><span class="line">  :<span class="built_in">size</span>(s)&#123;</span><br><span class="line">    cpt = <span class="keyword">new</span> Child_Permutation_traversal * [s + <span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt;= s; i++)&#123;</span><br><span class="line">      cpt[i] = <span class="keyword">new</span> <span class="built_in">Child_Permutation_traversal</span>(s-i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; s; i++)&#123;</span><br><span class="line">      cpt[<span class="number">0</span>]-&gt;left_index[i]=i;</span><br><span class="line">    &#125;</span><br><span class="line">    depth = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ~<span class="built_in">Permutation_traversal</span>()&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=size;i++)&#123;</span><br><span class="line">      <span class="keyword">delete</span> cpt[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> [] cpt;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cpt[depth]-&gt;size == <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">next</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cpt[depth]-&gt;iter == cpt[depth]-&gt;size)</span><br><span class="line">      <span class="keyword">return</span> ;</span><br><span class="line">    ++(cpt[depth]-&gt;iter);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">valid</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cpt[depth]-&gt;iter != cpt[depth]-&gt;size;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">getvalue</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cpt[depth]-&gt;iter != cpt[depth]-&gt;size ? cpt[depth]-&gt;left_index[cpt[depth]-&gt;iter] : <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">select</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cpt[depth]-&gt;iter == cpt[depth]-&gt;size)</span><br><span class="line">      <span class="keyword">return</span> ;</span><br><span class="line">    <span class="type">int</span> newdepth = depth + <span class="number">1</span>;</span><br><span class="line">    cpt[newdepth]-&gt;size = <span class="number">0</span>;</span><br><span class="line">    cpt[newdepth]-&gt;iter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> it = <span class="number">0</span>,itlimit=cpt[depth]-&gt;size ; it &lt; itlimit ; ++it)&#123;</span><br><span class="line">      <span class="keyword">if</span>(it == cpt[depth]-&gt;iter)</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      cpt[newdepth]-&gt;left_index[cpt[newdepth]-&gt;size++] = cpt[depth]-&gt;left_index[it];</span><br><span class="line">    &#125;</span><br><span class="line">    depth = newdepth;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">unselect</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(depth &gt; <span class="number">0</span>)</span><br><span class="line">      --depth;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">int</span> <span class="title">getnum</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">5</span>-cpt[depth]-&gt;size;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ptdemo</span><span class="params">(Permutation_traversal &amp; pt)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(pt.<span class="built_in">empty</span>())</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">  <span class="keyword">for</span>(;pt.<span class="built_in">valid</span>();pt.<span class="built_in">next</span>())&#123;</span><br><span class="line">    <span class="comment">//for(int i=0,limiti=pt.getnum();i&lt;limiti;i++)cout&lt;&lt;&quot; &quot;;</span></span><br><span class="line">    <span class="comment">//cout&lt;&lt;pt.getvalue()&lt;&lt;endl;</span></span><br><span class="line">    <span class="type">int</span> debug = pt.<span class="built_in">getvalue</span>();</span><br><span class="line">    pt.<span class="built_in">select</span>();</span><br><span class="line">    <span class="built_in">ptdemo</span>(pt);</span><br><span class="line">    pt.<span class="built_in">unselect</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="function">Permutation_traversal <span class="title">pt</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">  <span class="built_in">ptdemo</span>(pt);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="permutation-traversal-old4-min-cpp"><a href="#permutation-traversal-old4-min-cpp" class="headerlink" title="permutation_traversal.old4.min.cpp"></a>permutation_traversal.old4.min.cpp</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//10 - 0.472s</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Permutation_traversal</span>&#123;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">Child_Permutation_traversal</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">      <span class="type">int</span> * left_index; <span class="comment">// to boost vector?</span></span><br><span class="line">      <span class="type">int</span> size;</span><br><span class="line">      <span class="type">int</span> iter;</span><br><span class="line">      <span class="built_in">Child_Permutation_traversal</span>(<span class="type">int</span> s)</span><br><span class="line">        :<span class="built_in">size</span>(s),<span class="built_in">iter</span>(<span class="number">0</span>)&#123;</span><br><span class="line">          left_index = <span class="keyword">new</span> <span class="type">int</span>[s];</span><br><span class="line">        &#125;</span><br><span class="line">      ~<span class="built_in">Child_Permutation_traversal</span>()&#123;</span><br><span class="line">        <span class="keyword">delete</span> [] left_index;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Child_Permutation_traversal ** cpt;</span><br><span class="line">  <span class="type">int</span> size;</span><br><span class="line">  <span class="type">int</span> depth;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Permutation_traversal</span>(<span class="type">int</span> s)</span><br><span class="line">  :<span class="built_in">size</span>(s)&#123;</span><br><span class="line">    cpt = <span class="keyword">new</span> Child_Permutation_traversal * [s + <span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt;= s; i++)&#123;</span><br><span class="line">      cpt[i] = <span class="keyword">new</span> <span class="built_in">Child_Permutation_traversal</span>(s-i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; s; i++)&#123;</span><br><span class="line">      cpt[<span class="number">0</span>]-&gt;left_index[i]=i;</span><br><span class="line">    &#125;</span><br><span class="line">    depth = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ~<span class="built_in">Permutation_traversal</span>()&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=size;i++)&#123;</span><br><span class="line">      <span class="keyword">delete</span> cpt[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> [] cpt;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cpt[depth]-&gt;size == <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">next</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ++(cpt[depth]-&gt;iter);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="type">const</span> <span class="title">valid</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cpt[depth]-&gt;iter != cpt[depth]-&gt;size;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">getvalue</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cpt[depth]-&gt;left_index[cpt[depth]-&gt;iter];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">select</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> newdepth = depth + <span class="number">1</span>;</span><br><span class="line">    cpt[newdepth]-&gt;size = <span class="number">0</span>;</span><br><span class="line">    cpt[newdepth]-&gt;iter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> it = <span class="number">0</span>,itlimit=cpt[depth]-&gt;size ; it &lt; itlimit ; ++it)&#123;</span><br><span class="line">      <span class="keyword">if</span>(it == cpt[depth]-&gt;iter)</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      cpt[newdepth]-&gt;left_index[cpt[newdepth]-&gt;size++] = cpt[depth]-&gt;left_index[it];</span><br><span class="line">    &#125;</span><br><span class="line">    depth = newdepth;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">unselect</span><span class="params">()</span></span>&#123;</span><br><span class="line">      --depth;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">int</span> <span class="title">getnum</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">5</span>-cpt[depth]-&gt;size;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ptdemo</span><span class="params">(Permutation_traversal &amp; pt)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(pt.<span class="built_in">empty</span>())</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">  <span class="keyword">for</span>(;pt.<span class="built_in">valid</span>();pt.<span class="built_in">next</span>())&#123;</span><br><span class="line">    <span class="comment">//for(int i=0,limiti=pt.getnum();i&lt;limiti;i++)cout&lt;&lt;&quot; &quot;;</span></span><br><span class="line">    <span class="comment">//cout&lt;&lt;pt.getvalue()&lt;&lt;endl;</span></span><br><span class="line">    <span class="type">int</span> debug = pt.<span class="built_in">getvalue</span>();</span><br><span class="line">    pt.<span class="built_in">select</span>();</span><br><span class="line">    <span class="built_in">ptdemo</span>(pt);</span><br><span class="line">    pt.<span class="built_in">unselect</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="function">Permutation_traversal <span class="title">pt</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">  <span class="built_in">ptdemo</span>(pt);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-03-14-collectWeiboDataByKeyword/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/17-03-14-collectWeiboDataByKeyword/" class="post-title-link" itemprop="url">weibo搜索爬虫</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-03-14 11:05:44" itemprop="dateCreated datePublished" datetime="2017-03-14T11:05:44+08:00">2017-03-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-10-25 14:23:06" itemprop="dateModified" datetime="2022-10-25T14:23:06+08:00">2022-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/backend/" itemprop="url" rel="index"><span itemprop="name">backend</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/backend/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-03-14-collectWeiboDataByKeyword/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-03-14-collectWeiboDataByKeyword/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>12k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>11 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br></pre></td><td class="code"><pre><span class="line"># coding: utf-8</span><br><span class="line"></span><br><span class="line">__version__ = &#x27;1.1.0&#x27;</span><br><span class="line">__author__ = &#x27;Zhu Jianqi (heloowird@gmail.com)&#x27;</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">以关键词收集新浪微博</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">import requests</span><br><span class="line">import wx</span><br><span class="line">import csv</span><br><span class="line">import codecs</span><br><span class="line">import sys</span><br><span class="line">import urllib</span><br><span class="line">import urllib2</span><br><span class="line">import re</span><br><span class="line">import json</span><br><span class="line">import hashlib</span><br><span class="line">import os</span><br><span class="line">import time</span><br><span class="line">import datetime</span><br><span class="line">import random</span><br><span class="line">from lxml import etree</span><br><span class="line">import logging</span><br><span class="line">import gzip</span><br><span class="line">from StringIO import StringIO</span><br><span class="line"></span><br><span class="line">class CollectData():</span><br><span class="line">    &quot;&quot;&quot;数据收集类</span><br><span class="line">        利用微博高级搜索功能，按关键字搜集一定时间范围内的微博。</span><br><span class="line"></span><br><span class="line">        大体思路：构造URL，爬取网页，然后解析网页中的微博ID。后续利用微博API进行数据入库。本程序只负责收集微博的ID。</span><br><span class="line"></span><br><span class="line">        登陆新浪微博，进入高级搜索，输入关键字”空气污染“，选择”实时“，时间为”2013-07-02-2:2013-07-09-2“，地区为”北京“，之后发送请求会发现地址栏变为如下：</span><br><span class="line">        http://s.weibo.com/wb/%25E7%25A9%25BA%25E6%25B0%2594%25E6%25B1%25A1%25E6%259F%2593&amp;xsort=time&amp;region=custom:11:1000&amp;timescope=custom:2013-07-02-2:2013-07-09-2&amp;Refer=g</span><br><span class="line"></span><br><span class="line">        是不是很长，其实很简单。</span><br><span class="line">            固定地址部分：http://s.weibo.com/wb/</span><br><span class="line">            关键字二次UTF-8编码：%25E7%25A9%25BA%25E6%25B0%2594%25E6%25B1%25A1%25E6%259F%2593</span><br><span class="line">            排序为“实时”：xsort=time</span><br><span class="line">            搜索地区：region=custom:11:1000</span><br><span class="line">            搜索时间范围：timescope=custom:2013-07-02-2:2013-07-09-2</span><br><span class="line">            可忽略项：Refer=g</span><br><span class="line">            显示类似微博：nodup=1    注：这个选项可多收集微博，建议加上。默认不加此参数，省略了部分相似微博。</span><br><span class="line">            某次请求的页数：page=1</span><br><span class="line"></span><br><span class="line">        另外，高级搜索最多返回50页微博，那么时间间隔设置最小为宜。所以该类设置为搜集一定时间段内最多50页微博。</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    def __init__(self, keyword, startTime, savedir, interval=&#x27;50&#x27;, flag=True, begin_url_per = &quot;http://s.weibo.com/weibo/&quot;):</span><br><span class="line">        self.begin_url_per = begin_url_per  #设置固定地址部分，默认为&quot;http://s.weibo.com/weibo/&quot;，或者&quot;http://s.weibo.com/wb/&quot;</span><br><span class="line">        self.setKeyword(keyword)    #设置关键字</span><br><span class="line">        self.setStartTimescope(startTime)   #设置搜索的开始时间</span><br><span class="line">        # self.setRegion(region)  #设置搜索区域</span><br><span class="line">        self.setSave_dir(savedir)   #设置结果的存储目录</span><br><span class="line">        self.setInterval(interval)  #设置邻近网页请求之间的基础时间间隔（注意：过于频繁会被认为是机器人）</span><br><span class="line">        self.setFlag(flag)  #设置</span><br><span class="line">        self.logger = logging.getLogger(&#x27;main.CollectData&#x27;) #初始化日志</span><br><span class="line"></span><br><span class="line">    ##设置关键字</span><br><span class="line">    ##关键字需解码</span><br><span class="line">    def setKeyword(self, keyword):</span><br><span class="line">        #self.keyword = keyword.decode(&#x27;GBK&#x27;).encode(&quot;utf-8&quot;)</span><br><span class="line">        self.keyword = keyword</span><br><span class="line">        print &#x27;twice encode:&#x27;,self.getKeyWord()</span><br><span class="line"></span><br><span class="line">    ##设置起始范围，间隔为1小时</span><br><span class="line">    ##格式为：yyyy-mm-dd-HH</span><br><span class="line">    def setStartTimescope(self, startTime):</span><br><span class="line">        if not (startTime == &#x27;-&#x27;):</span><br><span class="line">            self.timescope = startTime + &quot;:&quot; + startTime</span><br><span class="line">        else:</span><br><span class="line">            self.timescope = &#x27;-&#x27;</span><br><span class="line"></span><br><span class="line">    # ##设置搜索地区</span><br><span class="line">    # def setRegion(self, region):</span><br><span class="line">    #     self.region = region</span><br><span class="line"></span><br><span class="line">    ##设置结果的存储目录</span><br><span class="line">    def setSave_dir(self, save_dir):</span><br><span class="line">        self.save_dir = save_dir</span><br><span class="line">        if not os.path.exists(self.save_dir):</span><br><span class="line">            os.mkdir(self.save_dir)</span><br><span class="line"></span><br><span class="line">    ##设置邻近网页请求之间的基础时间间隔</span><br><span class="line">    def setInterval(self, interval):</span><br><span class="line">        self.interval = int(interval)</span><br><span class="line"></span><br><span class="line">    ##设置是否被认为机器人的标志。若为False，需要进入页面，手动输入验证码</span><br><span class="line">    def setFlag(self, flag):</span><br><span class="line">        self.flag = flag</span><br><span class="line"></span><br><span class="line">    ##构建URL</span><br><span class="line">    def getURL(self):</span><br><span class="line">        return self.begin_url_per+self.getKeyWord()+&quot;&amp;typeall=1&amp;suball=1&quot;+&quot;&amp;timescope=custom:&quot;+self.timescope+&quot;&amp;page=&quot;</span><br><span class="line"></span><br><span class="line">    ##关键字需要进行两次urlencode</span><br><span class="line">    def getKeyWord(self):</span><br><span class="line">        once = urllib.urlencode(&#123;&quot;kw&quot;:self.keyword&#125;)[3:]</span><br><span class="line">        return urllib.urlencode(&#123;&quot;kw&quot;:once&#125;)[3:]</span><br><span class="line"></span><br><span class="line">    ##爬取一次请求中的所有网页，最多返回50页</span><br><span class="line">    def download(self, url, maxTryNum=4):</span><br><span class="line">        csvFile = open(self.save_dir + os.sep + &quot;weibo_kanbing.csv&quot;, &quot;ab&quot;)  #向结果文件中写微博ID</span><br><span class="line">        csvFile.write(codecs.BOM_UTF8)</span><br><span class="line">        content = csv.writer(csvFile, dialect=&#x27;excel&#x27;)</span><br><span class="line">        headers = &#123;&#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36&#x27;&#125;</span><br><span class="line">        cookie = &#123;&#x27;SINAGLOBAL&#x27;:&#x27;3726160468139.8677.1489128973894&#x27;, &#x27;un&#x27;:&#x27;18621677460&#x27;, &#x27;wvr&#x27;:&#x27;6&#x27;, &#x27;SWB&#x27;:&#x27;usrmdinst_12&#x27;, &#x27;SCF&#x27;:&#x27;At4nsWXnBTiLQgwnhEdGW1ipfDRoyBYdEIpm4KN7_ZN3C0BxRlQeyX0sHoQOK6bDqLR6HeBBiwo6wRFXfObIvnc.&#x27;, &#x27;SUB&#x27;:&#x27;_2A251wx_bDeRxGeNP7FIR9yjFwzyIHXVWuXYTrDV8PUNbmtBeLRjVkW8ia3o1WnWjknWq3t_Uh0UkKzBqsg..&#x27;, &#x27;SUBP&#x27;:&#x27;0033WrSXqPxfM725Ws9jqgMF55529P9D9Wh_ODAX.pd3QJ6U3yvqGKET5JpX5KMhUgL.Fo-pS057S0q41h52dJLoIEUBBEXLxKqL1hnL1KnLxK-LBKeLB-zLxK-L1K5L1K2LxK-L12qLBoet&#x27;, &#x27;SUHB&#x27;:&#x27;0vJ4Ss25HO1Ohu&#x27;, &#x27;ALF&#x27;:&#x27;1521001227&#x27;, &#x27;SSOLoginState&#x27;:&#x27;1489465228&#x27;, &#x27;_s_tentry&#x27;:&#x27;login.sina.com.cn&#x27;, &#x27;Apache&#x27;:&#x27;7301168373695.357.1489465207066&#x27;, &#x27;ULV&#x27;:&#x27;1489465207130:8:8:5:7301168373695.357.1489465207066:1489412710557&#x27;, &#x27;UOR&#x27;:&#x27;,,login.sina.com.cn&#x27;, &#x27;WBStorage&#x27;:&#x27;02e13baf68409715|undefined&#x27;&#125;</span><br><span class="line"></span><br><span class="line">        hasMore = True  #某次请求可能少于50页，设置标记，判断是否还有下一页</span><br><span class="line">        isCaught = False    #某次请求被认为是机器人，设置标记，判断是否被抓住。抓住后，需要复制log中的文件，进入页面，输入验证码</span><br><span class="line">        filter = set([])    #过滤重复的微博ID</span><br><span class="line"></span><br><span class="line">        i = 1   #记录本次请求所返回的页数</span><br><span class="line">        while hasMore and i &lt; 51 and (not isCaught):    #最多返回50页，对每页进行解析，并写入结果文件</span><br><span class="line">            source_url = url + str(i)   #构建某页的URL</span><br><span class="line">            data = &#x27;&#x27;   #存储该页的网页数据</span><br><span class="line">            goon = True #网络中断标记</span><br><span class="line"></span><br><span class="line">            ##网络不好的情况，试着尝试请求三次</span><br><span class="line">            for tryNum in range(maxTryNum):</span><br><span class="line">                try:</span><br><span class="line">                    # set header http://stackoverflow.com/questions/385262/how-do-i-send-a-custom-header-with-urllib2-in-a-http-request</span><br><span class="line">                    # see this http://stackoverflow.com/questions/1653591/python-urllib2-response-header , so you can see &#x27;gzip&#x27; in response header with urllib2.urlopen(URL).info()</span><br><span class="line">                    # and this http://stackoverflow.com/questions/3947120/does-python-urllib2-automatically-uncompress-gzip-data-fetched-from-webpage teach you how to decode gzip</span><br><span class="line">                    #</span><br><span class="line">                    #r = requests.get(source_url, cookies=cookie, headers=headers, timeout=12)</span><br><span class="line">                    send_headers = &#123;</span><br><span class="line">                            &quot;Accept&quot;:&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&quot;,</span><br><span class="line">                            &quot;Accept-Encoding&quot;:&quot;gzip, deflate, sdch&quot;,</span><br><span class="line">                            &quot;Accept-Language&quot;:&quot;zh-CN,zh;q=0.8,en;q=0.6&quot;,</span><br><span class="line">                            &quot;Cache-Control&quot;:&quot;no-cache&quot;,</span><br><span class="line">                            &quot;Connection&quot;:&quot;keep-alive&quot;,</span><br><span class="line">                            #&quot;Cookie&quot;:&quot;cookies here&quot;</span><br><span class="line">                            &quot;Host&quot;:&quot;s.weibo.com&quot;,</span><br><span class="line">                            &quot;Pragma&quot;:&quot;no-cache&quot;,</span><br><span class="line">                            &quot;Referer&quot;:&quot;http://s.weibo.com/&quot;,</span><br><span class="line">                            &quot;Upgrade-Insecure-Requests&quot;:&quot;1&quot;,</span><br><span class="line">                            &quot;User-Agent&quot;:&quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36&quot;</span><br><span class="line">                            &#125;</span><br><span class="line">                    req = urllib2.Request(source_url , headers=send_headers)</span><br><span class="line">                    r = urllib2.urlopen(req)</span><br><span class="line">                    if r.info().get(&#x27;Content-Encoding&#x27;) == &#x27;gzip&#x27;:</span><br><span class="line">                        buf = StringIO(r.read())</span><br><span class="line">                        f = gzip.GzipFile(fileobj=buf)</span><br><span class="line">                        html = f.read()</span><br><span class="line">                    else:</span><br><span class="line">                        html = r.read()</span><br><span class="line">                    data = html</span><br><span class="line">                    #print data</span><br><span class="line">                    break</span><br><span class="line">                except:</span><br><span class="line">                    if tryNum &lt; (maxTryNum-1):</span><br><span class="line">                        time.sleep(10)</span><br><span class="line">                    else:</span><br><span class="line">                        print &#x27;Internet Connect Error!&#x27;</span><br><span class="line">                        self.logger.error(&#x27;Internet Connect Error!&#x27;)</span><br><span class="line">                        self.logger.info(&#x27;filePath: &#x27; + self.save_dir)</span><br><span class="line">                        self.logger.info(&#x27;url: &#x27; + source_url)</span><br><span class="line">                        self.logger.info(&#x27;fileNum: &#x27; + str(fileNum))</span><br><span class="line">                        self.logger.info(&#x27;page: &#x27; + str(i))</span><br><span class="line">                        self.flag = False</span><br><span class="line">                        goon = False</span><br><span class="line">                        break</span><br><span class="line">            if goon:</span><br><span class="line">                lines = data.splitlines()</span><br><span class="line">                isCaught = True</span><br><span class="line">                for line in lines:</span><br><span class="line">                    ## 判断是否有微博内容，出现这一行，则说明没有被认为是机器人</span><br><span class="line">                    if line.startswith(&#x27;&lt;script&gt;STK &amp;&amp; STK.pageletM &amp;&amp; STK.pageletM.view(&#123;&quot;pid&quot;:&quot;pl_weibo_direct&quot;&#x27;):</span><br><span class="line">                        isCaught = False</span><br><span class="line">                        n = line.find(&#x27;html&quot;:&quot;&#x27;)</span><br><span class="line">                        if n &gt; 0:</span><br><span class="line">                            j = line[n + 7: -12].encode(&quot;utf-8&quot;).decode(&#x27;unicode_escape&#x27;).encode(&quot;utf-8&quot;).replace(&quot;\\&quot;, &quot;&quot;).decode(&#x27;utf-8&#x27;)</span><br><span class="line">                            ## 没有更多结果页面</span><br><span class="line">                            if (j.find(&#x27;&lt;div class=&quot;search_noresult&quot;&gt;&#x27;) &gt; 0):</span><br><span class="line">                                hasMore = False</span><br><span class="line">                            ## 有结果的页面</span><br><span class="line">                            else:</span><br><span class="line">                                page = etree.HTML(j)</span><br><span class="line">                                comment_box = page.xpath(&quot;//div[@action-type=\&quot;feed_list_item\&quot;]&quot;)</span><br><span class="line">                                for each_comment in comment_box:</span><br><span class="line">                                    comment_time = each_comment.xpath(&quot;.//div[@class=\&quot;feed_from W_textb\&quot;]/a/@title&quot;)</span><br><span class="line">                                    comment_text_list = each_comment.xpath(&quot;.//p[@class=&#x27;comment_txt&#x27;]&quot;)</span><br><span class="line">                                    comment_text = []</span><br><span class="line">                                    for eachtext in comment_text_list:</span><br><span class="line">                                        comment_text = &#x27;r&#x27;.join(eachtext.xpath(&quot;.//text()&quot;))</span><br><span class="line">                                        comment_text = comment_text.replace(&#x27; &#x27;,&#x27;&#x27;).replace(&#x27;\n&#x27;, &#x27;&#x27;).replace(&#x27;\r&#x27;, &#x27; &#x27;)</span><br><span class="line">                                        comment_text = comment_text.encode(&#x27;utf8&#x27;)</span><br><span class="line">                                        if (comment_text != &#x27;None&#x27; and comment_text not in filter):</span><br><span class="line">                                            filter.add(comment_text)</span><br><span class="line">                                            content.writerow([comment_time[0], comment_text])</span><br><span class="line">                                # weibo = page.xpath(&quot;//div[@class=\&quot;feed_from W_textb\&quot;])</span><br><span class="line">                                # for weibo_time, weibo_content in weibo:</span><br><span class="line">                                #     weibo_time = weibo_time.xpath(&quot;./[@class=\&quot;feed_from W_textb\&quot;]/a/@title&quot;)</span><br><span class="line">                                #     concept = &#x27;r&#x27;.join(weibo_content.xpath(&quot;./text()&quot;))</span><br><span class="line">                                #     concept = concept.replace(&#x27; &#x27;,&#x27;&#x27;).replace(&#x27;\n&#x27;,&#x27;&#x27;).replace(&#x27;\r&#x27;,&#x27; &#x27;)</span><br><span class="line">                                #     concept = concept.encode(&#x27;utf8&#x27;)</span><br><span class="line">                                #     if (concept != &#x27;None&#x27; and concept not in filter):</span><br><span class="line">                                #         filter.add(concept)</span><br><span class="line">                                #         content.writerow([weibo_time, concept])</span><br><span class="line"></span><br><span class="line">                                # dls_id = page.xpath(&quot;//div[@class=\&quot;feed_from W_textb\&quot;]/a/@title&quot;)</span><br><span class="line">                                # for dl_id in dls_id:</span><br><span class="line">                                #     # mid = str(dl_id.attrib.get(&#x27;nick-name&#x27;))</span><br><span class="line">                                #     dl_id = dl_id.encode(&#x27;utf8&#x27;)</span><br><span class="line">                                #     if (dl_id != &#x27;None&#x27; and dl_id not in mid_filter):</span><br><span class="line">                                #         mid_filter.add(dl_id)</span><br><span class="line">                                #         content.writerow([dl_id])</span><br><span class="line">                                #</span><br><span class="line">                                # dls_text = page.xpath(&quot;//p[@class=&#x27;comment_txt&#x27;]&quot;)</span><br><span class="line">                                # for dl_text in dls_text:</span><br><span class="line">                                #     concept = &#x27;r&#x27;.join(dl_text.xpath(&quot;./text()&quot;))</span><br><span class="line">                                #     concept = concept.replace(&#x27; &#x27;,&#x27;&#x27;).replace(&#x27;\n&#x27;,&#x27;&#x27;).replace(&#x27;\r&#x27;,&#x27; &#x27;)</span><br><span class="line">                                #     concept = concept.encode(&#x27;utf8&#x27;)</span><br><span class="line">                                #     if (concept != &#x27;None&#x27; and concept not in mid_filter):</span><br><span class="line">                                #         mid_filter.add(concept)</span><br><span class="line">                                #         content.writerow([concept])</span><br><span class="line">                                        # content.writerow(&#x27;\n&#x27;)</span><br><span class="line">                                    # if (concept != &#x27;None&#x27; and concept not in mid_filter):</span><br><span class="line">                                    #     mid_filter.add(concept)</span><br><span class="line">                                    #     content.write(concept)</span><br><span class="line">                                    #     content.write(&#x27;\n&#x27;)</span><br><span class="line">                                    # print concept</span><br><span class="line">                                    # print &quot;----------------------&quot;</span><br><span class="line">                        break</span><br><span class="line">                lines = None</span><br><span class="line">                ## 处理被认为是机器人的情况</span><br><span class="line">                if isCaught:</span><br><span class="line">                    print &#x27;Be Caught!&#x27;</span><br><span class="line">                    self.logger.error(&#x27;Be Caught Error!&#x27;)</span><br><span class="line">                    self.logger.info(&#x27;filePath: &#x27; + self.save_dir)</span><br><span class="line">                    self.logger.info(&#x27;url: &#x27; + source_url)</span><br><span class="line">                    self.logger.info(&#x27;fileNum: &#x27; + str(fileNum))</span><br><span class="line">                    self.logger.info(&#x27;page:&#x27; + str(i))</span><br><span class="line">                    data = None</span><br><span class="line">                    self.flag = False</span><br><span class="line">                    break</span><br><span class="line">                ## 没有更多结果，结束该次请求，跳到下一个请求</span><br><span class="line">                if not hasMore:</span><br><span class="line">                    print &#x27;No More Results!&#x27;</span><br><span class="line">                    if i == 1:</span><br><span class="line">                        time.sleep(random.randint(55,75))</span><br><span class="line">                    else:</span><br><span class="line">                        time.sleep(15)</span><br><span class="line">                    data = None</span><br><span class="line">                    break</span><br><span class="line">                i += 1</span><br><span class="line">                ## 设置两个邻近URL请求之间的随机休眠时间，防止Be Caught。目前没有模拟登陆</span><br><span class="line">                # sleeptime_one = random.randint(self.interval-30,self.interval-10)</span><br><span class="line">                # sleeptime_two = random.randint(self.interval+10,self.interval+30)</span><br><span class="line">                # if i%2 == 0:</span><br><span class="line">                #     sleeptime = sleeptime_two</span><br><span class="line">                # else:</span><br><span class="line">                #     sleeptime = sleeptime_one</span><br><span class="line">                # print &#x27;sleeping &#x27; + str(sleeptime) + &#x27; seconds...&#x27;</span><br><span class="line">                # time.sleep(sleeptime)</span><br><span class="line">            else:</span><br><span class="line">                break</span><br><span class="line">        csvFile.close()</span><br><span class="line">        csvFile = None</span><br><span class="line"></span><br><span class="line">    ##改变搜索的时间范围，有利于获取最多的数据</span><br><span class="line">    def getTimescope(self, perTimescope, hours):</span><br><span class="line">        if not (perTimescope==&#x27;-&#x27;):</span><br><span class="line">            times_list = perTimescope.split(&#x27;:&#x27;)</span><br><span class="line">            start_datetime = datetime.datetime.fromtimestamp(time.mktime(time.strptime(times_list[-1],&quot;%Y-%m-%d-%H&quot;)))</span><br><span class="line">            start_new_datetime = start_datetime + datetime.timedelta(seconds = 3600)</span><br><span class="line">            end_new_datetime = start_new_datetime + datetime.timedelta(seconds = 3600*(hours-1))</span><br><span class="line">            start_str = start_new_datetime.strftime(&quot;%Y-%m-%d-%H&quot;)</span><br><span class="line">            end_str = end_new_datetime.strftime(&quot;%Y-%m-%d-%H&quot;)</span><br><span class="line">            return start_str + &quot;:&quot; + end_str</span><br><span class="line">        else:</span><br><span class="line">            return &#x27;-&#x27;</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    logger = logging.getLogger(&#x27;main&#x27;)</span><br><span class="line">    logFile = &#x27;./collect.log&#x27;</span><br><span class="line">    logger.setLevel(logging.DEBUG)</span><br><span class="line">    filehandler = logging.FileHandler(logFile)</span><br><span class="line">    formatter = logging.Formatter(&#x27;%(asctime)s - %(name)s - %(levelname)s: %(message)s&#x27;)</span><br><span class="line">    filehandler.setFormatter(formatter)</span><br><span class="line">    logger.addHandler(filehandler)</span><br><span class="line"></span><br><span class="line">    while True:</span><br><span class="line">        ## 接受键盘输入</span><br><span class="line">        keyword = raw_input(&#x27;Enter the keyword(type \&#x27;quit\&#x27; to exit ):&#x27;)</span><br><span class="line">        if keyword == &#x27;quit&#x27;:</span><br><span class="line">            sys.exit()</span><br><span class="line">        startTime = raw_input(&#x27;Enter the start time(Format:YYYY-mm-dd-HH):&#x27;)</span><br><span class="line">        # region = raw_input(&#x27;Enter the region([BJ]11:1000,[SH]31:1000,[GZ]44:1,[CD]51:1):&#x27;)</span><br><span class="line">        savedir = raw_input(&#x27;Enter the save directory(Like C://data//):&#x27;)</span><br><span class="line">        interval = raw_input(&#x27;Enter the time interval( &gt;30 and deafult:50):&#x27;)</span><br><span class="line"></span><br><span class="line">        ##实例化收集类，收集指定关键字和起始时间的微博</span><br><span class="line">        cd = CollectData(keyword, startTime, savedir, interval)</span><br><span class="line">        while cd.flag:</span><br><span class="line">            print cd.timescope</span><br><span class="line">            logger.info(cd.timescope)</span><br><span class="line">            url = cd.getURL()</span><br><span class="line">            cd.download(url)</span><br><span class="line">            cd.timescope = cd.getTimescope(cd.timescope,1)  #改变搜索的时间，到下一个小时</span><br><span class="line">        else:</span><br><span class="line">            cd = None</span><br><span class="line">            print &#x27;-----------------------------------------------------&#x27;</span><br><span class="line">            print &#x27;-----------------------------------------------------&#x27;</span><br><span class="line">    else:</span><br><span class="line">        logger.removeHandler(filehandler)</span><br><span class="line">        logger = None</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-02-21-four-smart-ptr/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/17-02-21-four-smart-ptr/" class="post-title-link" itemprop="url">four smart ptr</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-02-21 01:01:01" itemprop="dateCreated datePublished" datetime="2017-02-21T01:01:01+08:00">2017-02-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-10-25 14:23:06" itemprop="dateModified" datetime="2022-10-25T14:23:06+08:00">2022-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/backend/" itemprop="url" rel="index"><span itemprop="name">backend</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/backend/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-02-21-four-smart-ptr/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-02-21-four-smart-ptr/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>2.7k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>2 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="四种指针"><a href="#四种指针" class="headerlink" title="四种指针"></a>四种指针</h1><p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/TenosDoIt/p/3456704.html">参考文</a></p>
<hr>
<h2 id="个人整理"><a href="#个人整理" class="headerlink" title="个人整理"></a>个人整理</h2><p>四个智能指针: <code>auto_ptr</code>, <code>shared_ptr</code>, <code>weak_ptr</code>, <code>unique_ptr</code> 其中后三个是c++11支持，并且第一个已经被c++11弃用。</p>
<h3 id="用于测试的结构体"><a href="#用于测试的结构体" class="headerlink" title="用于测试的结构体"></a>用于测试的结构体</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">    Test(<span class="built_in">string</span> s)</span><br><span class="line">    &#123;</span><br><span class="line">        str = s;</span><br><span class="line">       <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Test creat\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~Test()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Test delete:&quot;</span>&lt;&lt;str&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">string</span>&amp; <span class="title function_">getStr</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">void</span> <span class="title function_">setStr</span><span class="params">(<span class="built_in">string</span> s)</span></span><br><span class="line">    &#123;</span><br><span class="line">        str = s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">void</span> <span class="title function_">print</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;str&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    <span class="built_in">string</span> str;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="auto-ptr"><a href="#auto-ptr" class="headerlink" title="auto_ptr"></a><a target="_blank" rel="noopener" href="http://www.cplusplus.com/reference/memory/auto_ptr/">auto_ptr</a></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">auto_ptr</span>&lt;Test&gt; <span class="title function_">ptest</span><span class="params">(new Test(<span class="string">&quot;123&quot;</span>))</span>;</span><br><span class="line">    ptest-&gt;setStr(<span class="string">&quot;hello 0&quot;</span>);</span><br><span class="line">    ptest-&gt;print();</span><br><span class="line">    ptest.get()-&gt;print();</span><br><span class="line">    ptest-&gt;getStr() += <span class="string">&quot;world !&quot;</span>;</span><br><span class="line">    (*ptest).print();</span><br><span class="line">    ptest.reset(new Test(<span class="string">&quot;567&quot;</span>));</span><br><span class="line">    ptest-&gt;print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">auto_ptr</span>&lt;Test&gt; <span class="title function_">ptest</span><span class="params">(new Test(<span class="string">&quot;789&quot;</span>))</span>;</span><br><span class="line">    <span class="built_in">auto_ptr</span>&lt;Test&gt; <span class="title function_">ptest2</span><span class="params">(new Test(<span class="string">&quot;JQK&quot;</span>))</span>;</span><br><span class="line">    ptest2 = ptest;</span><br><span class="line">    ptest2-&gt;print();</span><br><span class="line">    <span class="keyword">if</span>(ptest.get() == <span class="literal">NULL</span>)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;ptest = NULL\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Test creat</span><br><span class="line">hello 0</span><br><span class="line">hello 0</span><br><span class="line">hello 0world !</span><br><span class="line">Test creat</span><br><span class="line">Test delete:hello 0world !</span><br><span class="line">567</span><br><span class="line">Test creat</span><br><span class="line">Test creat</span><br><span class="line">Test delete:JQK</span><br><span class="line">789</span><br><span class="line">Test delete:789</span><br><span class="line">Test delete:567</span><br></pre></td></tr></table></figure>

<h2 id="unique-ptr"><a href="#unique-ptr" class="headerlink" title="unique_ptr"></a><a target="_blank" rel="noopener" href="http://www.cplusplus.com/reference/memory/unique_ptr/">unique_ptr</a></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unique_ptr</span>&lt;Test&gt; <span class="title function_">fun</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">unique_ptr</span>&lt;Test&gt;(new Test(<span class="string">&quot;789&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">unique_ptr</span>&lt;Test&gt; <span class="title function_">ptest</span><span class="params">(new Test(<span class="string">&quot;123&quot;</span>))</span>;</span><br><span class="line">    <span class="built_in">unique_ptr</span>&lt;Test&gt; <span class="title function_">ptest2</span><span class="params">(new Test(<span class="string">&quot;456&quot;</span>))</span>;</span><br><span class="line">    ptest-&gt;print();</span><br><span class="line">    ptest2 = <span class="built_in">std</span>::move(ptest);<span class="comment">//不能直接ptest2 = ptest</span></span><br><span class="line">    <span class="keyword">if</span>(ptest == <span class="literal">NULL</span>)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;ptest = NULL\n&quot;</span>;</span><br><span class="line">    Test* p = ptest2.release();</span><br><span class="line">    p-&gt;print();</span><br><span class="line">    ptest.reset(p);</span><br><span class="line">    ptest-&gt;print();</span><br><span class="line">    ptest2 = fun(); <span class="comment">//这里可以用=，因为使用了移动构造函数</span></span><br><span class="line">    ptest2-&gt;print();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Test creat</span><br><span class="line">Test creat</span><br><span class="line">123</span><br><span class="line">Test delete:456</span><br><span class="line">ptest = NULL</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line">Test creat</span><br><span class="line">789</span><br><span class="line">Test delete:789</span><br><span class="line">Test delete:123</span><br></pre></td></tr></table></figure>

<h2 id="share-ptr"><a href="#share-ptr" class="headerlink" title="share_ptr"></a><a target="_blank" rel="noopener" href="http://www.cplusplus.com/reference/memory/shared_ptr/">share_ptr</a></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">shared_ptr</span>&lt;Test&gt; <span class="title function_">ptest</span><span class="params">(new Test(<span class="string">&quot;123&quot;</span>))</span>;</span><br><span class="line">    <span class="built_in">shared_ptr</span>&lt;Test&gt; <span class="title function_">ptest2</span><span class="params">(new Test(<span class="string">&quot;456&quot;</span>))</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ptest2-&gt;getStr()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ptest2.use_count()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    ptest = ptest2;<span class="comment">//&quot;456&quot;引用次数加1，“123”销毁</span></span><br><span class="line">    ptest-&gt;print();</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ptest2.use_count()&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//2</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ptest.use_count()&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//2</span></span><br><span class="line">    ptest.reset();</span><br><span class="line">    ptest2.reset();<span class="comment">//此时“456”销毁</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;done !\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Test creat</span><br><span class="line">Test creat</span><br><span class="line">456</span><br><span class="line">1</span><br><span class="line">Test delete:123</span><br><span class="line">456</span><br><span class="line">2</span><br><span class="line">2</span><br><span class="line">Test delete:456</span><br></pre></td></tr></table></figure>

<hr>
<p>总结</p>
<p><code>auto_ptr</code> </p>
<ul>
<li>手动释放<strong>资源</strong> <code>.reset()</code></li>
<li>将指针置空,返回<strong>资源</strong>控制权 <code>.release()</code></li>
<li>用 <code>.get()==NULL</code> 判断是否为空</li>
</ul>
<p><code>unique_ptr</code></p>
<ul>
<li>和<code>auto_ptr</code>相似</li>
<li>不能使用两个智能指针赋值操作，应该使用<code>std::move</code></li>
<li>可以直接用if(ptest &#x3D;&#x3D; NULL)来判断是否空指针</li>
</ul>
<p><code>share_ptr</code></p>
<ul>
<li>使用计数机制来表明资源被几个指针共享,<code>.use_count()</code>来查看资源的所有者个数</li>
<li>没有release</li>
</ul>
<p><code>weak_ptr</code></p>
<ul>
<li>weak_ptr是用来解决shared_ptr相互引用时的死锁问题,如果说两个shared_ptr相互引用,那么这两个指针的引用计数永远不可能下降为0,资源永远不会释放。它是对对象的一种弱引用，不会增加对象的引用计数，和shared_ptr之间可以相互转化，shared_ptr可以直接赋值给它，它可以通过调用lock函数来获得shared_ptr。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-02-15-Why-Linux-Is-More-Secure-Than-Windows/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/17-02-15-Why-Linux-Is-More-Secure-Than-Windows/" class="post-title-link" itemprop="url">linux 为什么比 windows 更安全</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-02-15 01:01:01" itemprop="dateCreated datePublished" datetime="2017-02-15T01:01:01+08:00">2017-02-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-10-25 14:23:06" itemprop="dateModified" datetime="2022-10-25T14:23:06+08:00">2022-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-02-15-Why-Linux-Is-More-Secure-Than-Windows/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-02-15-Why-Linux-Is-More-Secure-Than-Windows/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>1.6k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>1 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>很久以前就有听说这个命题</p>
<p>但我始终也不能说出个所以然,最多的个人体验也就是root权限</p>
<p>知乎这种逐渐变为垃圾问答区的地方，显然是大量的0说服力的答案,慢慢变成百度知道了:-)</p>
<p>搜了一篇 <del>当做英文休闲阅读了</del></p>
<p><a target="_blank" rel="noopener" href="http://www.pcworld.com/article/202452/why_linux_is_more_secure_than_windows.html">original link</a></p>
<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><ul>
<li>windows的想法是好的,闭源比开源更难攻击</li>
<li>事实上并没有得到预期的更好,由永无休止的补丁可证(?啊,Linux 没补丁的咯?)</li>
</ul>
<p>这里的意思并没有反驳闭源的安全性比开源更好 同样的linux(闭) &gt; <code>linux(开)</code> &gt; <code>windows(闭)</code> &gt; 同样的windows(开)</p>
<p>安全性:同样<code>A</code>,<code>A(闭源) &gt; A(开源)</code>，但开源带来的可以让<code>A</code>变成<code>A+</code> 那么安全性上,<code>A+(开)</code> 是可能 &gt; <code>A(闭)</code>的</p>
<h2 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h2><p>windows</p>
<ul>
<li>日常运行 对于文件:高权限</li>
<li>能够操作任何电脑上任何文件</li>
</ul>
<p>Linux</p>
<ul>
<li>日常运行 对于文件:低权限</li>
<li>只能操作当前用户有权限的文件</li>
</ul>
<p>也就是说用户的文件等在Linux 还是有同样的风险? </p>
<p>这里原文没有说细,[对于不同用户,windows是可以操作他人的文件,而linux可一通过权限控制在一个用户内+共享?]</p>
<p>小总结:Linux 也不是绝对可靠</p>
<ul>
<li>更难发生系统级别的破坏</li>
<li>更难发生用户层面广泛的破坏</li>
</ul>
<h2 id="社社社…社会工程学"><a href="#社社社…社会工程学" class="headerlink" title="社社社…社会工程学"></a>社社社…社会工程学</h2><p>好吧 说得有那么一点道理 (这里也有<code>执行时需要权限</code>属于上一部分的东西)</p>
<p>病毒呢 传播时 通常诱导用户添加&#x2F;点击&#x2F;安装</p>
<p>说是windos呢 例子:给个带exe附件的邮件并诱导你下载点击，然后 就完事了 (简言之 点3下就可以入侵)</p>
<p>但是linux呢 你下下来给它执行权限<code>chmod</code>么才行(简言之 要执行过程复杂繁琐+运行有系统级别破坏时需要系统权限)</p>
<p>个人看法</p>
<ul>
<li>不认可</li>
<li>如果把两边用户交换一下,linux 也能提供<code>点3下</code>就执行程序的,并且目前的易用操作系统的流程已经很简洁了</li>
<li>感觉这一点 大自和<code>用户习惯</code>,<code>使用方式</code>,<code>社区安全</code>,<code>用的人少</code>相联系</li>
</ul>
<h2 id="单种效应"><a href="#单种效应" class="headerlink" title="单种效应"></a>单种效应</h2><p>…….这个名词 瞎翻译的,说的是 windows就一个,但linux 有各种分支,不同的邮件客户端,不同的架构,然后病毒的兼容性很难实现…..</p>
<p>仔细想一想 还是有那么些道理的 但我只想到作为server端，比如架构</p>
<p>外网—我们的linux1—我们的linux2—我们的linux3—我们的linux4(服务)—我们的linux5(数据)</p>
<p><code>那么要从外网进攻, 至少需要4个不同兼容性 而window就just do it again.... </code><br><code>讲道理的话....真有做这么多层这样防护的吗,目前只了解到 有 外网-server1-服务-数据这样的</code></p>
<p>以及,本身作为非系统的server的话,在不同的linux之间的移植能力，也会比 攻击程序 的移植能力强。</p>
<p>感觉有那么一些道理,对我还不是太有说服力，感觉比第二点说服力强很多</p>
<h2 id="用户多"><a href="#用户多" class="headerlink" title="用户多"></a>用户多</h2><p>个人看法</p>
<ul>
<li>不认可 </li>
<li>这只能说可能是 <code>当下linux</code>比<code>当下window</code>安全的一个原因</li>
<li>并不想讨论当下 我更喜欢数学上的 如果有相同的用户量呢 如果linux 比windows用户更多呢,如果真的是因为用户少而更安全,那我认为是无数学上的优势的</li>
<li>其它看法linux desktop 少，但linux server多啊 虽然数据并不多到那里去<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Usage_share_of_operating_systems">数据</a></li>
</ul>
<h2 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h2><p>就是上面我自己碎碎念的</p>
<p>大量的人能看到代码的bug,并及时去维护。</p>
<p>有利有弊吧</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>啊,唯一让我满意一点的就是<code>权限</code>的说明了…</p>
<p>这篇文章也没有深入到系统里,感觉还是很表面的东西,不过windows也不开源,不知道能不能找到逆向工程出来的系统级别的,和linux的系统级别的深入比较的文章。。。恩 我不打算自己研究 还是看文章好了，期望能找到</p>
<p>之后在一个长篇的知乎回答上得到了一点对于<code>权限</code>的补充说明”其繁殖速度必须超过其死亡(被消灭)的速度”</p>
<p>所以,我现在能想到一个没有杀软的linux的进攻(相对于windows点3下)即是 下载并运行(社会工程学<code>:-)</code>)-&gt;写入用户的需要管理员权限的可执行文件&#x2F;脚本文件?-&gt;用户执行了它-&gt;达到和windows点3下同样能达到的效果</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/17-01-21-node-mongo-angularjs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/17-01-21-node-mongo-angularjs/" class="post-title-link" itemprop="url">nodejs mongodb angularjs 个人笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2017-01-21 01:01:01" itemprop="dateCreated datePublished" datetime="2017-01-21T01:01:01+08:00">2017-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-10-25 14:23:06" itemprop="dateModified" datetime="2022-10-25T14:23:06+08:00">2022-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/17-01-21-node-mongo-angularjs/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="17-01-21-node-mongo-angularjs/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>5.3k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>5 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="mongodb-学习记录"><a href="#mongodb-学习记录" class="headerlink" title="mongodb 学习记录"></a>mongodb 学习记录</h1><h2 id="本文依赖"><a href="#本文依赖" class="headerlink" title="本文依赖"></a>本文依赖</h2><p><code>nodejs</code></p>
<p><code>mongodb</code></p>
<p><code>angularjs</code></p>
<h2 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h2><p><a href="P7">工作总图</a></p>
<h2 id="Detail"><a href="#Detail" class="headerlink" title="Detail"></a>Detail</h2><h3 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h3><p>事件驱动可扩展性，端到端</p>
<blockquote>
<p>npm install</p>
</blockquote>
<blockquote>
<p>npm search</p>
</blockquote>
<blockquote>
<p>npm install -g</p>
</blockquote>
<blockquote>
<p>npm install -g npm-check</p>
</blockquote>
<blockquote>
<p>npm-check -u -g</p>
</blockquote>
<p><a href="P43-45">模块封装</a></p>
<p><a href="P51-P55">事件模型 阻塞I&#x2F;O</a></p>
<h4 id="发送接受P59"><a href="#发送接受P59" class="headerlink" title="发送接受P59"></a>发送接受P59</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">&quot;events&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> emitter=events.<span class="title class_">EventEmitter</span>();</span><br><span class="line">emitter.<span class="title function_">emit</span>(eventName,data);</span><br><span class="line">.<span class="title function_">addListener</span>(eventName,<span class="title function_">callback</span>(data))</span><br><span class="line">.<span class="title function_">on</span>(eventName,<span class="title function_">callback</span>(data))</span><br><span class="line">.<span class="title function_">once</span>(eventName,<span class="title function_">callback</span>(data))</span><br></pre></td></tr></table></figure>
<p>json&#x2F;buffer&#x2F;stream(网页流数据&#x2F;压缩解压) -P90</p>
<p>文件系统 -P107</p>
<p>require(“fs”)</p>
<p>HTTP:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">require(&quot;http&quot;)</span><br><span class="line">require(&quot;url&quot;)</span><br><span class="line">require(&quot;querystring&quot;)</span><br></pre></td></tr></table></figure>

<p>HTTPS:P127-</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">openssl genrsa -out server.pem 2048</span></span><br><span class="line"><span class="comment">openssl req -new -key server.pem -out server.csr</span></span><br><span class="line"><span class="comment">openssl x509 -req -days 365 -in server.csr -signkey server.pem -out server.crt</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> https = <span class="built_in">require</span>(<span class="string">&quot;https&quot;</span>);                                                                                                                          </span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="attr">key</span>: fs.<span class="title function_">readFileSync</span>(<span class="string">&quot;./server.pem&quot;</span>),</span><br><span class="line">  <span class="attr">cert</span>: fs.<span class="title function_">readFileSync</span>(<span class="string">&quot;./server.crt&quot;</span>)</span><br><span class="line">&#125;;</span><br><span class="line">https.<span class="title function_">createServer</span>(options,<span class="keyword">function</span>(<span class="params">req,res</span>)&#123;</span><br><span class="line">  res.<span class="title function_">writeHead</span>(<span class="number">200</span>);</span><br><span class="line">  res.<span class="title function_">end</span>(<span class="string">&quot;Hello Secure World\n&quot;</span>);</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">8128</span>);</span><br></pre></td></tr></table></figure>

<p>socket P132-</p>
<p>多处理器</p>
<p><code>process</code></p>
<p><code>child_process</code></p>
<p><code>cluster,worker</code>实现多个”线程”监听一个port并可自动处理<code>cluster_server.js /cluster_worker.js/cluster_client.js</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">process.stdin.on(&quot;data&quot;,function(data)&#123;;&#125;);</span><br><span class="line">process.on(&quot;SIGINT&quot;,function()&#123;;&#125;);</span><br><span class="line">process.on(&quot;SIGBREAK&quot;,function()&#123;;&#125;);</span><br></pre></td></tr></table></figure>
<p><code>https://raw.githubusercontent.com/bwdbooks/nodejs-mongodb-angularjs-web-development/master/ch09/process_info.js</code></p>
<p><code>exec() / execFile()/spawn()</code></p>
<p>其它模块介绍,runnoob上也有<a target="_blank" rel="noopener" href="https://nodejs.org/api/">https://nodejs.org/api/</a></p>
<p><code>os</code>见<code>os_info.js</code></p>
<p><code>util</code>有<code>format,log,debug,checktype,转对象为字串</code>原型继承见<code>util_inherit.js</code></p>
<p><code>dns</code>有lookup不同level的resolve</p>
<h4 id="Express-server"><a href="#Express-server" class="headerlink" title="Express(server)"></a>Express(server)</h4><p>npm install express</p>
<p>route,Error handle,易于集成,cookie,会话缓存</p>
<p><code>_http_https.js</code> <code>require(&#39;url&#39;)</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(&#x27;/user/:userid&#x27;,function(req.res)&#123;</span><br><span class="line">	res.send(&quot;Get User: &quot;+ req.param(&quot;userid&quot;));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>express_routes.js</code> 路由demo&#x2F;req.params&#x2F;正则&#x2F;Request对象&#x2F;Response对象</p>
<p><code>express_json.js/express_send_file.js/res.download([path])/res.redirect()</code></p>
<p>模板引擎<code>ejs+jade</code>,<code>express_templates.js and other files</code></p>
<p>中间件大法</p>
<p><code>app.use(path,bodyParser()).use(path,bodyParser()).use(path,bodyParser());</code></p>
<p><code>app.get(path,bodyParser(),function(req,res)&#123;&#125;);</code></p>
<ul>
<li><code>static 内置 流式处理静态文件访问</code></li>
<li><code>express-logger </code></li>
<li><code>basic-auth-connect基本身份验证</code></li>
<li><code>cookie-parser读取设置cookie</code></li>
<li><code>cookie-session/会话支持</code></li>
<li><code>express-session,相当强大会话实现</code></li>
<li><code>body-parser req正文中的JSON解析为req.body</code></li>
<li><code>compression 对客户端大响应提供Gzip支持</code></li>
<li><code>csurf 跨站点请求 伪造保护</code></li>
</ul>
<p>res.query. 用于查询把url转化为json</p>
<p>静态文件服务</p>
<p><code>app.use(pathurl,express.static(path_file_or_dir_local)[,config]);//maxAge hidden redirect index</code></p>
<p><code>auth_session.js</code> 会话+验证</p>
<h3 id="mongodb-NoSQL"><a href="#mongodb-NoSQL" class="headerlink" title="mongodb(NoSQL)"></a>mongodb(NoSQL)</h3><p>针对文档，高性能，高可用性，高可扩展性</p>
<p><a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/installation/">安装</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/reference/bson-types/">mongodb类型</a></p>
<p><a target="_blank" rel="noopener" href="http://www.runoob.com/mongodb/mongodb-tutorial.html">基础教程</a></p>
<p>封顶集合(capped collection) 超过大小以旧的替代新的</p>
<p>索引？分片？复制？</p>
<p>生命周期？应用程序代码控制或者TTL</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">help &lt;option&gt;</span><br><span class="line">use &lt;database&gt;</span><br><span class="line">show &lt;option&gt; (such as dbs,collections,profile,log)</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<p>用户管理身份验证-P196</p>
<p>数据库管理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">db.copyDatabase(origin,destination)</span><br><span class="line">db.dropDatabase()</span><br><span class="line">db.createCollection(&quot;collectionname&quot;)</span><br><span class="line">coll =db.getCollection(&quot;collectionname&quot;)</span><br><span class="line">coll.drop()</span><br><span class="line">coll.find(&#123;&#x27;key&#x27;:&#x27;value&#x27;&#125;)</span><br><span class="line">coll.insert(&#123;&#x27;key&#x27;:&#x27;value&#x27;&#125;)</span><br><span class="line">coll.remove(&#123;&#x27;key&#x27;:&#x27;value&#x27;&#125;)</span><br><span class="line">coll.update(where,set,other option) //inc set push sort等update运算符</span><br></pre></td></tr></table></figure>

<p>mongo+nodejs</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install mongo</span><br><span class="line">npm install mongoose</span><br></pre></td></tr></table></figure>

<p>见 <code>db_connect_object.js</code></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/zhongweiv/p/node_mongodb.html#node_mongodb">demo</a></p>
<p><code>db,Admin,Collection,Cursor</code>对象</p>
<p><code>atomically:findAndModify()/findAndRemove()</code></p>
<p><code>upsert()/save()/remove()</code></p>
<p>mongo可以直接执行js :<code>generate_data.js</code></p>
<p>count &#x2F; limit</p>
<p><code>aggregate([&#123;$match:&#123;tasdf:X&quot;&#125;&#125;,&#123;$group:&#123;asdf:&quot;agqwe&quot;,sdfo:&#123;$sum:&quot;agqwe&quot;&#125;&#125;&#125;])</code> &#x2F;&#x2F;mapreduce? 聚合</p>
<p>mongoose结构化模式与验证 </p>
<p><code>mongoose/schema/query/Document</code></p>
<p><code>mongoose_find.js/_create.js/_save/_update_one</code></p>
<p><code>***.validate(function(value)&#123;;&#125;)</code></p>
<p>中间件</p>
<p><code>pre/post</code></p>
<p>mongoDB高级</p>
<p>ensureIndex &#x2F;MongoClient</p>
<p>分片集群等等 GridFS&#x2F;GridStore</p>
<p>修复 备份</p>
<h3 id="angularjs"><a href="#angularjs" class="headerlink" title="angularjs"></a>angularjs</h3><p> 数据绑定，可扩展性，整洁，可重用，整洁，支持，兼容性</p>
<p>MVC</p>
<p><code>node_server.js</code>simple demo</p>
<p>专有对象提供器<code>animation,controller,filter,directive</code></p>
<p>服务提供器<code>value,constant,factory,service,provider</code></p>
<p>注入<code>21 injector.js</code></p>
<p>作用域+<code>广播emit/broadcast/on</code>-&gt;<code>event</code>的属性<code>targetScope/currentScope/name/stopPropagation/preventDefault/defaultPrevented</code></p>
<p><code>ng-model,data-ng-model,x-ng:model,ng_model</code> 都被规范化为<code>ngModel</code></p>
<p>内置过滤器<code>currency,filter:exp:compare,json,limitTo:limit,lowercase,uppercase,number[:fraction],orderBy:exp:reverse,date[:format]</code></p>
<p>DIY过滤器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">angular.module(***).filter(&#x27;fff&#x27;,function()&#123;return function(leftinput,argument)&#123;return result;&#125;&#125;)</span><br><span class="line">controller(&#x27;aController&#x27;,[&#x27;$scope&#x27;,&#x27;fffFilter&#x27;,function($scope,fffFilter)&#123;</span><br><span class="line">	;//直接在html上用 或者 用作函数也行</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>

<p>支持AngularJS模板功能的指令&#x2F;表单 P411-419</p>
<p>24<code>directive_custom.js/html</code></p>
<ul>
<li><code>template</code>允许你定义插入指令的元素的AngularJS模板</li>
<li><code>templateUrl</code>同上但是是url</li>
<li><code>restrict</code>允许你指定该指令 <code>A</code>属性名<code>E</code>元素名<code>C</code>类名</li>
<li><code>replace</code>取代元素</li>
<li><code>transclude</code>内部是否可以访问内部作用域以外的作用域</li>
<li><code>scope</code>指定内部作用域，<code>&#123;&#125;</code>隔离 <code>@funcname</code>&#x2F;<code>@</code> 绑定到DOM <code>=</code> 双向绑定 <code>&amp;</code> 局部绑定到指定scope</li>
<li><code>link</code>指定 作用域 DOM元素 和其它能操作DOM属性的链接函数</li>
<li><code>controller</code></li>
<li><code>require</code>所需要的其它指令</li>
</ul>
<p>内置常用服务</p>
<p><code>animate(css),cacheFactory,compile,cookies,document,http,interval,locale,location,resource,rootElement,rootScope,route,sce,templateCache,timeout/interval,window.alert,</code></p>
<p><code>$http</code> 请求<code>delete/get/head/jsonp/post/put</code></p>
<p>26章完整登陆注册验证实例</p>
<p>社交媒体账户作为身份验证来源 <code>npm install passport/passport-google/passport-facebook/passport-twitter</code> 已验证后的序列化和反序列化 <code>google_auth.js</code></p>
<p>27定义评论回复照片和页面模型 &#x2F;mongoose model schema的应用 更复杂的控制实现 和 angularJS的service应用&#x2F;</p>
<p>28购物车 mongoose model schema的应用</p>
<p>建议的代码文件结构方式,代码编码顺序[bg(node)&#x2F;view(html[css])&#x2F;fg(angularJS)]</p>
<p>29 选项卡 天气服务 可拖动组件 交互表格数据</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/16-06-02-Hello-World/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/16-06-02-Hello-World/" class="post-title-link" itemprop="url">Hello world</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2016-06-22 01:01:01" itemprop="dateCreated datePublished" datetime="2016-06-22T01:01:01+08:00">2016-06-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-10-25 14:23:06" itemprop="dateModified" datetime="2022-10-25T14:23:06+08:00">2022-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/16-06-02-Hello-World/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="16-06-02-Hello-World/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>3.5k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>3 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://github.com/CroMarmot/Blog/blob/gh-pages/_posts/2016-06-02-Hello-World.md">点击这里查看在github上的效果</a></p>
<p><a href="http://cromarmot.github.io/Blog/%E6%97%A5%E5%BF%97/Hello-World#code">点击这里查看在jekyll上的效果</a></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">Left-Aligned</th>
<th align="center">Center Aligned</th>
<th align="right">Right Aligned</th>
</tr>
</thead>
<tbody><tr>
<td align="left">lll</td>
<td align="center">mmm</td>
<td align="right">rrr</td>
</tr>
<tr>
<td align="left">qwertyuiop</td>
<td align="center">asdfghjkl</td>
<td align="right">zxcvbnm</td>
</tr>
</tbody></table>
<ul>
<li><input disabled="" type="checkbox"> lab<ul>
<li><input checked="" disabled="" type="checkbox"> lab1</li>
<li><input checked="" disabled="" type="checkbox"> lab2</li>
<li><input checked="" disabled="" type="checkbox"> lab3</li>
<li><input checked="" disabled="" type="checkbox"> lab4</li>
<li><input disabled="" type="checkbox"> lab5</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> a separate task</li>
</ul>
<p><img data-src="http://img4.duitang.com/uploads/item/201312/13/20131213221310_Yektr.thumb.700_0.jpeg" alt="南叔"></p>
<ul>
<li>Writer: <a href="http://cromarmot.github.io/">CroMarmot</a></li>
<li>Reference: <a target="_blank" rel="noopener" href="https://help.github.com/articles/writing-on-github/">writing-on-github</a></li>
</ul>
<h1 id="jekyll-高亮代码"><a href="#jekyll-高亮代码" class="headerlink" title="jekyll 高亮代码"></a>jekyll 高亮代码</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//弃用?</span></span><br><span class="line">ruby</span><br><span class="line"></span><br><span class="line">&#123;% highlight ruby %&#125;</span><br><span class="line">def show</span><br><span class="line">  @widget = <span class="built_in">Widget</span>(params[:id])</span><br><span class="line">  respond_to <span class="keyword">do</span> |format|</span><br><span class="line">    format.html <span class="meta"># show.html.erb</span></span><br><span class="line">    format.json &#123; render json: @widget &#125;</span><br><span class="line">  end</span><br><span class="line">end</span><br><span class="line">&#123;% endhighlight %&#125;</span><br><span class="line"></span><br><span class="line">c++</span><br><span class="line"></span><br><span class="line">&#123;% highlight c++ linenos %&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  cout&lt;&lt;<span class="string">&quot;Hello World!&quot;</span>&lt;&lt;endl;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#123;% endhighlight %&#125;</span><br><span class="line"></span><br><span class="line">python</span><br><span class="line"></span><br><span class="line">&#123;% highlight python linenos %&#125;</span><br><span class="line">#!/usr/bin/python3</span><br><span class="line"># 计算面积函数</span><br><span class="line"><span class="function">def <span class="title">area</span><span class="params">(width, height)</span>:</span></span><br><span class="line"><span class="function">    return width * height</span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function">def print_welcome(name):</span></span><br><span class="line"><span class="function">    print(<span class="string">&quot;Welcome&quot;</span>, name)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">print_welcome(<span class="string">&quot;Runoob&quot;</span>)</span></span><br><span class="line"><span class="function">w =</span> <span class="number">4</span></span><br><span class="line">h = <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;width =&quot;</span>, w, <span class="string">&quot; height =&quot;</span>, h, <span class="string">&quot; area =&quot;</span>, <span class="built_in">area</span>(w, h))</span><br><span class="line"></span><br><span class="line">&#123;% endhighlight %&#125;</span><br><span class="line"></span><br><span class="line">php</span><br><span class="line"></span><br><span class="line">&#123;% highlight php linenos %&#125;</span><br><span class="line">&lt;?</span><br><span class="line"><span class="keyword">for</span> ($i=<span class="number">1</span>; $i&lt;=<span class="number">5</span>; $i++)</span><br><span class="line">&#123;</span><br><span class="line">  echo <span class="string">&quot;The number is &quot;</span> . $i . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">&#123;% endhighlight %&#125;</span><br></pre></td></tr></table></figure>

<h1 id="TEST"><a href="#TEST" class="headerlink" title="TEST"></a>TEST</h1><p>This README.md is used to testing all kinds of syntax of GitHub Flavored Markdown.</p>
<hr>
<h3 id="Author-Jelly"><a href="#Author-Jelly" class="headerlink" title="Author:Jelly"></a>Author:Jelly</h3><h3 id="E-mail-x77-x6c-x79-114-105-x63-x73-x40-49-x36-x33-46-x63-111-109"><a href="#E-mail-x77-x6c-x79-114-105-x63-x73-x40-49-x36-x33-46-x63-111-109" class="headerlink" title="E-mail:&#x77;&#x6c;&#x79;&#114;&#105;&#x63;&#x73;&#x40;&#49;&#x36;&#x33;&#46;&#x63;&#111;&#109;"></a>E-mail:<a href="mailto:&#x77;&#x6c;&#x79;&#114;&#105;&#x63;&#x73;&#x40;&#49;&#x36;&#x33;&#46;&#x63;&#111;&#109;">&#x77;&#x6c;&#x79;&#114;&#105;&#x63;&#x73;&#x40;&#49;&#x36;&#x33;&#46;&#x63;&#111;&#109;</a></h3><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a><a name="index"/>目录</h2><ul>
<li><a href="#line">横线</a></li>
<li><a href="#title">标题</a></li>
<li><a href="#text">显示文本</a><ul>
<li>普通文本</li>
<li>单行文本</li>
<li>多行文本</li>
<li>部分文字高亮</li>
</ul>
</li>
<li><a href="#link">超链接</a> <ul>
<li>文字超链接<ul>
<li>链接外部URL</li>
<li>链接本仓库里的URL</li>
<li>锚点</li>
</ul>
</li>
<li><a href="#piclink">图片超链接</a></li>
</ul>
</li>
<li><a href="#pic">显示图片</a><ul>
<li>来源于网络的图片</li>
<li>GitHub仓库中的图片</li>
</ul>
</li>
<li><a href="#dot">列表</a></li>
<li><a href="#symbol">符号包围</a></li>
<li><a href="#code">代码高亮</a></li>
</ul>
<a name="line"/>
## ***、---、___显示虚横线
***
---
___
 
 
 
<a name="title"/>
# 一级标题
## 二级标题
### 三级标题
#### 四级标题
##### 五级标题
###### 六级标题

<h2 id="显示文本"><a href="#显示文本" class="headerlink" title="显示文本"></a><a name="text"/>显示文本</h2><h3 id="普通文本"><a href="#普通文本" class="headerlink" title="普通文本"></a>普通文本</h3><p>这是一段普通的文本，<br>直接回车不能换行，<br><br>要使用&lt;br&gt;</p>
<p>  或者在回车以后，再加上两个空格。完成这种换行效果。</p>
<h3 id="单行文本"><a href="#单行文本" class="headerlink" title="单行文本"></a>单行文本</h3><pre><code>Hello,大家好，我是果冻虾仁。
</code></pre>
<h3 id="多行文本"><a href="#多行文本" class="headerlink" title="多行文本"></a>多行文本</h3><pre><code>欢迎到访
很高兴见到您
祝您，早上好，中午好，下午好，晚安
</code></pre>
<h3 id="部分文字高亮"><a href="#部分文字高亮" class="headerlink" title="部分文字高亮"></a>部分文字高亮</h3><p>Thank <code>You</code> . Please <code>Call</code> Me <code>Coder</code></p>
<h4 id="高亮功能更适合做一篇文章的tag"><a href="#高亮功能更适合做一篇文章的tag" class="headerlink" title="高亮功能更适合做一篇文章的tag"></a>高亮功能更适合做一篇文章的tag</h4><p>例如:<br><br><code>java</code> <code>网络编程</code> <code>Socket</code> <code>全双工</code></p>
<h2 id="文字链接"><a href="#文字链接" class="headerlink" title="文字链接"></a><a name="link"/>文字链接</h2><h3 id="链接外部URL"><a href="#链接外部URL" class="headerlink" title="链接外部URL"></a>链接外部URL</h3><p><a target="_blank" rel="noopener" href="http://blog.csdn.net/guodongxiaren/article/details/23690801" title="悬停显示">我的博客</a></p>
<h3 id="链接本仓库里的URL"><a href="#链接本仓库里的URL" class="headerlink" title="链接本仓库里的URL"></a>链接本仓库里的URL</h3><p><a href="./Book">Book</a></p>
<h3 id="锚点"><a href="#锚点" class="headerlink" title="锚点"></a>锚点</h3><p><a href="#index">点此回到目录</a></p>
<h2 id="显示图片"><a href="#显示图片" class="headerlink" title="显示图片"></a><a name="pic"/>显示图片</h2><h3 id="来源于网络的图片"><a href="#来源于网络的图片" class="headerlink" title="来源于网络的图片"></a>来源于网络的图片</h3><p><img data-src="http://www.baidu.com/img/bdlogo.gif" alt="baidu" title="百度logo"></p>
<h3 id="GitHub仓库中的图片"><a href="#GitHub仓库中的图片" class="headerlink" title="GitHub仓库中的图片"></a>GitHub仓库中的图片</h3><p><img data-src="https://github.com/guodongxiaren/ImageCache/raw/master/Logo/foryou.gif"></p>
<h3 id="给图片加上超链接"><a href="#给图片加上超链接" class="headerlink" title="给图片加上超链接"></a><a name="piclink">给图片加上超链接</h3><p><a target="_blank" rel="noopener" href="http://blog.csdn.net/guodongxiaren/article/details/23690801">![head]</a></p>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a><a name="dot"/>列表</h2><h3 id="圆点列表"><a href="#圆点列表" class="headerlink" title="圆点列表"></a>圆点列表</h3><ul>
<li>昵称：果冻虾仁</li>
<li>别名：隔壁老王</li>
<li>英文名：Jelly</li>
</ul>
<h3 id="更多圆点"><a href="#更多圆点" class="headerlink" title="更多圆点"></a>更多圆点</h3><ul>
<li>编程语言<ul>
<li>脚本语言<ul>
<li>Python</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="复选框列表"><a href="#复选框列表" class="headerlink" title="复选框列表"></a>复选框列表</h3><ul>
<li><input checked="" disabled="" type="checkbox"> C</li>
<li><input checked="" disabled="" type="checkbox"> C++</li>
<li><input checked="" disabled="" type="checkbox"> Java</li>
<li><input checked="" disabled="" type="checkbox"> Qt</li>
<li><input checked="" disabled="" type="checkbox"> Android</li>
<li><input disabled="" type="checkbox"> C#</li>
<li><input disabled="" type="checkbox"> .NET</li>
</ul>
<h2 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a><a name="symbol"/>缩进</h2><h3 id="用于列表"><a href="#用于列表" class="headerlink" title="用于列表"></a>用于列表</h3><blockquote>
<p>数据结构</p>
<blockquote>
<p>树</p>
<blockquote>
<p>二叉树</p>
<blockquote>
<p>平衡二叉树</p>
<blockquote>
<p>满二叉树</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<h3 id="用于引用："><a href="#用于引用：" class="headerlink" title="用于引用："></a>用于引用：</h3><h4 id="文本摘自《深入理解计算机系统》P27"><a href="#文本摘自《深入理解计算机系统》P27" class="headerlink" title="文本摘自《深入理解计算机系统》P27"></a>文本摘自《深入理解计算机系统》P27</h4><p>　令人吃惊的是，在哪种字节顺序是合适的这个问题上，人们表现得非常情绪化。实际上术语“little endian”（小端）和“big endian”（大端）出自Jonathan Swift的《格利佛游记》一书，其中交战的两个派别无法就应该从哪一端打开一个半熟的鸡蛋达成一致。因此，争论沦为关于社会政治的争论。只要选择了一种规则并且始终如一的坚持，其实对于哪种字节排序的选择都是任意的。</p>
<blockquote>
<p><b>“端”（endian）的起源</b><br><br>以下是Jonathan Swift在1726年关于大小端之争历史的描述：<br><br>“……下面我要告诉你的是，Lilliput和Blefuscu这两大强国在过去36个月里一直在苦战。战争开始是由于以下的原因：我们大家都认为，吃鸡蛋前，原始的方法是打破鸡蛋较大的一端，可是当今的皇帝的祖父小时候吃鸡蛋，一次按古法打鸡蛋时碰巧将一个手指弄破了，因此他的父亲，当时的皇帝，就下了一道敕令，命令全体臣民吃鸡蛋时打破较小的一端，违令者重罚。”</p>
</blockquote>
<h2 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a><a name="code"/>代码高亮</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[]args)</span>&#123;&#125; <span class="comment">//Java</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> <span class="comment">//C</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello GitHub&quot;</span><span class="comment">#Bash</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myH1&quot;</span>).<span class="property">innerHTML</span>=<span class="string">&quot;Welcome to my Homepage&quot;</span>; <span class="comment">//javascipt</span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string &amp;<span class="keyword">operator</span>+(<span class="type">const</span> string&amp; A,<span class="type">const</span> string&amp; B) <span class="comment">//cpp</span></span><br></pre></td></tr></table></figure>

<h2 id="插入表格"><a href="#插入表格" class="headerlink" title="插入表格"></a>插入表格</h2><table>
<thead>
<tr>
<th>First Header</th>
<th>Second Header</th>
</tr>
</thead>
<tbody><tr>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
<tr>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>First Header</th>
<th>Second Header</th>
</tr>
</thead>
<tbody><tr>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
<tr>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>Help</td>
<td>Display the help window.</td>
</tr>
<tr>
<td>Close</td>
<td>Closes a window</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>Help</td>
<td><del>Display the</del> help window.</td>
</tr>
<tr>
<td>Close</td>
<td><em>Closes</em> a window</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">Left-Aligned</th>
<th align="center">Center Aligned</th>
<th align="right">Right Aligned</th>
</tr>
</thead>
<tbody><tr>
<td align="left">col 3 is</td>
<td align="center">some wordy text</td>
<td align="right">$1600</td>
</tr>
<tr>
<td align="left">col 2 is</td>
<td align="center">centered</td>
<td align="right">$12</td>
</tr>
<tr>
<td align="left">zebra stripes</td>
<td align="center">are neat</td>
<td align="right">$1</td>
</tr>
</tbody></table>
<p>公式测试</p>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>

<p>$$<br>\Gamma(z) &#x3D; \int_0^\infty t^{z-1}e^{-t}dt,.<br>$$</p>
<p>$\Gamma(z) &#x3D; \int_0^\infty t^{z-1}e^{-t}dt,.$</p>
<h3 id="UML-diagrams"><a href="#UML-diagrams" class="headerlink" title="UML diagrams"></a>UML diagrams</h3><p>You can also render sequence diagrams like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class="line">Note right of Bob: Bob thinks</span><br><span class="line">Bob--&gt;Alice: I am good thanks!</span><br></pre></td></tr></table></figure>

<p>And flow charts like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: Start</span><br><span class="line">e=&gt;end</span><br><span class="line">op=&gt;operation: My Operation</span><br><span class="line">cond=&gt;condition: Yes or No?</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/15-10-15-ml_ver2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/15-10-15-ml_ver2/" class="post-title-link" itemprop="url">ml_ver2.md</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2015-10-15 00:00:00" itemprop="dateCreated datePublished" datetime="2015-10-15T00:00:00+08:00">2015-10-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-10-25 14:23:06" itemprop="dateModified" datetime="2022-10-25T14:23:06+08:00">2022-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/15-10-15-ml_ver2/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="15-10-15-ml_ver2/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>10k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>9 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>编译原理课程 我的语言的范式</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/Blog/15-10-15-ml_ver2/">
                閱讀全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://cromarmot.github.io/Blog/15-07-24-Rowhammer.js_A_Remote_Software-Induced_Fault_Attack_in_JavaScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/24691835?v=4">
      <meta itemprop="name" content="Cro-Marmot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Cro-Marmot's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Blog/15-07-24-Rowhammer.js_A_Remote_Software-Induced_Fault_Attack_in_JavaScript/" class="post-title-link" itemprop="url">Rowhammer.js</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2015-07-24 01:01:01" itemprop="dateCreated datePublished" datetime="2015-07-24T01:01:01+08:00">2015-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2022-10-25 14:23:06" itemprop="dateModified" datetime="2022-10-25T14:23:06+08:00">2022-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Blog/categories/code/security/" itemprop="url" rel="index"><span itemprop="name">security</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/Blog/15-07-24-Rowhammer.js_A_Remote_Software-Induced_Fault_Attack_in_JavaScript/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="15-07-24-Rowhammer.js_A_Remote_Software-Induced_Fault_Attack_in_JavaScript/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="文章字數">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">文章字數：</span>
      <span>13k</span>
    </span>
    <span class="post-meta-item" title="所需閱讀時間">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">所需閱讀時間 &asymp;</span>
      <span>12 分鐘</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://arxiv.org/pdf/1507.06955v5.pdf">Rowhammer.js: A Remote Software-Induced Fault Attack in JavaScript</a>阅读整理 </p>
<ul>
<li>非逐字逐句翻译</li>
<li>序号不完全代表段落</li>
</ul>
<h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><ol>
<li>概述Rowhammer.</li>
<li>别人要cache flush 指令以及高频率搞DRAM,但我们克服了这个限制,通过利用cache替换法来诱发Rowhammer,并且只用了常规内存访问,这让rowhammer在高严格甚至脚本环境里都能被触发.</li>
<li>我们将演示完全自动攻击,仅需要带JS的网页来引起远端硬件出错,由此我们可以自由的访问网络浏览者的系统,我们表明,攻击在现成的系统上工作。现有对策无法抵御这一新的Rowhammer攻击</li>
</ol>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><ol>
<li>利用硬件错误攻击通常需要物理访问改变设备的状态,然而软件诱导是可行的,85% 的 DDR3 块被Kim测试可以诱发位翻转,最近DDR4 也被发现可以被诱发,Seaborn证明了位翻转可以用来提升权限,但这些都用了底层代码并且使用了特殊指令——把cache刷入内存.</li>
<li>如果DRAM是有弱点的,我们可以不用任何特殊指令,仅仅利用常规访问和cache剔除法则在所有架构上实现。因此这是一个通用的,可以被部署在任何体系结构,编程语言,运行环境,只要它允许产生巨大的内存访问流,因此如移除clflush指令的抵抗手段并没有任何卵用。更吊的是,我们将向你展示用JS对远端有弱点的模块上进行攻击。</li>
<li>因为这个攻击通过网页同时并偷偷攻击数以亿计的设备,所以它是个严峻的安全威胁,rowhammer.js 不依赖任何CPU指令,他是第一个远端硬件错误攻击.为了证明我们实现了一个能在所有ff和chrome上运行的js代码.</li>
<li>我们用了4步, 1找两个不同的行的两个地址,2高频率剔除再重载这两个地址,3找寻可利用的位翻转,4利用它(控制页表 远端代码执行)</li>
<li>第3,4 步最近已经解决………但第一二步保持开放的挑战[毕竟要做到任意性还要ff和chrome的解析器适应性和ff和chrome的更新吧orz]</li>
<li>第一步挑战是用js收集物理地址的信息,它是严格沙箱,没可能收集虚拟或物理地址。为了应对这个挑战,我们决定部分物理地址使用大数组,它们被操作系统分配到大页上,我们因此不利用任何的JavaScript或浏览器的弱点,只有利用系统级别的优化.</li>
<li>第二步是找到能替代clflush指令的cache替代策略,老版本CPU简单的访问n+1个地址就足够剔除n路cache。 过去4年 Intel CPU生产的CPU使用Sandy Bridge,替换法则变化了并且没文档.因此已知的剔除策略的乘剔除率降低或者需要相当多的执行时间。为了应对这个挑战，我们提出一个通用的方法来找cache替换策略以此来达到时间和剔除概率的最好性能.我们提出的是目前最好的剔除策略，在现在Intel架构上比以往的一切都做得要好</li>
</ol>
<p>实验装置:</p>
<table>
<thead>
<tr>
<th>Platform</th>
<th>CPU</th>
<th>Architecture</th>
<th>RAM</th>
</tr>
</thead>
<tbody><tr>
<td>Lenovo T420</td>
<td>i5-2540M</td>
<td>Sandy Bridge Corsair DDR3-1333 8 GB and Samsung DDR3-1600 4 GB (2×)</td>
<td></td>
</tr>
<tr>
<td>Lenovo x230</td>
<td>i5-3320M</td>
<td>Ivy Bridge</td>
<td>Samsung DDR3-1600 4 GB (2×)</td>
</tr>
<tr>
<td>Asus H97-Pro</td>
<td>i7-4790</td>
<td>Haswell</td>
<td>Kingston DDR3-1600 8 GB</td>
</tr>
<tr>
<td>ASRock Z170 ITX</td>
<td>i7-6700K</td>
<td>Skylake</td>
<td>G.Skill DDR4-3200 8 GB (2×) and Crucial DDR4-2133 8 GB (2×)erimental setups</td>
</tr>
</tbody></table>
<p><del>羡慕 别人的玩具比我日常使用的电脑还好</del></p>
<ol>
<li>基于这些方法我们使用两阶段攻击未知配置的远端硬件</li>
<li>我们对比了上表列出的机器在固定配置rowhammer攻击下的状况，一些有和期望的样(挂了),另一些降低了刷新速率</li>
<li>至今软件对Rowhammer本机代码袭击的反抗也只是针对特定的利用,如我们所展示的，不足以保护JS的攻击，硬件防护难以部署,因为他们不影响传统的硬件,包括最近脆弱DDR4,BIOS更新可以用来解决这个问题在商品系统中,然而这仅仅是一个高端玩家的实际的解决方案</li>
<li>总之我们的贡献是:</li>
</ol>
<ul>
<li>我们提供第一个完全获取Intel CPU的cache剔除规则的方法,这也有益于更广阔的领域。缓存攻击,缓存无关算法、缓存替换策略。</li>
<li>我们用只访问内存的本地代码实现Rowhammer攻击。攻击在 Sandy Bridge, Ivy Bridge,Haswell and Skylake, 不同的 DDR3 and DDR4 都成功</li>
<li>我们用纯js实现了rowhammer</li>
</ul>
<h1 id="背景知识"><a href="#背景知识" class="headerlink" title="背景知识"></a>背景知识</h1><ul>
<li>DRAM 介绍</li>
<li>rowhammer 介绍</li>
<li>CPU cache 介绍 以及别人没文档的也被反向工程了,o1表示双核cpu哪个cache来存 [o1,o2]表示4核CPU哪个cache来存,有几款CPU能自适应替换规则orz</li>
<li>Cache Attacks and Cache Eviction Practical attacks on cryptographic algorithms have been explored thoroughly [8,31]. There are two main types of cache attacks called Prime+Probe and Flush+Reload<br> 小总结: 他们的不同缺点:慢,兼容性差,手工循环列,用了反向工程,用了刷cache的指令,低剔除率</li>
</ul>
<h1 id="2阶段剔除策略"><a href="#2阶段剔除策略" class="headerlink" title="2阶段剔除策略"></a>2阶段剔除策略</h1><p> 这是一个完全自动找 Sandy Bridge的cache剔除策略的方法</p>
<p> 基于Prime+Probe并显著提升了cache攻击</p>
<p> CPU 替换法不同影响了剔除集合的大小，访问模式需要建立一个高效的回收策略</p>
<p> 对于伪LRU,访问很多L3 cache相互冲突的目标地址,高可能的剔除,但对于适应性替换法,一个剔除策略可能在一个替换法下有效,在另一个替换法无效, 因此有必要搞一个理想的对两个都有效的并且不会有明显的时间开销</p>
<ol>
<li>静态集合和静态访问:用极短的时间利用cache片函数和物理地址并生成一个预序列.见3.2 3.3</li>
<li>动态集合和静态访问: 自动计算驱逐模式,不用任何系统的知识,例如的核心。良好的访问模式去匹配到目标系统的替换法对于一个成功的攻击是必要的。见3.3</li>
<li>动态集合和动态访问: 自动计算驱逐模式,不用任何系统知识,但需要大量的测试,并可自动攻击未知系统。见3.3</li>
<li>静态集合和动态访问: 使用预定义的集合 但顺序是自动化计算的 在理论上可行[这很理论:-)] 但并没有任何优势. [羡慕严谨_(:з」∠)_非要把四个列出来]</li>
</ol>
<p> 搞了离线[没有文档]和在线[未知系统]</p>
<h1 id="剔除模型"><a href="#剔除模型" class="headerlink" title="剔除模型"></a>剔除模型</h1><p> 成功率来自很多一个mem是否被剔除了的测试</p>
<ol>
<li>在同一个cache上的命中和不命中有可观的影响,我们通过一个剔除算法和添加不一致的随机内存访问来验证,剔除率&#x3D;剔除函数的平均成功率,并且只要时间正常,剔除函数成功率并不会收到添加了随机访问影响,因此,驱逐集只包含一致地址和驱逐策略的有效性取决于驱逐集合大小。</li>
<li>cache无法区别缓存,我们用a_i来表示访问序列,每一个a_i表示一个(一一对应),因此每次通过控制序列来决定访问哪个地址,a_1 a_2 a_3 序列等于任意一个 a_i a_j a_k 只要i,j,k 两两不等,如果在一个循环中运行,不同的内存地址的数量影响驱逐策略的有效性</li>
<li>重复访问同一个地址有必要把它留在cache 里,因为替换法会把旧的cache line 用新的cache line 替换掉 ,把a_1 … a_17序列变成a_1 … a_17 a_17 在Haswell上快了33%,如果重复执行它显著的提升乐剔除率,因为 cache 被我们的驱逐集填满了,但为我们发现一个随着访问同一个地址增多的边际效应递减,对所有地址我们发现到达一个阈值以后随访问增多剔除率在下降,因此 我们搞了S大小的集合剔除策略,但每轮只是该集合D大小的子集访问,再通过一个参数L来引起循环中能有重复的地址访问。</li>
<li>虽然在实际时间(第二类Stirling数 是很好的估计值)内测试所有可能序列甚至很短的序列不太可能,但探索能影响系统的参数是可能的,根据理论,更好的剔除策略不能被这种减少搜索空间方法找到。但用这种方法,我们可以找到有效的能引起rowhammer的驱逐策略.通过系统的比较驱逐策略,我们使用以下代码展示的方法, P:<strong>C-D-L-S</strong>, C决定每轮循环访问每一个内存的次数,D决定每轮访问不同的地址的个数,L是大循环的跳动步长,S是集合大小,比如LRU剔除序列是P:1-1-1-S,也就是a1 a2 a3…aS</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for (s = 0; s &lt;= S -D ; s += L)</span><br><span class="line">  for (c = 0; c &lt;= C; c += 1)</span><br><span class="line">    for (d = 0; d &lt;= D; d += 1)</span><br><span class="line">      *a[ s+d ];</span><br></pre></td></tr></table></figure>

<h2 id="离线测试"><a href="#离线测试" class="headerlink" title="离线测试"></a>离线测试</h2><p>  在离线阶段,攻击者试图学习他控制的一组机器每台最接近的驱逐策略相匹配的替代法。这不是严格意义上的替代法的逆向工程,通过找到最好的剔除策略,攻击者就弄清了系统。在这个阶段,攻击者没有时间限制<br>  我们讨论对Haswell platform 单DIMM单channel 的具体评测,我们测试了6阶 不同的C D L 参数和23种不同的 剔除集合大小,为了找到快且足够有效引起rowhammer的剔除策略,包括相同的剔除策略,我们在我们的3个平台上测试了18293种策略,我们用20 双向 rowhammer 测试测试了每个剔除策略2百万轮(每个策略8千万次) 且 用不同的评估标准对它们进行评估,包括 剔除率 运行时间 cache命中&#x2F;不命中率.总运行时间大于6天. hammering 是对一组固定的物理地址的一个特定的缓存设置的驱逐策略的公平比较.在进行到一半的时候(4千万) 我们测试了剔除率,命中&#x2F;不命中,后一半我们测试剔除的平均时间,我们通过足够多的样本容量验证了可重复的测量<br>  位翻转的数量并不适合作为剔除策略有效性的评判标准,只有判断是否以及如何让cache命中不命中才是有用的,执行时间和剔除率影响一个位翻转的可能性,位翻转在内存位置是可重现的,但是需要的时间和需要访问的次数变化很大,为了测了一个剔除策略的平均访问次数,我们需要用很多小时测试每一个剔除策略,这很难…,它也不会产生可重复的结果,并已经观察到如果一个DRAM被hammer很长时间 它就会永久损坏.<br>  长执行时间引起位翻转太慢,短时间没有好的剔除效率也没什么作用。剔除策略的执行时间和两个victim address的访问次数直接相关,因此它直接影响一个bit的翻转概率,在我们默认配置的Ivy Bridge书上我们观察到每轮hammer导致的位翻转要用1.5ms的执行时间,也就是在总的刷新时间64ms内大约对每个地址21500次访问的数据结果。这与刷新间隔tREFI有关(把64ms分成8192份？),在我们的Haswell测试系统上两路rowhammer只需要60ns通过clfLUSH,也就是64ms进行了每个地址60万次的访问(解释图1a)<br>  解释图1b.99.75%剔除率可以导致81%的位翻转(你们考虑过 Haswell system的感受吗)就是说 剔除率越高越好<br>  解释图1c 1d 的cache hit和cache miss 对位翻转的影响相关性小，真正相关的还是剔除策略<br>  4个图得出的结论是剔除率是一个剔除算法的好的指标,然后再在中间找执行时间少的,并且这种方法需要js这类不需要任何系统接口的</p>
<p>Haswell test system 上的 和clfLUSH(第一行)比较</p>
<table>
<thead>
<tr>
<th>C</th>
<th>D</th>
<th>L</th>
<th>S</th>
<th>Accesses</th>
<th>Hits</th>
<th>Misses</th>
<th>Time (ns)</th>
<th>Eviction</th>
</tr>
</thead>
<tbody><tr>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>2</td>
<td>2</td>
<td>60</td>
<td>99.9999%</td>
</tr>
<tr>
<td>5</td>
<td>2</td>
<td>2</td>
<td>18</td>
<td>90</td>
<td>34</td>
<td>4</td>
<td>179</td>
<td>99.9624%</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>1</td>
<td>17</td>
<td>68</td>
<td>35</td>
<td>5</td>
<td>180</td>
<td>99.9820%</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>1</td>
<td>17</td>
<td>34</td>
<td>47</td>
<td>5</td>
<td>191</td>
<td>99.8595%</td>
</tr>
<tr>
<td>6</td>
<td>2</td>
<td>2</td>
<td>18</td>
<td>108</td>
<td>34</td>
<td>5</td>
<td>216</td>
<td>99.9365%</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>17</td>
<td>17</td>
<td>96</td>
<td>13</td>
<td>307</td>
<td>74.4593%</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>2</td>
<td>20</td>
<td>80</td>
<td>41</td>
<td>23</td>
<td>329</td>
<td>99.7800%</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>20</td>
<td>20</td>
<td>187</td>
<td>78</td>
<td>934</td>
<td>99.8200%</td>
</tr>
</tbody></table>
<p>  以上测试结果是在LRU上 5-2-2-18和2-2-1-17 只用180ns左右 比较优秀 而并不是1-1-1-20 无论是率还是时间</p>
<p>  并且在eviction 循环里增加内存访问 可以减少时间</p>
<p>  总之新找到的比原来的 时间 和 效率都要强</p>
<p>  然后 还进行了Ivy bridge上的测试 也能高达99%的剔除率 然后也列了相关测试性能好的表 </p>
<p>  Skylake DDR4 上测试不太一样 但它很容易被8核逆向工程函数突破 并且再次发现 LRU剔除方案工作得更糟(1-1-1-X ?)</p>
<h2 id="在线测试"><a href="#在线测试" class="headerlink" title="在线测试"></a>在线测试</h2><p> 目标是未知系统,特别的微体系结构和数量的CPU核都是未知的,攻击者只有离线测试所储备的知识,他在目标机器上没有特权也没有时间去运行广泛的搜索,在线攻击通过两种&#x2F;步:以假设为基础的攻击 和一个备用攻击(如果第一个没有效果的话),这两种 都需要花一些时间 并且没有系统的特殊接口</p>
<p>23: Liu, F., Yarom, Y., Ge, Q., Heiser, G., Lee, R.B.: Last-Level Cache Side-Channel Attacks are Practical. In: S&amp;P’15(2015)</p>
<p>27: Oren, Y., Kemerlis, V.P., Sethumadhavan, S., Keromytis, A.D.: The Spy in the Sandbox: Practical Cache Attacks in JavaScript and their Implications. In: CCS’15 (2015)</p>
<h3 id="Assumption-based-Attack"><a href="#Assumption-based-Attack" class="headerlink" title="Assumption-based Attack"></a>Assumption-based Attack</h3><p>  首先通过时间表现 看看是不是离线测试过的机器中的一种或类似(因为并不能调系统函数来知道是啥) 只要匹配到了 就把之前离线得到的方案拿来试一试 这只需要很短的时间,并且 eviction 集合 可以静态或者动态计算处 我们在别人的基础上搞了一个动态生成集合算法 因此我们的静态算法产生的动态序列能最小化执行时间.</p>
<p> 一个假设是大<strong>大数组占大页</strong>,基于这个假设他们用下面这种 slice pattern 来判断 4核&#x2F;2核 4KB 的slice 和 2MB的page 的映射法</p>
<p>0123 0123 0123 0123 1032 1032 1032 1032 2301 2301 2301 2301 3210 3210 3210 3210<br>1032 1032 1032 1032 0123 0123 0123 0123 3210 3210 3210 3210 2301 2301 2301 2301<br>2301 2301 2301 2301 3210 3210 3210 3210 0123 0123 0123 0123 1032 1032 1032 1032<br>3210 3210 3210 3210 2301 2301 2301 2301 1032 1032 1032 1032 0123 0123 0123 0123</p>
<p> 针对Sandy Bridge architecture</p>
<p> Oren et al. [27] or Liu et al. [23] 的算法 只能找到 在同一个cache slice 和cache set 的地址</p>
<p> 我们用它可以找到 eviction set 在2mb 一致对齐的地址cache集合 同slice的</p>
<p> 子驱逐集 的计算 静态的取决于 复杂的地址函数 和 确定的2MB offset</p>
<h3 id="Fall-back-Attack"><a href="#Fall-back-Attack" class="headerlink" title="Fall-back Attack"></a>Fall-back Attack</h3><p> 如果上一个攻击失效了 也就是说 目标机器并不属于离线测的机器中的一种类型 ，那么我们将用另一个方法来找能触发 位翻转rowhammer的剔除策略</p>
<p> 我们扩展了 Oren et al. [27] or Liu et al. [23]的 1-1-1-X算法 来计算剔除策略 通过利用 动态的集合 和 动态的序列</p>
<ol>
<li>我们不断的给策略集合增加很多地址,让它足够访问同一个地址有驱逐策略,我们已经知道 当策略集合足够大时我们就能清晰的测试出 剔除的目标物理地址的大小</li>
<li>当剔除率大于设置的阈值 通过利用集合里的地址相互替代 并不会降低剔除率的话 这样 访问次数不下降但是 集合大小下降 因此降低了个数和执行时间,最后移除不会降低剔除率也不会增加时间的元素,再一次减少了不必要的 hit 也就减少了执行时间。</li>
</ol>
<p> 这样找到的集合 既不会访问很少访问的地址 每一个重复访问都对驱逐率有贡献。因此它们接近于静态剔除策略 这样找到的访问集合的剔除率完全接近攻击者设置的剔除率阈值中低运行时间的,如果把阈值设定得足够高,那么在时间中就很可能引起位翻转,那么这种用fall-back找到的剔除策略就能用来攻击<br> 这种算法要用一个函数cached(p) :这是尝试驱逐一个目标地址p的函数 通过现在的驱逐策略,集合以及通过访问时间时间判断p是否被cache了,解决方案的优劣取决于这个函数在测试中的表现,如果驱逐率低于攻击者设定的阈值那么函数返回真,大量的测试增加了执行时间和二元决策性的正确性，解释图4 时间 和剔除率的关系,如果高剔除率是十分必要的,那么执行时间可以超过40min,因此我们的算法预计算剔除策略一次,之后的剔除集合用固定的剔除算法在几秒内完成。</p>
<h2 id="实现以剔除为基础的rowhammer"><a href="#实现以剔除为基础的rowhammer" class="headerlink" title="实现以剔除为基础的rowhammer"></a>实现以剔除为基础的rowhammer</h2><p> 下面开始我们的表演:-) </p>
<p> 首先我们证明 只要攻击者能用native code 攻击 我们就能攻击</p>
<p> 然后我们通过拥有物理地址的知识，证明用js引发远端机器位翻转的可能性</p>
<p> 最后我们证明仅用js(不用额外信息)可以完成完整的rowhammer攻击</p>
<h3 id="Rowhammer-in-Native-Code"><a href="#Rowhammer-in-Native-Code" class="headerlink" title="Rowhammer in Native Code"></a>Rowhammer in Native Code</h3><p> 我们用我们找到的最好剔除策略扩张了Dullien的 double_sided_rowhammer 程序,首先clflush 用p:2-2-1策略替代了,这个剔除集合是既有预先的静态计算物理地址映射关系，也有完全地址函数以及动态剔除策略计算算法。通过这样我们可以在前文说到的四种机器上可重复的产生位翻转</p>
<p> 但是Haswell 我们以及clflUSH都不太能搞定，因为我们调高了刷新频率的参数tREFI,是一个游戏爱好者和超频社区用来提高性能会改变的.当然这是一个很有趣的课题,我们甚至想分析刷新率对rowhammer攻击适应性的影响.Kim[见论文20]勘探出刷新率直接影像位翻转数.这个参数对js引起的rowhammer同样适用。</p>
<p> 降低刷新率并对于真实攻击并不现实,已有的工作已经研究了Rowhammer的可攻击流行度, 发现85%DDR3被测试是易受到rowhammer 位翻转进攻的.只有Haswell test system and the G.Skill DIMMs in the Skylake test system在默认设置下是不易收到进攻的。因此我们的结论并不否定之前的预测,并且我们必须假设还有百万数量级的系统依旧脆弱.</p>
<p> rowhammer剔除策略被google native client 用在native code开发重现 这回允许在google chrome的权限提升,clfLUSH 指令已经被列入黑名单,然而这并没有卵用,我们用剔除法任然在GNC上引起了位翻转，从沙箱中脱离任然可能。</p>
<h3 id="Js-Rowhammer"><a href="#Js-Rowhammer" class="headerlink" title="Js Rowhammer"></a>Js Rowhammer</h3><p> 用js引起rowhammer更难,因为js没有虚拟地址或者指针,没有对物理地址的映射,我们观察到在最近版本的ff和chrome的linux版本上js会把大数组分配到1MB对齐并使用匿名2MB大小 只要可以。这个原因在于由操作系统实现的内存分配机制，任何内存分配 在类似脚本语言和环境也会导致为大数组分配匿名的2MB页的。</p>
<p> 通过一个类似Gruss 的一个时间攻击表现,我们推断出了浏览器的2MB页框,在这种攻击中,我们遍历一个数组和测量的访问延迟,延迟的峰值,在内存初始化的时候发生,由缺页引起,它发生在每一个新的2MB页 (见图5),在最新版本的浏览器也是这样的 ,尽管被Oren提出了减少时间精度并被W3C加入了HTML5标准,因此,我们知道虚拟和物理地址的最低21位知道数组中的偏移量。</p>
<p> 证明第一个概念,我们用js在ff上重现了native code 能做的准确物理地址rowhammer,为了做这个我们造了一个工具来把物理地址转换为虚拟地址，为了计算驱逐集我们用假设基础的算法,我们观察到简单的内存访问例如我们的native code 实现的那样没有被即时编译器优化。<br> 最终以js为基础的攻击 不需要任何外界的计算 因此它运行完全不需要用户交互。它利用大数组被分配到2MB大页的西现实，因此我们知道每一个我们的数组在2MB 页里面被分成了16行偏移的每行128KB(取决于低位的index位).我们现在来展示double-sided hammering 在这些2MB区域来诱发位翻转,或者提升单向hammering 在每2 mb的页面的外两行来引导另一个2MB区域的位翻转,这是史前第一个用JS实现的网站远端硬件错误攻击。</p>
<h3 id="攻击评值"><a href="#攻击评值" class="headerlink" title="攻击评值"></a>攻击评值</h3><p> 如Kim 论文[20]所描述的,DRAM里的地址能被位翻转的可能性不同,因此为了公平的比较不同的技术，我们测试了位翻转的数量对一个已知易感染的固定地址对。(图6)显示了在固定时间间隔内不同设置，不同的刷新频率如何影响位翻转。系统在测试时有轻微的使用(浏览,在编辑器里打字等等),如果刷新间隔设置得让clfLUSH指令可以引发位翻转,他们也就能被native code 剔除引发。为了用js引发位翻转略高的刷新间隔是必要的,再一次,如果特殊的DIMM刷新率设置得当,那么一次位翻转都不会发啊生。</p>
<p> js的位翻转的概率略低于native code.并且native code 稍微快一些，然而,只要一个机器可以被native code 实现易受害的,那也有被js 实现的能力。我们通过测试在不同的几个机器上验证了这种情况。</p>
<p> 虽然DDR4被认为对rowhammering对策,对策不是最终DDR4标准的一部分。使用严格的DDR4 DIMM 我们也能诱发位翻转在默认情况下 在最新的BIOS版本中,(用了反向工程后)。在G.Skill DDR4 DIMMs我们只有增加刷新间隔才能引发位翻转。所以说在最近的系统 硬件 软件 都没有对rowhammer的有效对策。是否会受到rowhammer的攻击的关键在于DIMM的刷新时间间隔的值</p>
<h1 id="讨论和相关工作"><a href="#讨论和相关工作" class="headerlink" title="讨论和相关工作"></a>讨论和相关工作</h1><p> 现有的攻击假定页表被映射在攻击者占据的两行之间的行中，然而我们发现在实践中几乎不会发生。操作系统喜欢用大页来减少TLB的压力，为了让操作系统易于组织和易于做物理地址的映射,这操作系统还把小的页装进了相同的物理组织框。在near-out-of-memory的情况页表只被分配在两个用户页。因此利用几乎所有系统内存才能强行造出这样的情况。然而换页在主流操作系统中是默认可用的，因此系统由于换页会产生严重的迟钝。在我们的利用的概念证明中，我们演示了放大单向rowhammer.通过锤击两个相邻行，和单面锤击相比我们显著的增加了位翻转的可能性。这允许甚至具有高概率在的2MB物理地址相邻区域的跨越边界引起位翻转，当我们已经能够用js引发位翻转我们就将目光集中在怎么类似之前的利用方法来利用页表，攻击者可以重复任何攻击步骤只要有必要就能成功。</p>
<p> 第一步 4.2说了利用的可利用位翻转,在页表里有1&#x2F;3的bit用于物理地址。在临近的2MB的范围里的一个页表中一个可以利用的bit翻转改变了一个物理地址。在我们的测试机器上我们已经发现了这样的位翻转。<br> 第二步 利用脚本释放除了两个被先hammer了的以外的其它页,因此包含位翻转的页也被释放了,申请数组要求浏览器储存虚拟地址空间区域，并按照第一次访问的映射到物理地址上，攻击者决定的最大数组大小也会触发页表分配在时间攻击,在我们所有测试系统中数组大小为1MB，我们只是访问，因此为每个1MB数组申请了4K页，因此每个页表有两个用户页面，The probability to place a group of page tables in the targeted 2MB region is ≈ 1&#x2F;3</p>
<p> 第三步 再次利用脚本触发翻转，有可能发现它的内存映射改变, 有1&#x2F;3的可能性地址映射到攻击者的页表中，如果成功，攻击者现在改变那个页表就会有完全的访问系统的物理地址。我们的想法在最新版linux系统和最新版ff被证实， It does not work in Google Chrome due to the immediate allocation of all physical memory for an allocated 1MB array after a single access.</p>
<h2 id="限制"><a href="#限制" class="headerlink" title="限制"></a>限制</h2><p> 在js中我们用2MB页来找到冲突地址和相邻的行，如果操作系统不提供2MB页我们就不能演示double-sided或提神 single-sided hammering.然而single-sided hammering 的一位翻转的可能性显著降低. 通过2MB页利用 double-sided hammering 也就不可能，因为我们只能引发在我们自己memory的位翻转. 因此攻击只可能放大single-sided hammering 来引发位翻转在相邻2MB页的相邻行，这是一个在这样行系统中的一个限制值.</p>
<p> 尽管搜寻一个可利用的位翻转可能要耗上好几个小时，尤其是js的位翻转比native code 的更低， 此外,如果我们不能猜出对这个系统最好的剔除策略,它将会耗上一个多小时来预计算来找寻一个好的剔除策略. 所以这对于现实的攻击也就不实际.</p>
<h2 id="对策"><a href="#对策" class="headerlink" title="对策"></a>对策</h2><p>The operating system allocates memory in large physical memory frames (often 2MB) for reasons of optimization. Page tables, kernel pages and user pages are not allocated in the same memory frame, unless the system is close to out-ofmemory (i.e., allocating the last few kilobytes of physical memory). Thus, the most efficient Rowhammer attack (double-sided hammering) would not possible if the operating system memory allocator was less aggressive in near-outof-memory situations. Preventing (amplified) single-sided hammering is more difficult, as hammering across the boundaries of a 2MB region is possible.</p>
<p>read-only shared code and data, shared libraries should not be shared over processes that run at different privilege levels or under different users. </p>
<p>refresh rate. </p>
<p>TRR</p>
<p>ECC</p>
<h2 id="相关工作"><a href="#相关工作" class="headerlink" title="相关工作"></a>相关工作</h2><p>The initial work by Kim et al. [20] and Seaborn’s [36] root exploit made the scientific community aware of the security implications of a Rowhammer attack.<br>However, to date, there have been very few other publications, focusing on different aspects than our work. Barbara Aichinger [1] analyzed Rowhammer faults in server systems where the problem exists in spite of ECC memory. She remarks that it will be difficult to fix the problem in the millions or even billions of DDR3<br>DRAMs in server systems. Rahmati et al. [34] have shown that bit flips can be used to identify a system based on the unique and repeatable error pattern that occurs at a significantly increased refresh interval. Our paper is the first to examine how to perform Rowhammer attacks based on cache eviction.1 Our cache eviction techniques facilitated cache side-channel attacks on ARM CPUs [22].<br>Concurrent and independent work by Aweke et al. [4] has also demonstrated bit flips without clflush on a Sandy Bridge laptop. They focus on countermeasures, whereas we focus on attacking a wider range of architectures and environments.</p>
<h2 id="将来的工作"><a href="#将来的工作" class="headerlink" title="将来的工作"></a>将来的工作</h2><p>我们仅仅研究js在linux的ff和chrome上造成rowhammer攻击的可能性，攻击利用内置的硬件和操作系统的工作方式的基本概念运作.无论系统是否用 4KB 页, 页表是需要的，并在一个属于这个页表的页被访问时被创建的. 因此, 操作系统不能防止1&#x2F;3 内存被用来分配页表.<br>相同的攻击方法可以应用到4 kb页分配给虚拟机的虚拟机监控程序, 他们甚至适用于Linux内核相似的分配机制.虽然看起来不合理和不现实的虚拟机监控程序分配4 kb页, 在实际上使得cross-VM页面重复数据删除技术变得更加容易. 根据 Barresi et al. [7], 页面重复数据删除实际上是仍然广泛应用于公共云. 我们的问题不是工作页面打开的可能性进一步调查是否重复数据删除实际上不仅是对虚拟机的安全和隐私, 而是程序本身的安全问题</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>In this paper, we presented Rowhammer.js, an implementation of the Rowhammer attack using fast cache eviction to trigger the Rowhammer bug with only regular memory accesses. It is the first work to investigate eviction strategies to defeat complex cache replacement policies. This does not only enable to trigger Rowhammer in JavaScript, it also benefits research on cache attacks as it allows to perform attacks on recent and unknown CPUs fast and reliably. Our fully automated attack runs in JavaScript through a remote website and can gain unrestricted access to systems. The attack technique is independent of CPU microarchitecture, programming language and execution environment.<br>The majority of DDR3 modules are vulnerable and DDR4 modules can be vulnerable too. Thus, it is important to discover all Rowhammer attack vectors.<br>Automated attacks through websites pose an enormous threat as they can be performed on millions of victim machines simultaneously.</p>
<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>证实只用访问内存就能引发 位翻转 不需要clflush指令 [并提供较为暴力的算法 和 实验数据比对]<br>证实js 可以引发 [匹配 和 用动态动态算(先增到平衡再替换减少 到最快)]并引发任何语言&#x2F;环境&#x2F;CPU&#x2F;cache攻击的可能性疑问 [当下无法被立刻化解 硬件&#x2F;软件 占有量]<br>证实利用ff的大页分配 2MB相邻 等 可实现引发+控制<br>DDR3 DDR4 都没能应对 但是 有一些可用的应对方法</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/Blog/page/10/"><i class="fa fa-angle-left" aria-label="上一頁"></i></a><a class="page-number" href="/Blog/">1</a><a class="page-number" href="/Blog/page/4/">4</a><a class="page-number" href="/Blog/page/8/">8</a><a class="page-number" href="/Blog/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/Blog/page/12/">12</a><a class="extend next" rel="next" href="/Blog/page/12/"><i class="fa fa-angle-right" aria-label="下一頁"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cro-Marmot</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="總字數">662k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="所需總閱讀時間">10:02</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 強力驅動
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/Blog/js/comments.js"></script><script src="/Blog/js/utils.js"></script><script src="/Blog/js/motion.js"></script><script src="/Blog/js/schemes/muse.js"></script><script src="/Blog/js/next-boot.js"></script><script src="/Blog/js/bookmark.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/Blog/js/third-party/search/local-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/Blog/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.2.0/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":false,"home":false,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://cromarmot.github.io/Blog/page/11/"}</script>
  <script src="/Blog/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"cromarmot","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/Blog/js/third-party/comments/disqus.js"></script>

</body>
</html>
